2014-02-24 14:04:27,772 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 14:04:28,443 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 14:04:28,755 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 14:04:28,833 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 14:04:30,252 [5] DEBUG Servicesys_parameter - 获取字段
2014-02-24 14:04:30,283 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 14:04:30,642 [5] DEBUG Servicesys_parameter - 获取字段
2014-02-24 14:04:30,642 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-02-24 14:04:39,737 [9] DEBUG Servicesys_user - 获取实体对象
2014-02-24 14:04:39,737 [9] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-02-24 14:04:40,174 [9] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-02-24 14:04:40,392 [9] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/2/24 14:04:40')
2014-02-24 14:04:40,455 [9] DEBUG Servicemms_project - 获取实体对象
2014-02-24 14:04:40,455 [9] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-02-24 14:04:40,657 [5] DEBUG Servicesys_parameter - 获取字段
2014-02-24 14:04:40,657 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 14:04:40,909 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 14:04:41,754 [5] DEBUG Servicesys_parameter - 获取字段
2014-02-24 14:04:41,754 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 14:04:43,083 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 14:04:48,638 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2014-02-24 14:04:49,462 [8] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:04:49,463 [8] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 14:07:14,082 [15] DEBUG Servicesys_menu - 编辑记录
2014-02-24 14:07:14,132 [15] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='fa5ab660-cb4f-4d32-8bc1-c14f7d244f6d'
2014-02-24 14:07:14,144 [15] DEBUG Sys - insert into sys_menu([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('内部管理','13','','icon-star','','1','1','','管理员','2014/2/24 14:07:14','管理员','2014/2/24 14:07:14')
2014-02-24 14:07:14,315 [16] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:07:14,327 [16] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 14:08:52,998 [15] DEBUG Servicesys_menu - 编辑记录
2014-02-24 14:08:52,999 [15] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='d5ad5969-7dff-4f2c-ae01-bacf88d3f324'
2014-02-24 14:08:53,000 [15] DEBUG Sys - insert into sys_menu([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('内贸订单管理','1301','13','icon-application','','0','0','','管理员','2014/2/24 14:08:53','管理员','2014/2/24 14:08:53')
2014-02-24 14:08:53,002 [15] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='98'
2014-02-24 14:08:53,010 [15] DEBUG Sys - update sys_menu set [MenuName] = '开发平台', [MenuCode] = '98', [ParentCode] = '0', [IconClass] = 'icon-image', [URL] = '#', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '60', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:08:53' where [MenuCode] = '98'
2014-02-24 14:08:53,167 [15] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1201'
2014-02-24 14:08:53,168 [15] DEBUG Sys - update sys_menu set [MenuName] = '项目信息', [MenuCode] = '1201', [ParentCode] = '12', [IconClass] = 'icon-application', [URL] = '/mms/project', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '1210', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:08:53' where [MenuCode] = '1201'
2014-02-24 14:08:53,327 [16] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:08:53,327 [16] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 14:09:06,494 [7] DEBUG Servicesys_menu - 编辑记录
2014-02-24 14:09:06,496 [7] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1301'
2014-02-24 14:09:06,509 [7] DEBUG Sys - update sys_menu set [MenuName] = '内贸订单管理', [MenuCode] = '1301', [ParentCode] = '13', [IconClass] = 'icon-application', [URL] = '', [IsVisible] = '1', [IsEnable] = '1', [MenuSeq] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:09:06' where [MenuCode] = '1301'
2014-02-24 14:09:06,656 [11] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:09:06,656 [11] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 14:11:04,780 [16] DEBUG Servicesys_menu - 编辑记录
2014-02-24 14:11:04,781 [16] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='9b2d6f48-1253-4644-9950-ddbf9c39f3b5'
2014-02-24 14:11:04,821 [16] DEBUG Sys - insert into sys_menu([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('内贸订单跟踪','1302','13','icon-application','','0','0','','管理员','2014/2/24 14:11:04','管理员','2014/2/24 14:11:04')
2014-02-24 14:11:04,825 [16] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='98'
2014-02-24 14:11:04,826 [16] DEBUG Sys - update sys_menu set [MenuName] = '开发平台', [MenuCode] = '98', [ParentCode] = '0', [IconClass] = 'icon-image', [URL] = '#', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '60', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:11:04' where [MenuCode] = '98'
2014-02-24 14:11:04,826 [16] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1201'
2014-02-24 14:11:04,827 [16] DEBUG Sys - update sys_menu set [MenuName] = '项目信息', [MenuCode] = '1201', [ParentCode] = '12', [IconClass] = 'icon-application', [URL] = '/mms/project', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '1210', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:11:04' where [MenuCode] = '1201'
2014-02-24 14:11:04,967 [8] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:11:04,967 [8] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 14:11:17,026 [12] DEBUG Servicesys_menu - 编辑记录
2014-02-24 14:11:17,027 [12] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1302'
2014-02-24 14:11:17,028 [12] DEBUG Sys - update sys_menu set [MenuName] = '内贸订单跟踪', [MenuCode] = '1302', [ParentCode] = '13', [IconClass] = 'icon-application', [URL] = '', [IsVisible] = '1', [IsEnable] = '1', [MenuSeq] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:11:17' where [MenuCode] = '1302'
2014-02-24 14:11:17,140 [9] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:11:17,140 [9] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 14:12:14,095 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/role/Index','/Sys/role')
2014-02-24 14:12:14,120 [14] DEBUG Servicesys_user - 获取动态列表
2014-02-24 14:12:14,120 [14] DEBUG Sys - select UserCode,UserName from sys_user
2014-02-24 14:12:14,140 [14] DEBUG Servicesys_organize - 获取动态列表
2014-02-24 14:12:14,141 [14] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2014-02-24 14:12:14,564 [8] DEBUG Servicesys_role - 获取实体列表
2014-02-24 14:12:14,566 [8] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2014-02-24 14:12:23,031 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2014-02-24 14:12:23,277 [15] DEBUG Servicesys_organize - 获取实体列表
2014-02-24 14:12:23,277 [15] DEBUG Sys - select sys_organize.* from sys_organize
2014-02-24 14:12:23,315 [16] DEBUG Servicesys_user - 获取实体列表
2014-02-24 14:12:23,316 [16] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2014-02-24 14:12:23,401 [16] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2014-02-24 14:12:30,675 [12] DEBUG Sys - 
select distinct A.RoleCode,A.RoleName
,(case when B.RoleCode is null then 'false' else 'true' end) as Checked
from sys_role A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode and B.UserCode = 'admin'
2014-02-24 14:12:36,807 [9] DEBUG Sys - select * from sys_button order by ButtonSeq
2014-02-24 14:12:36,838 [12] DEBUG Servicesys_permission - 获取动态列表
2014-02-24 14:12:36,838 [12] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2014-02-24 14:12:36,916 [9] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2014-02-24 14:12:37,053 [9] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2014-02-24 14:12:49,139 [12] DEBUG Servicesys_role - 修改角色菜单权限
2014-02-24 14:12:49,141 [12] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2014-02-24 14:12:49,142 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','13')
2014-02-24 14:12:49,144 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1301')
2014-02-24 14:12:49,146 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1302')
2014-02-24 14:12:49,147 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2014-02-24 14:12:49,147 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2014-02-24 14:12:49,147 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2014-02-24 14:12:49,147 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2014-02-24 14:12:49,147 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2014-02-24 14:12:49,148 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2014-02-24 14:12:49,148 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2014-02-24 14:12:49,148 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2014-02-24 14:12:49,148 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2014-02-24 14:12:49,148 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2014-02-24 14:12:49,149 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2014-02-24 14:12:49,149 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2014-02-24 14:12:49,149 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2014-02-24 14:12:49,149 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2014-02-24 14:12:49,149 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2014-02-24 14:12:49,151 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2014-02-24 14:12:49,151 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2014-02-24 14:12:49,151 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2014-02-24 14:12:49,151 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2014-02-24 14:12:49,152 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2014-02-24 14:12:49,152 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2014-02-24 14:12:49,152 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2014-02-24 14:12:49,153 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2014-02-24 14:12:49,153 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2014-02-24 14:12:49,153 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2014-02-24 14:12:49,153 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2014-02-24 14:12:49,153 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2014-02-24 14:12:49,154 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2014-02-24 14:12:49,154 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2014-02-24 14:12:49,154 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2014-02-24 14:12:49,154 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2014-02-24 14:12:49,155 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2014-02-24 14:12:49,155 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2014-02-24 14:12:49,155 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2014-02-24 14:12:49,155 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2014-02-24 14:12:49,155 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2014-02-24 14:12:49,156 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2014-02-24 14:12:49,156 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2014-02-24 14:12:49,156 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2014-02-24 14:12:49,156 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2014-02-24 14:12:49,156 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2014-02-24 14:12:49,157 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2014-02-24 14:12:49,157 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2014-02-24 14:12:49,157 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2014-02-24 14:12:49,157 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2014-02-24 14:12:49,158 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2014-02-24 14:12:49,158 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2014-02-24 14:12:49,158 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2014-02-24 14:12:49,158 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2014-02-24 14:12:49,158 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2014-02-24 14:12:49,173 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2014-02-24 14:12:49,174 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2014-02-24 14:12:49,174 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2014-02-24 14:12:49,174 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2014-02-24 14:12:49,174 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2014-02-24 14:12:49,177 [12] DEBUG Servicesys_role - 修改角色菜单按钮权限
2014-02-24 14:12:49,177 [12] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2014-02-24 14:12:49,185 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2014-02-24 14:12:49,187 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2014-02-24 14:12:49,189 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2014-02-24 14:12:49,190 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','refresh')
2014-02-24 14:12:49,192 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','download')
2014-02-24 14:12:49,194 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','audit')
2014-02-24 14:12:49,195 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2014-02-24 14:12:49,196 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2014-02-24 14:12:49,196 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2014-02-24 14:12:49,196 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2014-02-24 14:12:49,196 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2014-02-24 14:12:49,196 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2014-02-24 14:12:49,198 [12] DEBUG Servicesys_role - 修改角色数据权限
2014-02-24 14:12:49,199 [12] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2014-02-24 14:12:49,200 [12] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2014-02-24 14:12:49,203 [12] DEBUG Servicesys_role - 修改角色数据列权限
2014-02-24 14:12:49,205 [12] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2014-02-24 14:14:33,554 [7] DEBUG Servicesys_parameter - 获取字段
2014-02-24 14:14:33,554 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 14:14:33,554 [7] DEBUG Servicesys_parameter - 获取字段
2014-02-24 14:14:33,555 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-02-24 14:14:39,498 [11] DEBUG Servicesys_user - 获取实体对象
2014-02-24 14:14:39,498 [11] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-02-24 14:14:39,498 [11] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-02-24 14:14:39,513 [11] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/2/24 14:14:39')
2014-02-24 14:14:39,513 [11] DEBUG Servicemms_project - 获取实体对象
2014-02-24 14:14:39,529 [11] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-02-24 14:14:39,560 [11] DEBUG Servicesys_parameter - 获取字段
2014-02-24 14:14:39,560 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 14:14:39,576 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 14:14:39,576 [11] DEBUG Servicesys_parameter - 获取字段
2014-02-24 14:14:39,576 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 14:14:39,716 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 14:14:57,495 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2014-02-24 14:14:57,722 [11] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:14:57,722 [11] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 14:15:38,975 [11] DEBUG Servicesys_menu - 编辑记录
2014-02-24 14:15:38,977 [11] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1301'
2014-02-24 14:15:38,978 [11] DEBUG Sys - update sys_menu set [MenuName] = '内贸订单管理', [MenuCode] = '1301', [ParentCode] = '13', [IconClass] = 'icon-package_add', [URL] = '', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:15:38' where [MenuCode] = '1301'
2014-02-24 14:15:38,987 [11] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1302'
2014-02-24 14:15:38,987 [11] DEBUG Sys - update sys_menu set [MenuName] = '内贸订单跟踪', [MenuCode] = '1302', [ParentCode] = '13', [IconClass] = 'icon-package_go', [URL] = '', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:15:38' where [MenuCode] = '1302'
2014-02-24 14:15:39,012 [11] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1012'
2014-02-24 14:15:39,013 [11] DEBUG Sys - update sys_menu set [MenuName] = '租赁出场单', [MenuCode] = '1012', [ParentCode] = '10', [IconClass] = 'icon-door_out', [URL] = '/mms/rentout', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '100', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 14:15:39' where [MenuCode] = '1012'
2014-02-24 14:15:39,161 [7] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:15:39,161 [7] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 14:15:44,078 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2014-02-24 14:15:44,281 [12] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 14:15:44,281 [12] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 15:14:16,047 [18] ERROR / - System.TypeInitializationException: “Zephyr.Web.Sys.DbCreatorBase”的类型初始值设定项引发异常。 ---> System.Configuration.ConfigurationErrorsException: 项“Mms”已添加。 (F:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\web.config line 20)
   在 System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)
   在 System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
   在 System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   在 System.Configuration.Configuration.get_ConnectionStrings()
   在 Zephyr.Web.Sys.DbCreatorBase.GetDefaultConnectionName() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 35
   在 Zephyr.Web.Sys.DbCreatorBase..cctor() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 26
   --- 内部异常堆栈跟踪的结尾 ---
   在 Zephyr.Web.Sys.SysEntrance.OnFrameworkActionExecuting(ActionExecutingContext filterContext) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\SysEntrance.cs:行号 54
   在 Zephyr.Web.Mvc.WebFrameworkFilter.OnActionExecuting(ActionExecutingContext filterContext) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Mvc\Webstack\WebFrameworkFilter.cs:行号 12
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState)
2014-02-24 15:14:16,449 [19] ERROR / - System.TypeInitializationException: “Zephyr.Web.Sys.DbCreatorBase”的类型初始值设定项引发异常。 ---> System.Configuration.ConfigurationErrorsException: 项“Mms”已添加。 (F:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\web.config line 20)
   在 System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)
   在 System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
   在 System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   在 System.Configuration.Configuration.get_ConnectionStrings()
   在 Zephyr.Web.Sys.DbCreatorBase.GetDefaultConnectionName() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 35
   在 Zephyr.Web.Sys.DbCreatorBase..cctor() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 26
   --- 内部异常堆栈跟踪的结尾 ---
   在 Zephyr.Web.Sys.SysEntrance.OnFrameworkActionExecuting(ActionExecutingContext filterContext) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\SysEntrance.cs:行号 54
   在 Zephyr.Web.Mvc.WebFrameworkFilter.OnActionExecuting(ActionExecutingContext filterContext) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Mvc\Webstack\WebFrameworkFilter.cs:行号 12
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState)
2014-02-24 15:14:23,182 [18] ERROR / - System.TypeInitializationException: “Zephyr.Web.Sys.DbCreatorBase”的类型初始值设定项引发异常。 ---> System.Configuration.ConfigurationErrorsException: 项“Mms”已添加。 (F:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\web.config line 20)
   在 System.Configuration.BaseConfigurationRecord.EvaluateOne(String[] keys, SectionInput input, Boolean isTrusted, FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult)
   在 System.Configuration.BaseConfigurationRecord.Evaluate(FactoryRecord factoryRecord, SectionRecord sectionRecord, Object parentResult, Boolean getLkg, Boolean getRuntimeObject, Object& result, Object& resultRuntimeObject)
   在 System.Configuration.BaseConfigurationRecord.GetSectionRecursive(String configKey, Boolean getLkg, Boolean checkPermission, Boolean getRuntimeObject, Boolean requestIsHere, Object& result, Object& resultRuntimeObject)
   在 System.Configuration.Configuration.get_ConnectionStrings()
   在 Zephyr.Web.Sys.DbCreatorBase.GetDefaultConnectionName() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 35
   在 Zephyr.Web.Sys.DbCreatorBase..cctor() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 26
   --- 内部异常堆栈跟踪的结尾 ---
   在 Zephyr.Web.Sys.SysEntrance.OnFrameworkActionExecuting(ActionExecutingContext filterContext) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\SysEntrance.cs:行号 54
   在 Zephyr.Web.Mvc.WebFrameworkFilter.OnActionExecuting(ActionExecutingContext filterContext) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Mvc\Webstack\WebFrameworkFilter.cs:行号 12
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState)
2014-02-24 15:14:52,736 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:14:52,754 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:14:52,757 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:14:52,758 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:14:52,760 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:14:52,766 [17] DEBUG Trade - 
--set ANSI_NULLS ON
--set QUOTED_IDENTIFIER ON
 
-- =============================================
-- Description:	提供中文首字母
-- Demo: select * from 表 where fun_getPY(字段) like N'%zgr%'
-- =============================================
CREATE FUNCTION [dbo].[fun_getPY]
(
	@str NVARCHAR(4000)
)
RETURNS NVARCHAR(4000)
AS
BEGIN
	DECLARE @word NCHAR(1),@PY NVARCHAR(4000)
	SET @PY=''
	WHILE len(@str)>0
	BEGIN
		SET @word=left(@str,1)
		SET @PY=@PY+(CASE WHEN unicode(@word) BETWEEN 19968 AND 19968+20901
		THEN (SELECT TOP 1 PY FROM (
		SELECT 'A' AS PY,N'' AS word
		UNION ALL SELECT 'B',N'簿'
		UNION ALL SELECT 'C',N'e'
		UNION ALL SELECT 'D',N'z'
		UNION ALL SELECT 'E',N''
		UNION ALL SELECT 'F',N'v'
		UNION ALL SELECT 'G',N'B'
		UNION ALL SELECT 'H',N''
		UNION ALL SELECT 'J',N'h'
		UNION ALL SELECT 'K',N'i'
		UNION ALL SELECT 'L',N'w'
		UNION ALL SELECT 'M',N''
		UNION ALL SELECT 'N',N''
		UNION ALL SELECT 'O',N'a'
		UNION ALL SELECT 'P',N'曝'
		UNION ALL SELECT 'Q',N''
		UNION ALL SELECT 'R',N'U'
		UNION ALL SELECT 'S',N'R'
		UNION ALL SELECT 'T',N'X'
		UNION ALL SELECT 'W',N'F'
		UNION ALL SELECT 'X',N'R'
		UNION ALL SELECT 'Y',N''
		UNION ALL SELECT 'Z',N''
		) T 
		WHERE word>=@word COLLATE Chinese_PRC_CS_AS_KS_WS 
		ORDER BY PY ASC) ELSE @word END)
		SET @str=right(@str,len(@str)-1)
	END
	RETURN @PY
END
2014-02-24 15:14:52,820 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:14:53,055 [19] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:14:53,070 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 15:14:53,289 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 15:14:53,616 [19] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:14:53,616 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 15:14:54,640 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 15:15:10,361 [20] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:15:10,361 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 15:15:10,439 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 15:15:10,439 [20] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:15:10,439 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 15:15:11,094 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 15:15:30,683 [20] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:15:30,684 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 15:15:30,687 [20] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:15:30,687 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-02-24 15:15:38,791 [22] DEBUG Servicesys_user - 获取实体对象
2014-02-24 15:15:38,791 [22] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-02-24 15:15:38,791 [22] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-02-24 15:15:38,806 [22] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/2/24 15:15:38')
2014-02-24 15:15:38,806 [22] DEBUG Servicemms_project - 获取实体对象
2014-02-24 15:15:38,806 [22] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-02-24 15:15:38,838 [19] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:15:38,838 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 15:15:38,853 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 15:15:38,853 [19] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:15:38,853 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 15:15:38,949 [20] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 15:15:44,427 [19] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2014-02-24 15:16:14,804 [18] DEBUG Trade - SELECT Name as TableName FROM sys.tables order by Name
2014-02-24 15:16:14,838 [20] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2014-02-24 15:16:16,983 [20] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('TRAILER')
ORDER BY sys.columns.column_id
2014-02-24 15:21:03,200 [24] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('TRAILER')
ORDER BY sys.columns.column_id
2014-02-24 15:21:03,207 [24] DEBUG Trade - sp_pkeys 'TRAILER'
2014-02-24 15:49:05,642 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:05,656 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:05,658 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:05,659 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:05,661 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:05,661 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:05,879 [33] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:49:05,889 [33] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 15:49:06,093 [33] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 15:49:06,527 [33] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:49:06,528 [33] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 15:49:09,273 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:09,286 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:09,290 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:09,290 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:09,293 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:09,293 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 15:49:09,521 [33] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 15:49:10,446 [34] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 15:49:13,804 [18] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2014-02-24 15:49:14,393 [33] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 15:49:14,400 [33] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 15:49:52,645 [33] DEBUG Servicesys_menu - 编辑记录
2014-02-24 15:49:52,676 [33] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1301'
2014-02-24 15:49:52,708 [33] DEBUG Sys - update sys_menu set [MenuName] = '内贸订单管理', [MenuCode] = '1301', [ParentCode] = '13', [IconClass] = 'icon-package_add', [URL] = '/trade/trailer', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 15:49:52' where [MenuCode] = '1301'
2014-02-24 15:49:53,008 [34] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 15:49:53,013 [34] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 15:50:14,316 [33] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:50:14,317 [33] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 15:50:14,364 [33] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 15:50:14,370 [33] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:50:14,370 [33] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 15:50:15,001 [34] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 15:50:17,572 [34] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:50:17,572 [34] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 15:50:17,584 [34] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 15:50:17,586 [34] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:50:17,586 [34] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 15:50:17,766 [18] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 15:50:22,253 [20] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:50:22,254 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 15:50:22,267 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 15:50:22,269 [20] DEBUG Servicesys_parameter - 获取字段
2014-02-24 15:50:22,269 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 15:50:22,558 [31] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 15:50:23,024 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2014-02-24 15:50:24,216 [34] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-02-24 15:50:25,049 [34] ERROR /trade/trailer - System.Web.HttpCompileException (0x80004005): f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Views\Trailer\Index.cshtml(2): error CS0103: 当前上下文中不存在名称“ViewBag”
   在 System.Web.Compilation.AssemblyBuilder.Compile()
   在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2014-02-24 16:02:16,639 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:02:16,655 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:02:16,658 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:02:16,658 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:02:16,660 [28] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:02:16,661 [28] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:02:16,930 [31] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:02:16,945 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 16:02:17,179 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 16:02:17,554 [31] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:02:17,554 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 16:02:18,636 [30] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 16:02:20,739 [31] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-02-24 16:02:21,507 [31] ERROR /trade/trailer - System.Web.HttpCompileException (0x80004005): f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Views\Trailer\Index.cshtml(2): error CS0103: 当前上下文中不存在名称“ViewBag”
   在 System.Web.Compilation.AssemblyBuilder.Compile()
   在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2014-02-24 16:34:47,473 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:34:47,497 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:34:47,502 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:34:47,502 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:34:47,506 [28] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:34:47,507 [28] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:34:47,744 [30] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:34:47,753 [30] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 16:34:47,935 [30] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 16:34:48,183 [30] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:34:48,183 [30] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 16:34:49,036 [31] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 16:34:59,536 [31] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:34:59,537 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 16:34:59,548 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 16:34:59,549 [31] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:34:59,549 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 16:34:59,851 [30] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 16:35:01,300 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-02-24 16:35:01,766 [32] DEBUG Sys - select MenuCode from sys_menu where URL = '/trade/trailer'
2014-02-24 16:35:01,919 [32] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1301'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2014-02-24 16:35:02,077 [32] DEBUG Sys - select MenuCode from sys_menu where URL = '/trade/trailer'
2014-02-24 16:35:02,078 [32] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1301' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2014-02-24 16:35:02,753 [31] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:35:02,754 [31] DEBUG Trade - select top 20 * from TRAILER order by JOBNO
2014-02-24 16:35:02,905 [31] DEBUG Trade - select count(*) from ( select * from TRAILER ) tb_temp
2014-02-24 16:35:52,527 [31] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:35:52,528 [31] DEBUG Trade - select top 20 * from TRAILER order by JOBNO
2014-02-24 16:35:52,531 [31] DEBUG Trade - select count(*) from ( select * from TRAILER ) tb_temp
2014-02-24 16:35:54,000 [30] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:35:54,001 [30] DEBUG Trade - select top 20 * from TRAILER order by JOBNO
2014-02-24 16:35:54,003 [30] DEBUG Trade - select count(*) from ( select * from TRAILER ) tb_temp
2014-02-24 16:36:18,484 [31] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:36:18,484 [31] DEBUG Trade - select top 20 * from TRAILER where TR_JOBNOIN like '%1%' order by JOBNO
2014-02-24 16:36:18,562 [31] DEBUG Trade - select count(*) from ( select * from TRAILER where TR_JOBNOIN like '%1%' ) tb_temp
2014-02-24 16:36:20,115 [32] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:36:20,115 [32] DEBUG Trade - select top 20 * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' order by JOBNO
2014-02-24 16:36:20,143 [32] DEBUG Trade - select count(*) from ( select * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' ) tb_temp
2014-02-24 16:36:21,705 [30] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:36:21,706 [30] DEBUG Trade - select top 20 * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' and TR_CONNO like '%3%' order by JOBNO
2014-02-24 16:36:21,730 [30] DEBUG Trade - select count(*) from ( select * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' and TR_CONNO like '%3%' ) tb_temp
2014-02-24 16:36:24,319 [32] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:36:24,320 [32] DEBUG Trade - select top 20 * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' and TR_CONNO like '%3%' and TR_CARRI='5' order by JOBNO
2014-02-24 16:36:24,332 [32] DEBUG Trade - select count(*) from ( select * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' and TR_CONNO like '%3%' and TR_CARRI='5' ) tb_temp
2014-02-24 16:36:26,442 [31] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:36:26,442 [31] DEBUG Trade - select top 20 * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' and TR_CONNO like '%3%' and TR_CARRI='5' and TR_CARNO='4' order by JOBNO
2014-02-24 16:36:26,465 [31] DEBUG Trade - select count(*) from ( select * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' and TR_CONNO like '%3%' and TR_CARRI='5' and TR_CARNO='4' ) tb_temp
2014-02-24 16:36:28,272 [31] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:36:28,273 [31] DEBUG Trade - select top 20 * from TRAILER where TR_JOBNOIN like '%1%' and TR_BLNO like '%2%' and TR_CONNO like '%3%' and TR_CARRI='5' and TR_CARNO='4' and datediff(day,'6',TR_ETSH) >=0 and datediff(day,'6',TR_ETSH) <=0 order by JOBNO
2014-02-24 16:36:28,638 [31] ERROR Servicetrade_trailer - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 从字符串转换日期和/或时间时，转换失败。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:68d623c5-5b98-4ad8-a48c-d2a7a97d40d1
2014-02-24 16:36:28,774 [31] ERROR /api/Trade/Trailer - System.Data.SqlClient.SqlException (0x80131904): 从字符串转换日期和/或时间时，转换失败。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Trade.Controllers.TrailerApiController.Get(RequestWrapper query) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Controllers\TrailerController.cs:行号 78
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:68d623c5-5b98-4ad8-a48c-d2a7a97d40d1
2014-02-24 16:36:31,615 [31] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:36:31,615 [31] DEBUG Trade - select top 20 * from TRAILER order by JOBNO
2014-02-24 16:36:31,618 [31] DEBUG Trade - select count(*) from ( select * from TRAILER ) tb_temp
2014-02-24 16:38:11,572 [30] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:38:11,572 [30] DEBUG Trade - select top 20 * from TRAILER order by JOBNO
2014-02-24 16:38:11,575 [30] DEBUG Trade - select count(*) from ( select * from TRAILER ) tb_temp
2014-02-24 16:41:47,894 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:41:47,909 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:41:47,909 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:41:47,909 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:41:47,925 [28] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:41:47,925 [28] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:41:48,143 [31] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:41:48,159 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 16:41:48,315 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 16:41:48,518 [31] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:41:48,533 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 16:41:49,325 [30] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 16:41:51,997 [31] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2014-02-24 16:41:58,566 [31] DEBUG Trade - SELECT Name as TableName FROM sys.tables order by Name
2014-02-24 16:41:58,582 [30] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2014-02-24 16:42:04,968 [32] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 16:47:16,291 [31] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 16:47:16,297 [31] DEBUG Trade - sp_pkeys 'trade_trailer'
2014-02-24 16:49:37,409 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:49:37,425 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:49:37,425 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:49:37,425 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:49:37,425 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:49:37,425 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:49:37,628 [32] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:49:37,628 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 16:49:37,784 [32] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 16:49:37,987 [32] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:49:37,987 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 16:49:38,739 [31] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 16:53:33,320 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:33,332 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:33,335 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:33,336 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:33,338 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:33,338 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:33,558 [31] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:53:33,568 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 16:53:33,724 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 16:53:33,924 [31] DEBUG Servicesys_parameter - 获取字段
2014-02-24 16:53:33,924 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 16:53:34,801 [32] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 16:53:38,065 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:38,078 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:38,081 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:38,081 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:38,083 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:38,083 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 16:53:38,270 [30] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-02-24 16:53:38,278 [30] DEBUG Servicesys_code - 获取动态列表
2014-02-24 16:53:38,286 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-02-24 16:53:39,011 [30] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 16:53:40,781 [32] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:53:40,782 [32] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-02-24 16:53:40,792 [32] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-02-24 16:54:21,141 [30] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:54:21,142 [30] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-02-24 16:54:21,143 [30] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-02-24 16:54:41,627 [31] DEBUG Servicetrade_trailer - 获取新主键
2014-02-24 16:54:41,631 [31] DEBUG Trade - select isnull(max(JOBNO),0) from trade_trailer  where 1 = 1 
2014-02-24 16:55:07,250 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2014-02-24 16:55:07,258 [32] DEBUG Servicemms_warehouse - 获取动态列表
2014-02-24 16:55:07,258 [32] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-02-24 16:55:07,377 [32] DEBUG Servicesys_code - 获取动态列表
2014-02-24 16:55:07,378 [32] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-02-24 16:55:08,321 [31] DEBUG Servicemms_receive - 获取动态列表
2014-02-24 16:55:08,322 [31] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2014-02-24 16:55:08,468 [31] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2014-02-24 16:55:09,886 [33] DEBUG Servicemms_receive - 获取新主键
2014-02-24 16:55:09,886 [33] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2014-02-24 16:55:10,084 [30] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2014-02-24 16:55:10,096 [30] DEBUG Servicemms_receive - 获取实体对象
2014-02-24 16:55:10,098 [30] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201402240001'
2014-02-24 16:55:10,115 [30] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-02-24 16:55:10,165 [30] DEBUG Servicemms_receive - 获取字段
2014-02-24 16:55:10,166 [30] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-02-24 16:55:10,169 [30] DEBUG Servicemms_receive - 获取字段
2014-02-24 16:55:10,170 [30] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201402240001' and ProjectCode='201306030001' order by BillNo desc
2014-02-24 16:55:10,173 [30] DEBUG Servicemms_receive - 获取字段
2014-02-24 16:55:10,173 [30] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201402240001' and ProjectCode='201306030001' order by BillNo
2014-02-24 16:55:10,176 [30] DEBUG Servicemms_receive - 获取字段
2014-02-24 16:55:10,176 [30] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-02-24 16:55:10,217 [30] DEBUG Servicesys_code - 获取动态列表
2014-02-24 16:55:10,217 [30] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-02-24 16:55:10,220 [30] DEBUG Servicesys_code - 获取动态列表
2014-02-24 16:55:10,220 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-02-24 16:55:10,221 [30] DEBUG Servicesys_code - 获取动态列表
2014-02-24 16:55:10,221 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-02-24 16:55:10,240 [30] DEBUG Servicemms_warehouse - 获取动态列表
2014-02-24 16:55:10,240 [30] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-02-24 16:55:10,241 [30] DEBUG Servicesys_code - 获取字段
2014-02-24 16:55:10,242 [30] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-02-24 16:55:10,243 [30] DEBUG Servicesys_code - 获取字段
2014-02-24 16:55:10,243 [30] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-02-24 16:55:11,353 [31] DEBUG Servicemms_receive - 获取动态列表
2014-02-24 16:55:11,353 [31] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201402240001' order by A.MaterialCode
2014-02-24 16:55:21,414 [30] DEBUG Servicetrade_trailer - 获取新主键
2014-02-24 16:55:21,414 [30] DEBUG Trade - select isnull(max(JOBNO),0) from trade_trailer  where 1 = 1 
2014-02-24 16:55:27,542 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-02-24 16:55:27,556 [32] DEBUG Servicesys_code - 获取动态列表
2014-02-24 16:55:27,556 [32] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-02-24 16:55:28,054 [32] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 16:55:28,055 [32] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-02-24 16:55:28,056 [32] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-02-24 16:57:08,000 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2014-02-24 16:57:16,616 [22] DEBUG Trade - SELECT Name as TableName FROM sys.tables order by Name
2014-02-24 16:57:16,630 [31] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2014-02-24 16:57:32,267 [33] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:03:56,064 [33] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_scheduler')
ORDER BY sys.columns.column_id
2014-02-24 17:04:03,775 [22] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:04:05,198 [31] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_scheduler')
ORDER BY sys.columns.column_id
2014-02-24 17:04:16,648 [33] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_scheduler')
ORDER BY sys.columns.column_id
2014-02-24 17:05:06,418 [32] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:09:07,927 [34] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:09:14,199 [30] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_scheduler')
ORDER BY sys.columns.column_id
2014-02-24 17:09:34,233 [34] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2014-02-24 17:09:39,530 [22] DEBUG Trade - SELECT Name as TableName FROM sys.tables order by Name
2014-02-24 17:09:39,547 [32] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2014-02-24 17:09:40,899 [30] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:11:08,075 [19] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_scheduler')
ORDER BY sys.columns.column_id
2014-02-24 17:11:10,846 [22] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:11:30,066 [30] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:11:34,627 [22] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_scheduler')
ORDER BY sys.columns.column_id
2014-02-24 17:11:57,875 [33] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2014-02-24 17:12:03,846 [22] DEBUG Trade - SELECT Name as TableName FROM sys.tables order by Name
2014-02-24 17:12:03,875 [31] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2014-02-24 17:12:06,038 [32] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:14:04,502 [22] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:14:09,616 [33] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_scheduler')
ORDER BY sys.columns.column_id
2014-02-24 17:15:47,919 [34] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:15:47,935 [34] DEBUG Trade - sp_pkeys 'trade_trailer'
2014-02-24 17:17:38,329 [19] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('trade_trailer')
ORDER BY sys.columns.column_id
2014-02-24 17:17:38,343 [19] DEBUG Trade - sp_pkeys 'trade_trailer'
2014-02-24 17:18:09,933 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2014-02-24 17:18:10,215 [32] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 17:18:10,215 [32] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 17:19:01,534 [34] DEBUG Servicesys_menu - 编辑记录
2014-02-24 17:19:01,543 [34] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='949582e1-59fe-44a7-ae87-61fbed94ca99'
2014-02-24 17:19:01,554 [34] DEBUG Sys - insert into sys_menu([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('内部订单编辑','1303','13','icon-drive_edit','/trade/traileredit','1','1','','管理员','2014/2/24 17:19:01','管理员','2014/2/24 17:19:01')
2014-02-24 17:19:01,599 [34] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='9810'
2014-02-24 17:19:01,611 [34] DEBUG Sys - update sys_menu set [MenuName] = '代码生成', [MenuCode] = '9810', [ParentCode] = '98', [IconClass] = 'icon-page_code', [URL] = '/sys/generator', [IsVisible] = 'True', [IsEnable] = 'True', [MenuSeq] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/2/24 17:19:01' where [MenuCode] = '9810'
2014-02-24 17:19:01,781 [30] DEBUG Servicesys_menu - 获取动态列表
2014-02-24 17:19:01,783 [30] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-02-24 17:22:52,626 [29] DEBUG Servicemms_receive - 获取新主键
2014-02-24 17:22:52,629 [29] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2014-02-24 17:22:52,689 [34] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2014-02-24 17:22:52,691 [34] DEBUG Servicemms_receive - 获取实体对象
2014-02-24 17:22:52,691 [34] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201402240002'
2014-02-24 17:22:52,691 [34] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-02-24 17:22:52,691 [34] DEBUG Servicemms_receive - 获取字段
2014-02-24 17:22:52,691 [34] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-02-24 17:22:52,691 [34] DEBUG Servicemms_receive - 获取字段
2014-02-24 17:22:52,692 [34] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201402240002' and ProjectCode='201306030001' order by BillNo desc
2014-02-24 17:22:52,704 [34] DEBUG Servicemms_receive - 获取字段
2014-02-24 17:22:52,704 [34] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201402240002' and ProjectCode='201306030001' order by BillNo
2014-02-24 17:22:52,705 [34] DEBUG Servicemms_receive - 获取字段
2014-02-24 17:22:52,705 [34] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-02-24 17:22:52,705 [34] DEBUG Servicesys_code - 获取动态列表
2014-02-24 17:22:52,705 [34] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-02-24 17:22:52,706 [34] DEBUG Servicesys_code - 获取动态列表
2014-02-24 17:22:52,706 [34] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-02-24 17:22:52,706 [34] DEBUG Servicesys_code - 获取动态列表
2014-02-24 17:22:52,706 [34] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-02-24 17:22:52,706 [34] DEBUG Servicemms_warehouse - 获取动态列表
2014-02-24 17:22:52,706 [34] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-02-24 17:22:52,706 [34] DEBUG Servicesys_code - 获取字段
2014-02-24 17:22:52,707 [34] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-02-24 17:22:52,707 [34] DEBUG Servicesys_code - 获取字段
2014-02-24 17:22:52,707 [34] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-02-24 17:22:53,649 [31] DEBUG Servicemms_receive - 获取动态列表
2014-02-24 17:22:53,649 [31] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201402240002' order by A.MaterialCode
2014-02-24 17:27:56,119 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:27:56,135 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:27:56,135 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:27:56,135 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:27:56,166 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:27:56,166 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:27:56,369 [30] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2014-02-24 17:27:56,369 [30] DEBUG Servicemms_receive - 获取实体对象
2014-02-24 17:27:56,385 [30] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201306270001'
2014-02-24 17:27:56,385 [30] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-02-24 17:27:56,400 [30] DEBUG Servicemms_receive - 获取字段
2014-02-24 17:27:56,400 [30] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-02-24 17:27:56,400 [30] DEBUG Servicemms_receive - 获取字段
2014-02-24 17:27:56,400 [30] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201306270001' and ProjectCode='201306030001' order by BillNo desc
2014-02-24 17:27:56,400 [30] DEBUG Servicemms_receive - 获取字段
2014-02-24 17:27:56,400 [30] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201306270001' and ProjectCode='201306030001' order by BillNo
2014-02-24 17:27:56,416 [30] DEBUG Servicemms_receive - 获取字段
2014-02-24 17:27:56,416 [30] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-02-24 17:27:56,431 [30] DEBUG Servicesys_code - 获取动态列表
2014-02-24 17:27:56,431 [30] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-02-24 17:27:56,431 [30] DEBUG Servicesys_code - 获取动态列表
2014-02-24 17:27:56,431 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-02-24 17:27:56,431 [30] DEBUG Servicesys_code - 获取动态列表
2014-02-24 17:27:56,431 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-02-24 17:27:56,431 [30] DEBUG Servicemms_warehouse - 获取动态列表
2014-02-24 17:27:56,431 [30] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-02-24 17:27:56,431 [30] DEBUG Servicesys_code - 获取字段
2014-02-24 17:27:56,431 [30] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-02-24 17:27:56,431 [30] DEBUG Servicesys_code - 获取字段
2014-02-24 17:27:56,431 [30] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-02-24 17:27:57,055 [30] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 17:27:58,600 [27] DEBUG ServiceModelBase - 获取动态列表
2014-02-24 17:27:58,600 [27] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'DL0012%' order by MerchantsCode
2014-02-24 17:27:58,874 [30] DEBUG Servicemms_receive - 获取动态列表
2014-02-24 17:27:58,874 [30] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201306270001' order by A.MaterialCode
2014-02-24 17:46:30,547 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:46:30,560 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:46:30,562 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:46:30,563 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:46:30,565 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:46:30,565 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-02-24 17:46:30,769 [21] DEBUG Servicesys_parameter - 获取字段
2014-02-24 17:46:30,778 [21] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-02-24 17:46:30,929 [21] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-02-24 17:46:31,139 [21] DEBUG Servicesys_parameter - 获取字段
2014-02-24 17:46:31,139 [21] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-02-24 17:46:31,932 [25] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-02-24 17:46:33,435 [24] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-02-24 17:46:33,441 [24] DEBUG Servicesys_code - 获取动态列表
2014-02-24 17:46:33,441 [24] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-02-24 17:46:34,537 [24] DEBUG Servicetrade_trailer - 获取动态列表
2014-02-24 17:46:34,537 [24] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-02-24 17:46:34,546 [24] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-02-24 17:46:35,996 [24] DEBUG Servicetrade_trailer - 获取新主键
2014-02-24 17:46:36,001 [24] DEBUG Trade - select isnull(max(JOBNO),0) from trade_trailer  where 1 = 1 
