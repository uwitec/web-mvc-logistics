2013-12-01 09:36:10,282 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-12-01 09:36:10,297 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-12-01 09:36:10,350 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-12-01 09:36:10,350 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-12-01 09:36:10,738 [6] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:10,749 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:36:10,806 [6] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:10,806 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-12-01 09:36:17,737 [11] DEBUG Servicesys_user - 获取实体对象
2013-12-01 09:36:17,738 [11] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-12-01 09:36:17,791 [11] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-12-01 09:36:17,901 [11] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-12-01 9:36:17')
2013-12-01 09:36:17,931 [11] DEBUG Servicemms_project - 获取实体对象
2013-12-01 09:36:17,932 [11] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-12-01 09:36:18,007 [5] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:18,007 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:36:18,663 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:36:19,176 [5] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:19,176 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 09:36:20,454 [10] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 09:36:29,683 [10] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:36:35,505 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 09:36:35,506 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 09:36:35,506 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 09:36:35,507 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 09:36:35,507 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 09:36:35,508 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 09:36:35,508 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = 'black' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 09:36:36,495 [6] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:36,495 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:36:36,505 [6] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:36:36,718 [6] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:36,718 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 09:36:37,114 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 09:36:48,288 [10] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:48,288 [10] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:36:48,289 [10] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:48,289 [10] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-12-01 09:36:52,406 [13] DEBUG Servicesys_user - 获取实体对象
2013-12-01 09:36:52,407 [13] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-12-01 09:36:52,408 [13] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-12-01 09:36:52,501 [13] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-12-01 9:36:52')
2013-12-01 09:36:52,503 [13] DEBUG Servicemms_project - 获取实体对象
2013-12-01 09:36:52,503 [13] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-12-01 09:36:52,525 [9] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:52,526 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:36:52,549 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:36:52,551 [9] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:36:52,551 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 09:36:53,037 [10] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 09:37:03,674 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:37:07,758 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 09:37:07,758 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 09:37:07,759 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 09:37:07,760 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 09:37:07,760 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 09:37:07,761 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 09:37:07,761 [13] DEBUG Sys - update sys_userSetting set [SettingValue] = 'metro' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 09:37:08,624 [11] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:37:08,624 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:37:08,637 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:37:08,773 [11] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:37:08,774 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 09:37:09,005 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 09:37:27,783 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 09:37:27,795 [9] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:37:27,797 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:37:27,798 [9] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:37:27,799 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 09:37:30,119 [11] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 09:37:30,120 [11] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 09:37:30,209 [11] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 09:37:50,216 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-12-01 09:37:50,224 [22] DEBUG Servicemms_receive - 获取实体对象
2013-12-01 09:37:50,225 [22] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-12-01 09:37:50,233 [22] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-12-01 09:37:50,250 [22] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:37:50,250 [22] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-12-01 09:37:50,252 [22] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:37:50,253 [22] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:37:50,254 [22] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:37:50,255 [22] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-12-01 09:37:50,256 [22] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:37:50,257 [22] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:37:50,520 [22] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:37:50,520 [22] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-12-01 09:37:50,521 [22] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:37:50,521 [22] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 09:37:50,522 [22] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:37:50,522 [22] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-12-01 09:37:50,523 [22] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:37:50,523 [22] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:37:50,525 [22] DEBUG Servicesys_code - 获取字段
2013-12-01 09:37:50,525 [22] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-12-01 09:37:50,526 [22] DEBUG Servicesys_code - 获取字段
2013-12-01 09:37:50,526 [22] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-12-01 09:37:52,005 [23] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:37:52,006 [23] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-12-01 09:37:52,443 [18] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 09:37:52,443 [18] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-12-01 09:37:55,871 [22] DEBUG Mms - update mms_receive set [ApproveState] = 'reject', [ApproveRemark] = '', [ApprovePerson] = '管理员', [ApproveDate] = '2013-12-01 9:37:55' where [BillNo] = '201307020014'
2013-12-01 09:37:55,891 [22] DEBUG Mms - 
select A.*,B.WarehouseCode,B.ProjectCode 
from mms_receiveDetail A 
left join mms_receive B on B.BillNo = A.BillNo 
where A.BillNo='201307020014'
2013-12-01 09:37:56,191 [22] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010102'
2013-12-01 09:37:56,205 [22] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '-1.00', [UnitPrice] = '0.00', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '访客', [CreateDate] = '2013-07-02 15:22:52', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010102'
2013-12-01 09:37:56,367 [22] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010102'
2013-12-01 09:37:56,375 [22] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '22.00', [CreatePerson] = '颜荣华', [CreateDate] = '2013-06-05 17:58:00', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010102'
2013-12-01 09:37:56,644 [22] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010102'
2013-12-01 09:37:56,652 [22] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','17','0101010102','201306030002','-1.00','222.00','-222.0000','-1.00','0.00','','','管理员','2013-12-01 9:37:56','管理员','2013-12-01 9:37:56')
2013-12-01 09:37:56,655 [22] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010104'
2013-12-01 09:37:56,656 [22] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '-60.00', [UnitPrice] = '20.00', [Money] = '-1200.0000', [WarnStockDown] = '', [CreatePerson] = '刘会胜', [CreateDate] = '2013-07-13 22:22:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010104'
2013-12-01 09:37:56,663 [22] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010104'
2013-12-01 09:37:56,664 [22] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '-57.00', [CreatePerson] = '颜荣华', [CreateDate] = '2013-06-05 17:58:00', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010104'
2013-12-01 09:37:56,665 [22] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010104'
2013-12-01 09:37:56,666 [22] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','18','0101010104','201306030002','-1.00','333.00','-333.0000','-60.00','20.00','','','管理员','2013-12-01 9:37:56','管理员','2013-12-01 9:37:56')
2013-12-01 09:37:56,670 [22] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010107'
2013-12-01 09:37:56,671 [22] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '1.00', [UnitPrice] = '0.00', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '访客', [CreateDate] = '2013-07-02 8:02:05', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010107'
2013-12-01 09:37:56,672 [22] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010107'
2013-12-01 09:37:56,673 [22] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '4.00', [CreatePerson] = '访客', [CreateDate] = '2013-07-02 8:02:05', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010107'
2013-12-01 09:37:56,679 [22] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010107'
2013-12-01 09:37:56,681 [22] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','19','0101010107','201306030002','-1.00','88.00','-88.0000','1.00','0.00','','','管理员','2013-12-01 9:37:56','管理员','2013-12-01 9:37:56')
2013-12-01 09:37:56,684 [22] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='010101050201'
2013-12-01 09:37:56,688 [22] DEBUG Mms - update mms_warehouseStock set [Unit] = '个', [Num] = '0.00', [UnitPrice] = '0.0000', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 15:43:01', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '010101050201'
2013-12-01 09:37:56,695 [22] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='010101050201'
2013-12-01 09:37:56,698 [22] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '1.00', [CreatePerson] = '刘会胜', [CreateDate] = '2013-09-18 16:13:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '010101050201'
2013-12-01 09:37:56,704 [22] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='010101050201'
2013-12-01 09:37:56,707 [22] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','20','010101050201','201306030002','-1.00','0.00','0.0000','0.00','0.00','','','管理员','2013-12-01 9:37:56','管理员','2013-12-01 9:37:56')
2013-12-01 09:37:56,710 [22] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='010101050204'
2013-12-01 09:37:56,711 [22] DEBUG Mms - update mms_warehouseStock set [Unit] = '个', [Num] = '0.00', [UnitPrice] = '0.0000', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 15:43:01', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '010101050204'
2013-12-01 09:37:56,712 [22] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='010101050204'
2013-12-01 09:37:56,713 [22] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '1.00', [CreatePerson] = '刘会胜', [CreateDate] = '2013-09-18 16:13:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '010101050204'
2013-12-01 09:37:56,714 [22] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='010101050204'
2013-12-01 09:37:56,715 [22] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','21','010101050204','201306030002','-1.00','12.00','-12.0000','0.00','0.00','','','管理员','2013-12-01 9:37:56','管理员','2013-12-01 9:37:56')
2013-12-01 09:37:56,718 [22] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010301'
2013-12-01 09:37:56,720 [22] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '0.00', [UnitPrice] = '0.0000', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 15:43:01', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010301'
2013-12-01 09:37:56,726 [22] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010301'
2013-12-01 09:37:56,727 [22] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '0.00', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 15:43:01', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010301'
2013-12-01 09:37:56,733 [22] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010301'
2013-12-01 09:37:56,734 [22] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','22','0101010301','201306030002','-1.00','0.00','0.0000','0.00','0.00','','','管理员','2013-12-01 9:37:56','管理员','2013-12-01 9:37:56')
2013-12-01 09:37:56,739 [22] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010205'
2013-12-01 09:37:56,740 [22] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '2.00', [UnitPrice] = '4.00', [Money] = '8.0000', [WarnStockDown] = '', [CreatePerson] = '访客', [CreateDate] = '2013-07-12 11:09:48', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010205'
2013-12-01 09:37:56,747 [22] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010205'
2013-12-01 09:37:56,748 [22] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '13.00', [CreatePerson] = '访客', [CreateDate] = '2013-07-12 11:09:48', [UpdatePerson] = '管理员', [UpdateDate] = '2013-12-01 9:37:56', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010205'
2013-12-01 09:37:56,753 [22] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010205'
2013-12-01 09:37:56,754 [22] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','23','0101010205','201306030002','-1.00','0.00','0.0000','2.00','4.00','','','管理员','2013-12-01 9:37:56','管理员','2013-12-01 9:37:56')
2013-12-01 09:37:58,033 [10] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:37:58,039 [10] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-12-01 09:37:58,042 [10] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-12-01 09:38:02,472 [22] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:02,472 [22] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00305%' order by MerchantsCode
2013-12-01 09:38:04,271 [22] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:38:08,587 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 09:38:08,588 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 09:38:08,588 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 09:38:08,589 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 09:38:08,590 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 09:38:08,590 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 09:38:08,591 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = 'black' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 09:38:08,907 [22] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:38:08,907 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:38:08,929 [22] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:38:08,932 [22] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:38:08,932 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 09:38:09,142 [10] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 09:38:11,974 [19] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 09:38:11,976 [19] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:38:11,976 [19] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:38:11,977 [19] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:11,977 [19] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 09:38:12,686 [22] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 09:38:12,687 [22] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 09:38:12,689 [22] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 09:38:13,663 [21] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-12-01 09:38:13,666 [21] DEBUG Servicemms_receive - 获取实体对象
2013-12-01 09:38:13,666 [21] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-12-01 09:38:13,667 [21] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-12-01 09:38:13,667 [21] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:13,667 [21] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-12-01 09:38:13,667 [21] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:13,668 [21] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:38:13,668 [21] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:13,668 [21] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-12-01 09:38:13,669 [21] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:13,669 [21] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:38:13,669 [21] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:13,670 [21] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-12-01 09:38:13,671 [21] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:13,671 [21] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 09:38:13,672 [21] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:13,672 [21] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-12-01 09:38:13,673 [21] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:38:13,673 [21] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:38:13,674 [21] DEBUG Servicesys_code - 获取字段
2013-12-01 09:38:13,674 [21] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-12-01 09:38:13,674 [21] DEBUG Servicesys_code - 获取字段
2013-12-01 09:38:13,675 [21] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-12-01 09:38:15,329 [23] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:15,329 [23] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-12-01 09:38:16,282 [9] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 09:38:16,283 [9] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-12-01 09:38:18,778 [15] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:18,778 [15] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-12-01 09:38:18,781 [15] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-12-01 09:38:20,840 [19] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:20,841 [19] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'DL0012%' order by MerchantsCode
2013-12-01 09:38:22,571 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:38:26,247 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 09:38:26,247 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 09:38:26,248 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 09:38:26,249 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 09:38:26,249 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 09:38:26,250 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 09:38:26,250 [23] DEBUG Sys - update sys_userSetting set [SettingValue] = 'bootstrap' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 09:38:27,165 [17] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:38:27,165 [17] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:38:27,176 [17] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:38:27,404 [17] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:38:27,404 [17] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 09:38:27,579 [15] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 09:38:29,566 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 09:38:29,568 [22] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:38:29,568 [22] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:38:29,569 [22] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:29,569 [22] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 09:38:30,229 [15] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 09:38:30,229 [15] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 09:38:30,233 [15] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 09:38:31,205 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-12-01 09:38:31,207 [11] DEBUG Servicemms_receive - 获取实体对象
2013-12-01 09:38:31,208 [11] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-12-01 09:38:31,208 [11] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-12-01 09:38:31,209 [11] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:31,209 [11] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-12-01 09:38:31,209 [11] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:31,209 [11] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:38:31,212 [11] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:31,212 [11] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-12-01 09:38:31,214 [11] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:31,214 [11] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:38:31,215 [11] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:31,215 [11] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-12-01 09:38:31,216 [11] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:31,216 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 09:38:31,216 [11] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:31,217 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-12-01 09:38:31,217 [11] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:38:31,217 [11] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:38:31,218 [11] DEBUG Servicesys_code - 获取字段
2013-12-01 09:38:31,218 [11] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-12-01 09:38:31,219 [11] DEBUG Servicesys_code - 获取字段
2013-12-01 09:38:31,219 [11] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-12-01 09:38:32,469 [21] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:32,469 [21] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2013-12-01 09:38:32,972 [22] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 09:38:32,972 [22] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-12-01 09:38:35,926 [20] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:35,927 [20] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-12-01 09:38:35,929 [20] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-12-01 09:38:37,158 [10] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:37,159 [10] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-12-01 09:38:38,730 [10] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:38:47,346 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 09:38:47,347 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 09:38:47,348 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 09:38:47,348 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 09:38:47,349 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 09:38:47,349 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 09:38:47,350 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = 'gray' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 09:38:48,168 [18] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:38:48,168 [18] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:38:48,182 [18] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:38:48,184 [18] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:38:48,184 [18] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 09:38:48,333 [14] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 09:38:50,693 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 09:38:50,695 [20] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:38:50,696 [20] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:38:50,696 [20] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:50,697 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 09:38:51,397 [13] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 09:38:51,397 [13] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 09:38:51,400 [13] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 09:38:52,426 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-12-01 09:38:52,428 [20] DEBUG Servicemms_receive - 获取实体对象
2013-12-01 09:38:52,429 [20] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-12-01 09:38:52,430 [20] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-12-01 09:38:52,430 [20] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:52,430 [20] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-12-01 09:38:52,430 [20] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:52,431 [20] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:38:52,431 [20] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:52,432 [20] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-12-01 09:38:52,432 [20] DEBUG Servicemms_receive - 获取字段
2013-12-01 09:38:52,432 [20] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:38:52,433 [20] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:52,433 [20] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-12-01 09:38:52,434 [20] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:52,434 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 09:38:52,435 [20] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:38:52,435 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-12-01 09:38:52,436 [20] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:38:52,436 [20] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:38:52,436 [20] DEBUG Servicesys_code - 获取字段
2013-12-01 09:38:52,437 [20] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-12-01 09:38:52,437 [20] DEBUG Servicesys_code - 获取字段
2013-12-01 09:38:52,438 [20] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-12-01 09:38:54,014 [19] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:54,014 [19] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-12-01 09:38:54,727 [13] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 09:38:54,727 [13] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-12-01 09:38:56,348 [16] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:38:56,349 [16] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-12-01 09:38:56,351 [16] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-12-01 09:38:58,666 [17] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:39:01,495 [16] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 09:39:01,496 [16] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 09:39:01,496 [16] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 09:39:01,497 [16] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 09:39:01,498 [16] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 09:39:01,498 [16] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 09:39:01,499 [16] DEBUG Sys - update sys_userSetting set [SettingValue] = 'metro' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 09:39:02,392 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 09:39:02,392 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 09:39:02,393 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 09:39:02,394 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 09:39:02,394 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 09:39:02,395 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 09:39:02,395 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = 'metro' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 09:39:03,242 [18] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:39:03,242 [18] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 09:39:03,252 [18] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:39:03,254 [18] DEBUG Servicesys_parameter - 获取字段
2013-12-01 09:39:03,254 [18] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 09:39:03,444 [14] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 09:39:06,818 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-12-01 09:39:06,822 [20] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:39:06,823 [20] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:39:06,823 [20] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:39:06,824 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-12-01 09:39:06,824 [20] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:39:06,825 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-12-01 09:39:06,984 [20] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-12-01 09:39:06,985 [20] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-12-01 09:39:06,989 [20] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-12-01 09:39:06,990 [20] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-12-01 09:39:07,533 [13] DEBUG Servicemms_send - 获取动态列表
2013-12-01 09:39:07,534 [13] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 09:39:07,590 [13] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 09:39:18,517 [15] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 09:42:44,410 [19] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/edit')
2013-12-01 09:42:44,416 [19] DEBUG Servicemms_send - 获取实体对象
2013-12-01 09:42:44,417 [19] DEBUG Mms - select mms_send.* from mms_send where BillNo='201307230013'
2013-12-01 09:42:44,422 [19] DEBUG Servicemms_send - 获取上一条下一条数据
2013-12-01 09:42:44,423 [19] DEBUG Servicemms_send - 获取字段
2013-12-01 09:42:44,424 [19] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo
2013-12-01 09:42:44,425 [19] DEBUG Servicemms_send - 获取字段
2013-12-01 09:42:44,425 [19] DEBUG Mms - select top 1 BillNo from mms_send where BillNo<'201307230013' and ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:42:44,427 [19] DEBUG Servicemms_send - 获取字段
2013-12-01 09:42:44,428 [19] DEBUG Mms - select top 1 BillNo from mms_send where BillNo>'201307230013' and ProjectCode='201306030001' order by BillNo
2013-12-01 09:42:44,429 [19] DEBUG Servicemms_send - 获取字段
2013-12-01 09:42:44,429 [19] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo desc
2013-12-01 09:42:44,678 [19] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:42:44,679 [19] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-12-01 09:42:44,680 [19] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:42:44,680 [19] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-12-01 09:42:44,681 [19] DEBUG Servicesys_code - 获取动态列表
2013-12-01 09:42:44,681 [19] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-12-01 09:42:44,682 [19] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 09:42:44,682 [19] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 09:42:44,683 [19] DEBUG Servicesys_code - 获取字段
2013-12-01 09:42:44,683 [19] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2013-12-01 09:42:45,809 [20] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:42:45,809 [20] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00505%' order by MerchantsCode
2013-12-01 09:42:46,100 [12] DEBUG Servicemms_send - 获取动态列表
2013-12-01 09:42:46,100 [12] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_sendDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307230013' order by A.MaterialCode
2013-12-01 09:42:48,745 [19] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 09:42:48,745 [19] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('分包') order by MerchantsCode
2013-12-01 09:42:48,749 [19] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('分包') ) tb_temp
2013-12-01 10:27:38,679 [69] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:27:38,692 [69] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:27:45,176 [59] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 10:27:45,177 [59] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 10:27:45,178 [59] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 10:27:45,179 [59] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 10:27:45,179 [59] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 10:27:45,180 [59] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 10:27:45,181 [59] DEBUG Sys - update sys_userSetting set [SettingValue] = 'black' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 10:27:46,233 [137] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:27:46,233 [137] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 10:27:46,244 [137] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:27:46,246 [137] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:27:46,246 [137] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 10:27:46,548 [69] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 10:27:56,501 [59] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 10:27:56,503 [59] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 10:27:56,509 [59] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 10:27:56,510 [59] DEBUG Servicesys_code - 获取动态列表
2013-12-01 10:27:56,510 [59] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 10:27:57,184 [69] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 10:27:57,185 [69] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 10:27:57,187 [69] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 10:28:10,869 [59] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:28:14,248 [59] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-12-01 10:28:14,250 [59] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 10:28:14,250 [59] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 10:28:14,251 [59] DEBUG Servicesys_code - 获取动态列表
2013-12-01 10:28:14,251 [59] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-12-01 10:28:14,252 [59] DEBUG Servicesys_code - 获取动态列表
2013-12-01 10:28:14,252 [59] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-12-01 10:28:14,265 [59] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-12-01 10:28:14,266 [59] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-12-01 10:28:14,266 [59] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-12-01 10:28:14,267 [59] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-12-01 10:28:14,762 [68] DEBUG Servicemms_send - 获取动态列表
2013-12-01 10:28:14,762 [68] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 10:28:14,764 [68] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 10:28:15,955 [68] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/edit')
2013-12-01 10:28:15,958 [68] DEBUG Servicemms_send - 获取实体对象
2013-12-01 10:28:15,958 [68] DEBUG Mms - select mms_send.* from mms_send where BillNo='201307040001'
2013-12-01 10:28:15,959 [68] DEBUG Servicemms_send - 获取上一条下一条数据
2013-12-01 10:28:15,959 [68] DEBUG Servicemms_send - 获取字段
2013-12-01 10:28:15,959 [68] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo
2013-12-01 10:28:15,960 [68] DEBUG Servicemms_send - 获取字段
2013-12-01 10:28:15,960 [68] DEBUG Mms - select top 1 BillNo from mms_send where BillNo<'201307040001' and ProjectCode='201306030001' order by BillNo desc
2013-12-01 10:28:15,960 [68] DEBUG Servicemms_send - 获取字段
2013-12-01 10:28:15,960 [68] DEBUG Mms - select top 1 BillNo from mms_send where BillNo>'201307040001' and ProjectCode='201306030001' order by BillNo
2013-12-01 10:28:15,960 [68] DEBUG Servicemms_send - 获取字段
2013-12-01 10:28:15,961 [68] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo desc
2013-12-01 10:28:15,961 [68] DEBUG Servicesys_code - 获取动态列表
2013-12-01 10:28:15,961 [68] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-12-01 10:28:15,962 [68] DEBUG Servicesys_code - 获取动态列表
2013-12-01 10:28:15,962 [68] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-12-01 10:28:15,962 [68] DEBUG Servicesys_code - 获取动态列表
2013-12-01 10:28:15,963 [68] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-12-01 10:28:15,963 [68] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 10:28:15,963 [68] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 10:28:15,964 [68] DEBUG Servicesys_code - 获取字段
2013-12-01 10:28:15,964 [68] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2013-12-01 10:28:16,940 [72] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 10:28:16,941 [72] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00504%' order by MerchantsCode
2013-12-01 10:28:17,041 [59] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 10:28:17,041 [59] DEBUG Mms - select BuildPartCode as value,BuildPartName as text,ParentCode as pid from mms_buildPart where ProjectCode='' order by BuildPartCode
2013-12-01 10:28:17,387 [137] DEBUG Servicemms_send - 获取动态列表
2013-12-01 10:28:17,388 [137] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_sendDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307040001' order by A.MaterialCode
2013-12-01 10:28:26,634 [69] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:28:31,624 [69] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 10:28:31,631 [69] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 10:28:31,631 [69] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 10:28:31,632 [69] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 10:28:31,632 [69] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 10:28:31,633 [69] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 10:28:31,633 [69] DEBUG Sys - update sys_userSetting set [SettingValue] = 'metro' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 10:28:32,469 [68] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:28:32,469 [68] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 10:28:32,481 [68] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:28:32,483 [68] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:28:32,483 [68] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 10:28:32,647 [69] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 10:28:36,950 [138] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:28:41,019 [67] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 10:28:41,020 [67] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 10:28:41,020 [67] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 10:28:41,021 [67] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 10:28:41,022 [67] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 10:28:41,022 [67] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 10:28:41,023 [67] DEBUG Sys - update sys_userSetting set [SettingValue] = 'default' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 10:28:41,860 [71] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:28:41,860 [71] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 10:28:41,871 [71] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:28:42,120 [71] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:28:42,121 [71] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 10:28:42,281 [71] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 10:30:01,970 [128] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:30:01,971 [128] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 10:30:01,984 [128] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:30:01,990 [128] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:30:01,990 [128] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 10:30:02,304 [68] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 10:35:07,104 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:35:10,970 [123] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 10:35:10,971 [123] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 10:35:10,972 [123] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 10:35:10,972 [123] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 10:35:10,973 [123] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 10:35:10,974 [123] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 10:35:10,975 [123] DEBUG Sys - update sys_userSetting set [SettingValue] = 'bootstrap' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 10:35:11,867 [130] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:35:11,867 [130] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 10:35:11,885 [130] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 10:35:11,887 [130] DEBUG Servicesys_parameter - 获取字段
2013-12-01 10:35:11,887 [130] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 10:35:12,176 [120] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 11:40:44,148 [104] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2013-12-01 11:40:44,155 [104] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 11:40:44,162 [104] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 11:40:44,164 [104] DEBUG Servicemms_buildPart - 获取动态列表
2013-12-01 11:40:44,165 [104] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-12-01 11:40:45,067 [104] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:40:45,464 [108] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-12-01 11:40:45,565 [108] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='北京士兴钢结构有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='北京士兴钢结构有限公司' then Money else 0 end),0) as PickUnitMoney0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum1 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney1                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-12-01 11:40:45,825 [108] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2013-12-01 11:40:56,420 [108] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 11:40:56,422 [108] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 11:40:56,423 [108] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 11:40:56,423 [108] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:40:56,424 [108] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 11:40:57,135 [106] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 11:40:57,135 [106] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 11:40:57,138 [106] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 11:40:58,001 [106] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-12-01 11:40:58,003 [106] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 11:40:58,003 [106] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 11:40:58,004 [106] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:40:58,004 [106] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-12-01 11:40:58,005 [106] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:40:58,005 [106] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-12-01 11:40:58,055 [106] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-12-01 11:40:58,056 [106] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-12-01 11:40:58,057 [106] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-12-01 11:40:58,058 [106] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-12-01 11:40:58,708 [108] DEBUG Servicemms_send - 获取动态列表
2013-12-01 11:40:58,709 [108] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 11:40:58,711 [108] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 11:41:05,519 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:41:11,509 [110] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 11:41:11,510 [110] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 11:41:11,511 [110] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 11:41:11,511 [110] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 11:41:11,512 [110] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 11:41:11,513 [110] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 11:41:11,513 [110] DEBUG Sys - update sys_userSetting set [SettingValue] = 'default' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 11:41:13,316 [11] DEBUG Servicesys_parameter - 获取字段
2013-12-01 11:41:13,317 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 11:41:13,329 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:41:13,331 [11] DEBUG Servicesys_parameter - 获取字段
2013-12-01 11:41:13,332 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 11:41:13,614 [104] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 11:41:16,701 [109] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:41:19,648 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 11:41:19,649 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 11:41:19,650 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 11:41:19,650 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 11:41:19,651 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 11:41:19,651 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 11:41:19,652 [11] DEBUG Sys - update sys_userSetting set [SettingValue] = 'black' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 11:41:20,651 [110] DEBUG Servicesys_parameter - 获取字段
2013-12-01 11:41:20,652 [110] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 11:41:20,672 [110] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:41:20,674 [110] DEBUG Servicesys_parameter - 获取字段
2013-12-01 11:41:20,674 [110] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 11:41:20,910 [108] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 11:41:26,102 [106] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/warehouseaccount')
2013-12-01 11:41:26,861 [11] DEBUG Mms - 
Select mms_warehouseStockHistory.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStockHistory.WarehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where  mms_warehouse.ProjectCode='201306030001' 
order by mms_warehouseStockHistory.CreateDate desc
                
2013-12-01 11:41:33,495 [110] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 11:41:33,497 [110] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 11:41:33,498 [110] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 11:41:33,498 [110] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:41:33,498 [110] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 11:41:34,429 [106] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 11:41:34,429 [106] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 11:41:34,433 [106] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 11:41:35,289 [109] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-12-01 11:41:35,291 [109] DEBUG Servicemms_receive - 获取实体对象
2013-12-01 11:41:35,291 [109] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-12-01 11:41:35,292 [109] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-12-01 11:41:35,292 [109] DEBUG Servicemms_receive - 获取字段
2013-12-01 11:41:35,292 [109] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-12-01 11:41:35,293 [109] DEBUG Servicemms_receive - 获取字段
2013-12-01 11:41:35,293 [109] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-12-01 11:41:35,293 [109] DEBUG Servicemms_receive - 获取字段
2013-12-01 11:41:35,294 [109] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-12-01 11:41:35,294 [109] DEBUG Servicemms_receive - 获取字段
2013-12-01 11:41:35,294 [109] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-12-01 11:41:35,295 [109] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:41:35,295 [109] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-12-01 11:41:35,296 [109] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:41:35,296 [109] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 11:41:35,296 [109] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:41:35,297 [109] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-12-01 11:41:35,297 [109] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 11:41:35,298 [109] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 11:41:35,298 [109] DEBUG Servicesys_code - 获取字段
2013-12-01 11:41:35,298 [109] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-12-01 11:41:35,299 [109] DEBUG Servicesys_code - 获取字段
2013-12-01 11:41:35,299 [109] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-12-01 11:41:36,271 [117] DEBUG ServiceModelBase - 获取动态列表
2013-12-01 11:41:36,272 [117] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-12-01 11:41:36,758 [110] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 11:41:36,759 [110] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-12-01 11:41:47,038 [109] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:41:52,026 [104] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 11:41:52,027 [104] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 11:41:52,027 [104] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 11:41:52,028 [104] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 11:41:52,029 [104] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 11:41:52,029 [104] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 11:41:52,030 [104] DEBUG Sys - update sys_userSetting set [SettingValue] = 'gray' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 11:41:57,553 [117] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:42:00,667 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-12-01 11:42:00,668 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-12-01 11:42:00,669 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-12-01 11:42:00,669 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-12-01 11:42:00,670 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-12-01 11:42:00,670 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-12-01 11:42:00,671 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = 'metro' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-12-01 11:42:01,714 [117] DEBUG Servicesys_parameter - 获取字段
2013-12-01 11:42:01,715 [117] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 11:42:01,736 [117] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:42:01,738 [117] DEBUG Servicesys_parameter - 获取字段
2013-12-01 11:42:01,738 [117] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 11:42:02,035 [117] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 11:42:08,023 [108] DEBUG Servicesys_parameter - 获取字段
2013-12-01 11:42:08,023 [108] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 11:42:08,038 [108] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 11:42:08,040 [108] DEBUG Servicesys_parameter - 获取字段
2013-12-01 11:42:08,040 [108] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 11:42:08,444 [103] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-12-01 11:42:16,815 [112] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 11:42:16,817 [112] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 11:42:16,817 [112] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 11:42:16,818 [112] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:42:16,818 [112] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 11:42:20,424 [117] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 11:42:20,424 [117] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 11:42:20,426 [117] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 11:42:27,780 [105] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 11:42:27,782 [105] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 11:42:27,782 [105] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 11:42:27,783 [105] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:42:27,783 [105] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 11:42:29,802 [110] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 11:42:29,802 [110] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 11:42:29,805 [110] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 11:42:48,274 [105] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-12-01 11:42:48,277 [105] DEBUG Servicemms_warehouse - 获取动态列表
2013-12-01 11:42:48,277 [105] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-12-01 11:42:48,278 [105] DEBUG Servicesys_code - 获取动态列表
2013-12-01 11:42:48,278 [105] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-12-01 11:42:49,147 [117] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 11:42:49,148 [117] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 11:42:49,151 [117] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 11:42:54,945 [105] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 11:42:54,946 [105] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName, row_number() over (order by A.BillNo) as FLUENTDATA_ROWNUMBER
									 from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001'
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 21 and 40
2013-12-01 11:42:54,958 [105] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 11:42:57,186 [110] DEBUG Servicemms_receive - 获取动态列表
2013-12-01 11:42:57,187 [110] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-12-01 11:42:57,190 [110] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-12-01 22:46:27,955 [241] DEBUG Servicesys_parameter - 获取字段
2013-12-01 22:46:28,461 [241] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 22:46:28,462 [241] DEBUG Servicesys_parameter - 获取字段
2013-12-01 22:46:28,462 [241] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-12-01 22:46:35,155 [249] DEBUG Servicesys_parameter - 获取字段
2013-12-01 22:46:35,155 [249] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 22:46:35,156 [249] DEBUG Servicesys_parameter - 获取字段
2013-12-01 22:46:35,156 [249] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-12-01 22:46:44,668 [250] DEBUG Servicesys_user - 获取实体对象
2013-12-01 22:46:44,669 [250] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-12-01 22:46:44,670 [250] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-12-01 22:46:44,675 [250] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-12-01 22:46:44')
2013-12-01 22:46:44,676 [250] DEBUG Servicemms_project - 获取实体对象
2013-12-01 22:46:44,682 [250] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-12-01 22:46:44,706 [252] DEBUG Servicesys_parameter - 获取字段
2013-12-01 22:46:44,706 [252] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-12-01 22:46:44,737 [252] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-12-01 22:46:44,739 [252] DEBUG Servicesys_parameter - 获取字段
2013-12-01 22:46:44,740 [252] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-12-01 22:46:45,006 [254] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
