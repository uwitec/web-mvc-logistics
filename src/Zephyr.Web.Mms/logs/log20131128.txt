2013-11-28 00:13:27,500 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:13:27,532 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:13:27,540 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:13:27,540 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:13:27,880 [65] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:13:27,903 [65] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:13:28,274 [65] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:13:28,373 [65] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:13:28,374 [65] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:13:29,927 [65] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:14:56,321 [19] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:14:56,350 [19] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:14:56,357 [19] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:14:56,357 [19] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:14:56,720 [49] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 00:14:56,741 [49] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:14:56,760 [49] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:14:56,762 [49] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:14:56,762 [49] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:14:57,798 [49] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:15:01,148 [49] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 00:15:01,149 [49] DEBUG Mms - select top 50 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 00:15:01,220 [49] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 00:15:01,602 [45] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:15:01,605 [45] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:15:01,693 [45] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:15:01,693 [45] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-28 00:15:07,277 [59] DEBUG Servicesys_user - 获取实体对象
2013-11-28 00:15:07,280 [59] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-28 00:15:07,324 [59] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-28 00:15:07,387 [59] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-28 0:15:07')
2013-11-28 00:15:07,391 [59] DEBUG Servicemms_project - 获取实体对象
2013-11-28 00:15:07,392 [59] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-28 00:15:07,507 [45] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:15:07,507 [45] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:15:07,690 [45] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:15:07,788 [45] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:15:07,789 [45] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:15:09,741 [45] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:15:21,234 [57] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 00:15:21,237 [57] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:15:21,237 [57] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:15:21,238 [57] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:15:21,238 [57] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:15:22,283 [48] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 00:15:22,283 [48] DEBUG Mms - select top 50 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 00:15:22,287 [48] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 00:15:23,257 [57] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 00:15:23,264 [57] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 00:15:23,265 [57] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-28 00:15:23,271 [57] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 00:15:23,288 [57] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:15:23,288 [57] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 00:15:23,290 [57] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:15:23,290 [57] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:15:23,291 [57] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:15:23,292 [57] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-28 00:15:23,293 [57] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:15:23,293 [57] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:15:23,561 [57] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:15:23,562 [57] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 00:15:23,562 [57] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:15:23,563 [57] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:15:23,563 [57] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:15:23,563 [57] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 00:15:23,564 [57] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:15:23,564 [57] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:15:23,566 [57] DEBUG Servicesys_code - 获取字段
2013-11-28 00:15:23,566 [57] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:15:23,567 [57] DEBUG Servicesys_code - 获取字段
2013-11-28 00:15:23,567 [57] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:15:24,864 [48] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 00:15:24,865 [48] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 00:15:25,243 [54] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 00:15:25,243 [54] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-28 00:17:44,114 [52] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:17:44,115 [52] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:17:44,126 [52] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:17:44,128 [52] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:17:44,128 [52] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:17:44,848 [60] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:17:48,587 [58] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:17:48,587 [58] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:17:48,600 [58] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:17:48,602 [58] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:17:48,602 [58] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:17:49,067 [49] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:17:57,554 [58] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 00:17:57,556 [58] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:17:57,556 [58] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:17:57,556 [58] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:17:57,557 [58] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:17:59,613 [51] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 00:17:59,614 [51] DEBUG Mms - select top 50 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 00:17:59,616 [51] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 00:18:04,070 [55] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:18:04,070 [55] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:18:04,084 [55] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:18:04,086 [55] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:18:04,086 [55] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:18:04,468 [51] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:18:05,013 [54] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 00:18:05,015 [54] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 00:18:05,015 [54] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-28 00:18:05,015 [54] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 00:18:05,016 [54] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:05,016 [54] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 00:18:05,016 [54] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:05,016 [54] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:18:05,017 [54] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:05,017 [54] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-28 00:18:05,017 [54] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:05,017 [54] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:18:05,018 [54] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:05,018 [54] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 00:18:05,018 [54] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:05,019 [54] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:18:05,019 [54] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:05,019 [54] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 00:18:05,020 [54] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:18:05,020 [54] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:18:05,020 [54] DEBUG Servicesys_code - 获取字段
2013-11-28 00:18:05,020 [54] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:18:05,021 [54] DEBUG Servicesys_code - 获取字段
2013-11-28 00:18:05,021 [54] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:18:05,055 [58] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 00:18:05,056 [58] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 00:18:05,057 [58] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-28 00:18:05,057 [58] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 00:18:05,057 [58] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:05,057 [58] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 00:18:05,058 [58] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:05,058 [58] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:18:05,058 [58] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:05,058 [58] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-28 00:18:05,059 [58] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:05,059 [58] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:18:05,059 [58] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:05,059 [58] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 00:18:05,060 [58] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:05,060 [58] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:18:05,060 [58] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:05,061 [58] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 00:18:05,061 [58] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:18:05,061 [58] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:18:05,061 [58] DEBUG Servicesys_code - 获取字段
2013-11-28 00:18:05,062 [58] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:18:05,062 [58] DEBUG Servicesys_code - 获取字段
2013-11-28 00:18:05,062 [58] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:18:07,036 [50] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 00:18:07,037 [50] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 00:18:07,753 [45] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 00:18:07,753 [45] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 00:18:08,144 [52] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 00:18:08,145 [52] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-28 00:18:12,029 [56] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2013-11-28 00:18:12,033 [56] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:18:12,034 [56] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:18:12,035 [56] DEBUG Servicemms_buildPart - 获取动态列表
2013-11-28 00:18:12,036 [56] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-11-28 00:18:13,314 [63] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-11-28 00:18:14,778 [63] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney0                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-11-28 00:18:16,079 [63] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2013-11-28 00:18:26,057 [51] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2013-11-28 00:18:26,060 [51] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:18:26,060 [51] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:18:26,060 [51] DEBUG Servicemms_buildPart - 获取动态列表
2013-11-28 00:18:26,061 [51] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-11-28 00:18:26,261 [60] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-11-28 00:18:26,312 [60] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney0                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-11-28 00:18:26,316 [60] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2013-11-28 00:18:33,629 [54] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/receivesummary')
2013-11-28 00:18:34,433 [63] DEBUG Mms - 
Select T.*
From
( 
    --收料单
    Select mms_receive.BillNo As SrcBillNo,'receive' As SrcBillType,mms_receive.ContractCode As ContractCode,
	    mms_receive.SupplierCode,mms_receive.OriginalNum,mms_receive.ReceiveDate As TakeDate,
	    mms_receiveDetail.MaterialCode,mms_receiveDetail.Unit,mms_receiveDetail.UnitPrice,
	    mms_receiveDetail.Num,mms_receiveDetail.Money,mms_receiveDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_receive.BillNo+'receive'+mms_receiveDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_receiveDetail
    Left join mms_receive ON mms_receiveDetail.BillNo=mms_receive.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_receive.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_receiveDetail.MaterialCode
    Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

    UNION

    --直入直出
    Select mms_direct.BillNo As SrcBillNo,'direct' As SrcBillType,mms_direct.ContractCode As ContractCode,
	    mms_direct.SupplierCode,mms_direct.OriginalNum,mms_direct.ArriveDate As TakeDate,
	    mms_directDetail.MaterialCode,mms_directDetail.Unit,mms_directDetail.UnitPrice,
	    mms_directDetail.Num,mms_directDetail.Money,mms_directDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_direct.BillNo+'direct'+mms_directDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_directDetail
    Left join mms_direct ON mms_directDetail.BillNo=mms_direct.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_direct.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_directDetail.MaterialCode
    Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

    UNION

    --退货
    Select mms_return.BillNo As SrcBillNo,'return' As SrcBillType,mms_return.ContractCode As ContractCode,
	    mms_return.SupplierCode,'' AS OriginalNum,mms_return.ReturnDate As TakeDate,
	    mms_returnDetail.MaterialCode,mms_returnDetail.Unit,mms_returnDetail.UnitPrice,
	    -mms_returnDetail.Num,-mms_returnDetail.Money,mms_returnDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_return.BillNo+'return'+mms_returnDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_returnDetail
    Left join mms_return ON mms_returnDetail.BillNo=mms_return.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_return.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_returnDetail.MaterialCode
    Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

    UNION

    --租赁进场
    Select mms_rentIn.BillNo As SrcBillNo,'rentin' As SrcBillType,mms_rentIn.ContractCode As ContractCode,
	    mms_rentIn.SupplierCode,'' as OriginalNum,mms_rentIn.RentInDate As TakeDate,
	    mms_rentInDetail.MaterialCode,mms_rentInDetail.Unit,mms_rentInDetail.UnitPrice,
	    mms_rentInDetail.Num,'0' as Money,mms_rentInDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_rentIn.BillNo+'rentIn'+mms_rentInDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_rentInDetail
    Left join mms_rentIn ON mms_rentInDetail.BillNo=mms_rentIn.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_rentIn.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_rentInDetail.MaterialCode
    Where mms_rentIn.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'
) as T
Where 1=1 
                
2013-11-28 00:18:34,763 [55] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/receivesummary')
2013-11-28 00:18:45,135 [57] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:18:45,136 [57] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:18:45,154 [57] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:18:45,156 [57] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:18:45,156 [57] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:18:45,598 [56] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:18:46,031 [52] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 00:18:46,033 [52] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 00:18:46,034 [52] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-28 00:18:46,034 [52] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 00:18:46,034 [52] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:46,035 [52] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 00:18:46,035 [52] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:46,035 [52] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:18:46,036 [52] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:46,036 [52] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-28 00:18:46,036 [52] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:46,037 [52] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:18:46,037 [52] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:46,037 [52] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 00:18:46,038 [52] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:46,038 [52] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:18:46,039 [52] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:46,039 [52] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 00:18:46,040 [52] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:18:46,040 [52] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:18:46,041 [52] DEBUG Servicesys_code - 获取字段
2013-11-28 00:18:46,041 [52] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:18:46,042 [52] DEBUG Servicesys_code - 获取字段
2013-11-28 00:18:46,042 [52] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:18:46,072 [57] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 00:18:46,076 [57] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 00:18:46,076 [57] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-28 00:18:46,077 [57] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 00:18:46,077 [57] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:46,077 [57] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 00:18:46,077 [57] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:46,078 [57] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:18:46,078 [57] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:46,078 [57] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-28 00:18:46,079 [57] DEBUG Servicemms_receive - 获取字段
2013-11-28 00:18:46,079 [57] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 00:18:46,080 [57] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:46,080 [57] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 00:18:46,081 [57] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:46,081 [57] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:18:46,081 [57] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:18:46,082 [57] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 00:18:46,082 [57] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:18:46,082 [57] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:18:46,083 [57] DEBUG Servicesys_code - 获取字段
2013-11-28 00:18:46,083 [57] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:18:46,084 [57] DEBUG Servicesys_code - 获取字段
2013-11-28 00:18:46,084 [57] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 00:18:47,080 [51] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 00:18:47,080 [51] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 00:18:47,601 [58] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 00:18:47,601 [58] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 00:18:47,850 [55] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 00:18:47,851 [55] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-28 00:20:50,416 [60] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:20:50,417 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:20:50,433 [60] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:20:50,435 [60] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:20:50,435 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:20:51,155 [57] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:20:52,110 [57] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 00:20:52,112 [57] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:20:52,112 [57] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:20:52,113 [57] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:20:52,113 [57] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:21:01,422 [57] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:21:01,422 [57] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:21:01,444 [57] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:21:01,445 [57] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:21:01,446 [57] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:21:01,849 [59] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:21:02,803 [53] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 00:21:02,804 [53] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 00:21:02,805 [53] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 00:21:02,805 [53] DEBUG Servicesys_code - 获取动态列表
2013-11-28 00:21:02,805 [53] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 00:21:06,635 [54] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:21:06,636 [54] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:21:06,651 [54] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:21:06,653 [54] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:21:06,653 [54] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:22:40,388 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:22:40,419 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:22:40,426 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:22:40,427 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 00:22:40,785 [61] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:22:40,809 [61] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:22:41,177 [61] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:22:41,276 [61] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:22:41,276 [61] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:22:42,778 [60] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:22:56,800 [45] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-11-28 00:22:57,833 [54] DEBUG Servicesys_menu - 获取动态列表
2013-11-28 00:22:57,835 [54] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-11-28 00:23:01,227 [63] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-28 00:23:02,471 [39] DEBUG Servicesys_organize - 获取实体列表
2013-11-28 00:23:02,478 [39] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-28 00:23:02,616 [54] DEBUG Servicesys_user - 获取实体列表
2013-11-28 00:23:02,617 [54] DEBUG Sys - select top 50 sys_user.* from sys_user order by UserSeq
2013-11-28 00:23:02,693 [54] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-28 00:23:17,534 [61] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-28 00:23:17,534 [61] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-28 00:23:23,478 [45] DEBUG Servicesys_userSetting - 编辑记录
2013-11-28 00:23:23,492 [45] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='35'
2013-11-28 00:23:23,513 [45] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabTitle', [SettingName] = '主页签的名称', [SettingValue] = '我的桌面1', [Description] = '' where [ID] = '35'
2013-11-28 00:23:28,548 [55] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-28 00:23:28,553 [55] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-28 00:23:30,447 [53] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:23:30,448 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:23:30,460 [53] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:23:30,462 [53] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:23:30,463 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:23:30,822 [58] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:23:31,836 [55] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-28 00:23:33,044 [39] DEBUG Servicesys_organize - 获取实体列表
2013-11-28 00:23:33,045 [39] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-28 00:23:33,110 [53] DEBUG Servicesys_user - 获取实体列表
2013-11-28 00:23:33,110 [53] DEBUG Sys - select top 50 sys_user.* from sys_user order by UserSeq
2013-11-28 00:23:33,112 [53] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-28 00:23:38,498 [58] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-28 00:23:38,498 [58] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-28 00:23:48,901 [61] DEBUG Servicesys_userSetting - 编辑记录
2013-11-28 00:23:48,902 [61] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='24'
2013-11-28 00:23:48,910 [61] DEBUG Sys - delete from sys_userSetting where [ID] = '24'
2013-11-28 00:23:48,911 [61] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='35'
2013-11-28 00:23:48,912 [61] DEBUG Sys - delete from sys_userSetting where [ID] = '35'
2013-11-28 00:23:48,912 [61] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-28 00:23:48,913 [61] DEBUG Sys - delete from sys_userSetting where [ID] = '21'
2013-11-28 00:23:48,913 [61] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='37'
2013-11-28 00:23:48,914 [61] DEBUG Sys - delete from sys_userSetting where [ID] = '37'
2013-11-28 00:23:48,915 [61] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='36'
2013-11-28 00:23:48,915 [61] DEBUG Sys - delete from sys_userSetting where [ID] = '36'
2013-11-28 00:23:48,916 [61] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='38'
2013-11-28 00:23:48,917 [61] DEBUG Sys - delete from sys_userSetting where [ID] = '38'
2013-11-28 00:23:48,917 [61] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='22'
2013-11-28 00:23:48,918 [61] DEBUG Sys - delete from sys_userSetting where [ID] = '22'
2013-11-28 00:23:50,996 [53] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-28 00:23:50,996 [53] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-28 00:23:57,381 [53] DEBUG Servicesys_userSetting - 编辑记录
2013-11-28 00:23:57,382 [53] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID=''
2013-11-28 00:23:57,391 [53] DEBUG Sys - insert into sys_userSetting([UserCode],[SettingCode],[SettingName],[SettingValue],[Description]) values('admin','gridrows','','20','每页显示的数据条数1')
2013-11-28 00:23:59,296 [63] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-28 00:23:59,296 [63] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-28 00:24:04,892 [53] DEBUG Servicesys_userSetting - 编辑记录
2013-11-28 00:24:04,893 [53] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='39'
2013-11-28 00:24:04,894 [53] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'gridrows', [SettingName] = '', [SettingValue] = '20', [Description] = '每页显示的数据条数' where [ID] = '39'
2013-11-28 00:24:06,896 [39] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-28 00:24:06,897 [39] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-28 00:24:49,024 [54] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:24:49,025 [54] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:24:49,037 [54] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:24:49,039 [54] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:24:49,039 [54] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:24:49,393 [54] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:25:18,790 [47] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:25:18,791 [47] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:25:18,804 [47] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:25:18,805 [47] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:25:18,806 [47] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:25:19,473 [52] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:27:07,562 [42] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:27:07,563 [42] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:27:07,576 [42] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:27:07,578 [42] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:27:07,578 [42] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:27:08,038 [52] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:27:09,900 [42] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:27:09,900 [42] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:27:09,913 [42] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:27:09,915 [42] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:27:09,915 [42] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:27:10,239 [47] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:27:18,811 [61] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:27:18,812 [61] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:27:18,824 [61] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:27:18,826 [61] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:27:18,826 [61] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:27:19,183 [60] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:28:04,435 [42] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:28:04,435 [42] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:28:04,449 [42] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:28:04,451 [42] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:28:04,451 [42] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:28:04,817 [42] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:28:25,059 [42] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:28:25,060 [42] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:28:25,074 [42] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:28:25,075 [42] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:28:25,075 [42] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:28:25,429 [42] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:32:49,657 [59] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:32:49,663 [59] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:32:49,678 [59] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:32:49,680 [59] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:32:49,681 [59] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:32:50,093 [50] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:33:08,726 [53] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:33:08,726 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:33:08,737 [53] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:33:08,738 [53] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:33:08,739 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:33:09,099 [55] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:33:14,986 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:33:14,987 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:33:14,999 [49] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:33:15,001 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:33:15,002 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:33:15,331 [34] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:33:16,795 [51] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:33:16,796 [51] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:33:16,811 [51] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:33:16,813 [51] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:33:16,814 [51] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:33:16,925 [59] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 00:33:18,795 [53] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:33:18,795 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 00:33:18,813 [53] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 00:33:18,814 [53] DEBUG Servicesys_parameter - 获取字段
2013-11-28 00:33:18,815 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 00:33:18,946 [47] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 01:44:36,509 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:44:36,530 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:44:36,537 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:44:36,537 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:45:02,751 [282] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:45:02,776 [282] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 01:45:03,174 [282] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 01:45:03,276 [282] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:45:03,277 [282] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 01:45:04,792 [275] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 01:46:54,654 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:46:54,686 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:46:54,694 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:46:54,694 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:47:03,716 [279] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:47:03,741 [279] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 01:47:04,115 [279] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 01:47:39,799 [279] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:47:39,800 [279] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 01:47:41,372 [272] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 01:48:34,691 [282] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:48:34,691 [282] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 01:48:34,717 [282] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 01:48:34,719 [282] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:48:34,720 [282] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 01:48:35,105 [280] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 01:48:56,482 [270] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:48:56,482 [270] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 01:48:56,492 [270] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 01:48:56,494 [270] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:48:56,494 [270] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 01:48:57,242 [278] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 01:49:29,319 [274] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:49:29,349 [274] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:49:29,355 [274] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:49:29,356 [274] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 01:49:53,612 [278] DEBUG Servicesys_parameter - 获取字段
2013-11-28 01:49:53,637 [278] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 01:49:54,014 [278] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 02:01:00,713 [278] DEBUG Servicesys_parameter - 获取字段
2013-11-28 02:01:00,713 [278] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 02:01:02,190 [270] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 09:21:20,969 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 09:21:21,003 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 09:21:21,011 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 09:21:21,012 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 09:21:24,022 [265] DEBUG Servicesys_parameter - 获取字段
2013-11-28 09:21:24,052 [265] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 09:21:24,230 [265] DEBUG Servicesys_parameter - 获取字段
2013-11-28 09:21:24,231 [265] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-28 09:21:31,663 [265] DEBUG Servicesys_user - 获取实体对象
2013-11-28 09:21:31,665 [265] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-28 09:21:31,761 [265] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-28 09:21:31,809 [265] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-28 9:21:31')
2013-11-28 09:21:31,813 [265] DEBUG Servicemms_project - 获取实体对象
2013-11-28 09:21:31,815 [265] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-28 09:21:31,854 [259] DEBUG Servicesys_parameter - 获取字段
2013-11-28 09:21:31,855 [259] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 09:21:32,050 [259] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 09:21:37,414 [259] DEBUG Servicesys_parameter - 获取字段
2013-11-28 09:21:37,415 [259] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 09:21:38,750 [275] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 09:21:41,178 [259] DEBUG Servicesys_parameter - 获取字段
2013-11-28 09:21:41,179 [259] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 09:21:41,190 [259] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 09:21:41,191 [259] DEBUG Servicesys_parameter - 获取字段
2013-11-28 09:21:41,192 [259] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 09:21:41,699 [266] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:00:38,563 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:00:38,707 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:00:38,711 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:00:38,785 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:00:39,129 [1168] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:00:39,149 [1168] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:00:39,318 [1168] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:00:39,318 [1168] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-28 18:00:46,515 [1168] DEBUG Servicesys_user - 获取实体对象
2013-11-28 18:00:46,517 [1168] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-28 18:00:46,665 [1168] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-28 18:00:46,756 [1168] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-28 18:00:46')
2013-11-28 18:00:46,763 [1168] DEBUG Servicemms_project - 获取实体对象
2013-11-28 18:00:46,764 [1168] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-28 18:00:46,839 [1167] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:00:46,839 [1167] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:00:47,045 [1167] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:00:47,148 [1167] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:00:47,148 [1167] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:00:48,801 [1170] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:00:51,426 [1171] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:00:51,426 [1171] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:00:51,435 [1171] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:00:51,435 [1171] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:00:51,435 [1171] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:00:51,631 [1167] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:00:55,502 [1171] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:00:55,502 [1171] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:00:55,507 [1171] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:00:55,508 [1171] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:00:55,508 [1171] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:00:55,705 [1169] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:03:07,404 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:03:07,420 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:03:07,423 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:03:07,423 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:03:16,458 [267] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:03:16,473 [267] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:03:16,637 [267] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:03:16,682 [267] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:03:16,682 [267] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:03:17,543 [267] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:03:58,648 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:03:58,662 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:03:58,665 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:03:58,665 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:04:13,267 [1148] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:04:13,284 [1148] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:04:13,612 [1148] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:10:26,973 [1148] ERROR / - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 dotless.Core.Parser.Parsers.Rule(Parser parser)
   在 dotless.Core.Parser.Parsers.Primary(Parser parser)
   在 dotless.Core.Parser.Parser.Parse(String input, String fileName)
   在 dotless.Core.LessEngine.TransformToCss(String source, String fileName)
   在 dotless.Core.CacheDecorator.TransformToCss(String source, String fileName)
   在 dotless.Core.ParameterDecorator.TransformToCss(String source, String fileName)
   在 dotless.Core.Less.Parse(String less, DotlessConfiguration config)
   在 dotless.Core.Less.Parse(String less)
   在 Zephyr.Web.Mvc.LessTransform.Process(BundleContext context, BundleResponse response) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Webstack\LessTransform.cs:行号 11
   在 System.Web.Optimization.Bundle.ApplyTransforms(BundleContext context, String bundleContent, IEnumerable`1 bundleFiles)
   在 System.Web.Optimization.Bundle.GenerateBundleResponse(BundleContext context)
   在 System.Web.Optimization.Bundle.GetBundleResponse(BundleContext context)
   在 System.Web.Optimization.BundleResolver.GetBundleContents(String virtualPath)
   在 System.Web.Optimization.AssetManager.DeterminePathsToRender(IEnumerable`1 assets)
   在 System.Web.Optimization.AssetManager.RenderExplicit(String tagFormat, String[] paths)
   在 System.Web.Optimization.Styles.RenderFormat(String tagFormat, String[] paths)
   在 System.Web.Optimization.Styles.Render(String[] paths)
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 28
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-28 18:10:37,792 [1153] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:10:37,793 [1153] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:10:37,799 [1153] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:11:23,959 [1153] ERROR / - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 dotless.Core.Parser.Parsers.Rule(Parser parser)
   在 dotless.Core.Parser.Parsers.Primary(Parser parser)
   在 dotless.Core.Parser.Parser.Parse(String input, String fileName)
   在 dotless.Core.LessEngine.TransformToCss(String source, String fileName)
   在 dotless.Core.CacheDecorator.TransformToCss(String source, String fileName)
   在 dotless.Core.ParameterDecorator.TransformToCss(String source, String fileName)
   在 dotless.Core.Less.Parse(String less, DotlessConfiguration config)
   在 dotless.Core.Less.Parse(String less)
   在 Zephyr.Web.Mvc.LessTransform.Process(BundleContext context, BundleResponse response) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Webstack\LessTransform.cs:行号 11
   在 System.Web.Optimization.Bundle.ApplyTransforms(BundleContext context, String bundleContent, IEnumerable`1 bundleFiles)
   在 System.Web.Optimization.Bundle.GenerateBundleResponse(BundleContext context)
   在 System.Web.Optimization.Bundle.GetBundleResponse(BundleContext context)
   在 System.Web.Optimization.BundleResolver.GetBundleContents(String virtualPath)
   在 System.Web.Optimization.AssetManager.DeterminePathsToRender(IEnumerable`1 assets)
   在 System.Web.Optimization.AssetManager.RenderExplicit(String tagFormat, String[] paths)
   在 System.Web.Optimization.Styles.RenderFormat(String tagFormat, String[] paths)
   在 System.Web.Optimization.Styles.Render(String[] paths)
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 28
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-28 18:14:23,113 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:14:23,145 [48] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:14:23,152 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:14:23,153 [48] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:14:27,842 [1146] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:14:27,867 [1146] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:14:28,264 [1146] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:14:43,967 [1146] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:14:43,967 [1146] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:14:44,747 [1153] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:14:54,692 [1146] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:14:54,692 [1146] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:14:54,706 [1146] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:14:54,708 [1146] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:14:54,708 [1146] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:14:55,099 [1167] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:15:17,206 [1154] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:15:17,206 [1154] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:15:17,236 [1154] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:15:17,238 [1154] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:15:17,238 [1154] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:15:18,210 [1149] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:15:43,126 [1156] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:15:43,139 [1156] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:15:43,142 [1156] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:15:43,143 [1156] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:15:43,922 [1154] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:15:43,933 [1154] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:15:44,125 [1154] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:15:48,276 [1154] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:15:48,276 [1154] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:15:49,536 [1145] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:28:37,031 [1156] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:28:37,046 [1156] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:28:37,049 [1156] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:28:37,049 [1156] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:28:37,256 [1149] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:28:37,272 [1149] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:28:37,434 [1149] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:30:02,892 [1149] ERROR / - System.Exception: less文件中语法有错误！
   在 Zephyr.Web.Mvc.LessTransform.Process(BundleContext context, BundleResponse response) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Webstack\LessTransform.cs:行号 13
   在 System.Web.Optimization.Bundle.ApplyTransforms(BundleContext context, String bundleContent, IEnumerable`1 bundleFiles)
   在 System.Web.Optimization.Bundle.GenerateBundleResponse(BundleContext context)
   在 System.Web.Optimization.Bundle.GetBundleResponse(BundleContext context)
   在 System.Web.Optimization.BundleResolver.GetBundleContents(String virtualPath)
   在 System.Web.Optimization.AssetManager.DeterminePathsToRender(IEnumerable`1 assets)
   在 System.Web.Optimization.AssetManager.RenderExplicit(String tagFormat, String[] paths)
   在 System.Web.Optimization.Styles.RenderFormat(String tagFormat, String[] paths)
   在 System.Web.Optimization.Styles.Render(String[] paths)
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 13
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-28 18:43:51,498 [1156] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:43:51,530 [1156] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:43:51,536 [1156] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:43:51,536 [1156] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:43:51,896 [1099] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:43:51,920 [1099] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:44:02,969 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:44:02,984 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:44:02,987 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:44:02,987 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:44:03,782 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:44:03,812 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:44:04,620 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:44:13,610 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:44:13,610 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:44:14,655 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:44:33,495 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/role/Index','/Sys/role')
2013-11-28 18:44:33,503 [10] DEBUG Servicesys_user - 获取动态列表
2013-11-28 18:44:33,504 [10] DEBUG Sys - select UserCode,UserName from sys_user
2013-11-28 18:44:33,505 [10] DEBUG Servicesys_organize - 获取动态列表
2013-11-28 18:44:33,505 [10] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2013-11-28 18:44:35,043 [9] DEBUG Servicesys_role - 获取实体列表
2013-11-28 18:44:35,045 [9] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2013-11-28 18:44:35,820 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-28 18:44:36,693 [9] DEBUG Servicesys_organize - 获取实体列表
2013-11-28 18:44:36,693 [9] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-28 18:44:36,707 [12] DEBUG Servicesys_user - 获取实体列表
2013-11-28 18:44:36,707 [12] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-28 18:44:36,746 [12] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-28 18:44:39,945 [6] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-28 18:44:39,946 [6] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-28 18:44:48,337 [10] DEBUG Servicesys_userSetting - 编辑记录
2013-11-28 18:44:48,351 [10] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID=''
2013-11-28 18:44:48,370 [10] DEBUG Sys - insert into sys_userSetting([UserCode],[SettingCode],[SettingName],[SettingValue],[Description]) values('admin','homeTabUrl','','/mms','主页签的页面路径')
2013-11-28 18:44:51,457 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:44:51,459 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:44:51,465 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:44:51,466 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:44:51,466 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:44:51,644 [10] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:44:57,541 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-28 18:44:58,354 [12] DEBUG Servicesys_organize - 获取实体列表
2013-11-28 18:44:58,354 [12] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-28 18:44:58,392 [13] DEBUG Servicesys_user - 获取实体列表
2013-11-28 18:44:58,392 [13] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-28 18:44:58,394 [13] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-28 18:45:03,150 [12] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-28 18:45:03,150 [12] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-28 18:45:33,426 [13] DEBUG Servicesys_userSetting - 编辑记录
2013-11-28 18:45:33,426 [13] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='40'
2013-11-28 18:45:33,433 [13] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms/home/desktop', [Description] = '主页签的页面路径' where [ID] = '40'
2013-11-28 18:45:35,123 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:45:35,123 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:45:35,137 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:45:35,138 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:45:35,139 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:45:35,378 [13] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:45:35,940 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-28 18:45:36,748 [13] DEBUG Servicesys_organize - 获取实体列表
2013-11-28 18:45:36,748 [13] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-28 18:45:36,781 [11] DEBUG Servicesys_user - 获取实体列表
2013-11-28 18:45:36,781 [11] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-28 18:45:36,782 [11] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-28 18:46:06,044 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:06,045 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:46:06,057 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:46:06,058 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:06,058 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:46:06,248 [8] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:46:12,298 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:12,299 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:46:12,304 [12] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:46:12,305 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:12,305 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:46:12,488 [14] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:46:14,150 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:14,150 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:46:14,156 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:46:14,157 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:14,158 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:46:14,325 [13] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:46:33,006 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:33,006 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:46:33,010 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:46:33,010 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:33,011 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:46:38,415 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 18:46:38,423 [14] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 18:46:38,423 [14] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 18:46:38,462 [14] DEBUG Servicesys_code - 获取动态列表
2013-11-28 18:46:38,462 [14] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 18:46:43,887 [17] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 18:46:43,888 [17] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 18:46:43,994 [17] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 18:46:52,875 [23] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:52,876 [23] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:46:52,881 [23] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:46:52,882 [23] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:46:52,882 [23] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:47:26,929 [25] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:47:30,515 [25] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 18:47:30,517 [25] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 18:47:30,519 [25] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 18:47:30,524 [25] DEBUG Sys - insert into sys_userSetting([UserCode],[SettingCode],[SettingName],[SettingValue],[Description]) values('admin','homeTabTitle','','我的桌面','')
2013-11-28 18:47:30,526 [25] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 18:47:30,527 [25] DEBUG Sys - insert into sys_userSetting([UserCode],[SettingCode],[SettingName],[SettingValue],[Description]) values('admin','maxTabCount','','10','')
2013-11-28 18:47:30,528 [25] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 18:47:30,530 [25] DEBUG Sys - insert into sys_userSetting([UserCode],[SettingCode],[SettingName],[SettingValue],[Description]) values('admin','navigation','','accordion','')
2013-11-28 18:47:30,531 [25] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 18:47:30,533 [25] DEBUG Sys - insert into sys_userSetting([UserCode],[SettingCode],[SettingName],[SettingValue],[Description]) values('admin','locale','','zh_CN','')
2013-11-28 18:47:30,534 [25] DEBUG Sys - update sys_userSetting set [SettingValue] = 'gray' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 18:47:30,536 [25] DEBUG Sys - insert into sys_userSetting([UserCode],[SettingCode],[SettingName],[SettingValue],[Description]) values('admin','theme','','gray','')
2013-11-28 18:47:31,534 [22] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:47:31,534 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:47:31,542 [22] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:47:34,232 [22] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:47:34,232 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:47:34,438 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:47:41,152 [18] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:47:41,152 [18] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:47:41,157 [18] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:47:41,158 [18] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:47:41,158 [18] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:47:41,346 [23] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:50:47,438 [10] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:50:47,438 [10] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:50:47,505 [10] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:50:47,506 [10] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-28 18:50:51,427 [26] DEBUG Servicesys_user - 获取实体对象
2013-11-28 18:50:51,428 [26] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-28 18:50:51,430 [26] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-28 18:50:51,469 [26] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','','LHS-PC','localhost','福建省厦门市','2013-11-28 18:50:51')
2013-11-28 18:50:51,471 [26] DEBUG Servicemms_project - 获取实体对象
2013-11-28 18:50:51,472 [26] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-28 18:50:51,486 [29] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:50:51,486 [29] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:50:51,491 [29] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:50:51,492 [29] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:50:51,492 [29] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:50:51,923 [28] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:55:05,104 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:55:05,140 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:55:05,148 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:55:05,148 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:55:05,526 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:55:05,553 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:55:06,159 [32] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:55:09,464 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:55:09,465 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:55:10,356 [31] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:55:12,184 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:55:12,185 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:55:12,202 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:55:12,203 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:55:12,203 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:55:12,383 [22] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:55:20,432 [22] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:55:20,433 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:55:20,453 [22] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:55:20,453 [22] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:55:20,453 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:55:20,728 [29] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:56:50,579 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:56:50,594 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:56:50,597 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:56:50,598 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 18:56:50,813 [28] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:56:50,825 [28] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:56:51,146 [28] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:56:54,213 [28] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:56:54,213 [28] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:56:55,243 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:56:59,954 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:57:05,925 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:57:05,925 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:57:05,932 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:57:05,933 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:57:05,933 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:57:06,170 [27] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:57:09,015 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:57:12,584 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 18:57:12,584 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 18:57:12,585 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 18:57:12,585 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 18:57:12,586 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 18:57:12,586 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 18:57:12,587 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = 'default' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 18:57:13,161 [22] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 18:57:13,161 [22] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 18:57:13,161 [22] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 18:57:13,162 [22] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 18:57:13,162 [22] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 18:57:13,162 [22] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 18:57:13,162 [22] DEBUG Sys - update sys_userSetting set [SettingValue] = 'default' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 18:57:15,592 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 18:57:15,592 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 18:57:15,593 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 18:57:15,593 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 18:57:15,593 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 18:57:15,593 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 18:57:15,594 [27] DEBUG Sys - update sys_userSetting set [SettingValue] = 'default' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 18:57:16,228 [22] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:57:16,228 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:57:16,234 [22] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:57:18,505 [22] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:57:18,505 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:57:18,724 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:57:32,718 [28] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:57:32,719 [28] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:57:32,731 [28] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:57:32,732 [28] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:57:32,732 [28] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:57:32,944 [31] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:58:15,419 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:58:15,419 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:58:15,429 [8] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:58:17,468 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:58:17,468 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:58:17,716 [28] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:58:34,656 [30] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:58:37,672 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 18:58:37,672 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 18:58:37,673 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 18:58:37,674 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 18:58:37,674 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 18:58:37,675 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 18:58:37,675 [20] DEBUG Sys - update sys_userSetting set [SettingValue] = 'gray' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 18:58:38,755 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:58:38,756 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:58:38,764 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:58:47,223 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:58:47,224 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:58:47,446 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:59:41,843 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:59:41,843 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:59:41,856 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:59:41,857 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:59:41,857 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:59:42,098 [31] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:59:43,464 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:59:43,464 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:59:43,502 [8] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:59:43,502 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:59:43,503 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:59:43,620 [11] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 18:59:44,703 [18] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:59:44,703 [18] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 18:59:44,715 [18] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 18:59:44,716 [18] DEBUG Servicesys_parameter - 获取字段
2013-11-28 18:59:44,716 [18] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 18:59:44,871 [8] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 19:00:43,477 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 19:00:43,478 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 19:00:43,484 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 19:00:43,485 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 19:00:43,485 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 19:00:43,772 [18] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 19:00:44,902 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 19:00:44,902 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 19:00:44,938 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 19:00:44,940 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 19:00:44,940 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 19:00:45,128 [32] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 19:01:07,746 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 19:01:07,777 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 19:01:07,784 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 19:01:07,784 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 19:01:08,187 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-28 19:01:08,210 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 19:01:08,801 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 19:01:29,846 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-28 19:01:29,846 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 19:01:30,756 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 19:02:09,903 [21] DEBUG Servicesys_parameter - 获取字段
2013-11-28 19:02:09,903 [21] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 19:02:09,911 [21] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 19:02:09,911 [21] DEBUG Servicesys_parameter - 获取字段
2013-11-28 19:02:09,912 [21] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 19:02:10,127 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 20:25:12,535 [38] DEBUG Servicesys_parameter - 获取字段
2013-11-28 20:25:12,541 [38] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 20:25:12,554 [38] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 20:25:12,557 [38] DEBUG Servicesys_parameter - 获取字段
2013-11-28 20:25:12,557 [38] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 20:25:12,956 [38] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 20:29:38,273 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/return/Index','/Mms/return')
2013-11-28 20:29:38,286 [9] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 20:29:38,291 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 20:29:38,292 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:29:38,293 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-28 20:29:38,294 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:29:38,294 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 20:29:42,653 [28] DEBUG Servicemms_return - 获取动态列表
2013-11-28 20:29:42,655 [28] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName from mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 20:29:44,100 [28] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName from mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 20:29:47,018 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/return/edit')
2013-11-28 20:29:47,033 [9] DEBUG Servicemms_return - 获取实体对象
2013-11-28 20:29:47,035 [9] DEBUG Mms - select mms_return.* from mms_return where BillNo='201306060001'
2013-11-28 20:29:47,044 [9] DEBUG Servicemms_return - 获取上一条下一条数据
2013-11-28 20:29:47,064 [9] DEBUG Servicemms_return - 获取字段
2013-11-28 20:29:47,065 [9] DEBUG Mms - select top 1 BillNo from mms_return where ProjectCode='201306030001' order by BillNo
2013-11-28 20:29:47,068 [9] DEBUG Servicemms_return - 获取字段
2013-11-28 20:29:47,068 [9] DEBUG Mms - select top 1 BillNo from mms_return where BillNo<'201306060001' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 20:29:47,071 [9] DEBUG Servicemms_return - 获取字段
2013-11-28 20:29:47,072 [9] DEBUG Mms - select top 1 BillNo from mms_return where BillNo>'201306060001' and ProjectCode='201306030001' order by BillNo
2013-11-28 20:29:47,075 [9] DEBUG Servicemms_return - 获取字段
2013-11-28 20:29:47,075 [9] DEBUG Mms - select top 1 BillNo from mms_return where ProjectCode='201306030001' order by BillNo desc
2013-11-28 20:29:47,324 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:29:47,324 [9] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 20:29:47,326 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:29:47,326 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-28 20:29:47,327 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:29:47,327 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 20:29:47,328 [9] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 20:29:47,328 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 20:29:47,330 [9] DEBUG Servicesys_code - 获取字段
2013-11-28 20:29:47,330 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 20:29:47,332 [9] DEBUG Servicesys_code - 获取字段
2013-11-28 20:29:47,332 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2013-11-28 20:29:52,406 [12] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 20:29:52,407 [12] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00302%' order by MerchantsCode
2013-11-28 20:29:53,522 [36] DEBUG Servicemms_return - 获取动态列表
2013-11-28 20:29:53,523 [36] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_returnDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201306060001' order by A.MaterialCode
2013-11-28 20:37:34,101 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-28 20:37:34,107 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 20:37:34,120 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 20:37:34,122 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-28 20:37:34,123 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 20:37:34,520 [15] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 20:37:35,690 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/return/edit')
2013-11-28 20:37:35,693 [10] DEBUG Servicemms_return - 获取实体对象
2013-11-28 20:37:35,699 [10] DEBUG Mms - select mms_return.* from mms_return where BillNo='201306060001'
2013-11-28 20:37:35,699 [10] DEBUG Servicemms_return - 获取上一条下一条数据
2013-11-28 20:37:35,700 [10] DEBUG Servicemms_return - 获取字段
2013-11-28 20:37:35,700 [10] DEBUG Mms - select top 1 BillNo from mms_return where ProjectCode='201306030001' order by BillNo
2013-11-28 20:37:35,700 [10] DEBUG Servicemms_return - 获取字段
2013-11-28 20:37:35,701 [10] DEBUG Mms - select top 1 BillNo from mms_return where BillNo<'201306060001' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 20:37:35,701 [10] DEBUG Servicemms_return - 获取字段
2013-11-28 20:37:35,701 [10] DEBUG Mms - select top 1 BillNo from mms_return where BillNo>'201306060001' and ProjectCode='201306030001' order by BillNo
2013-11-28 20:37:35,702 [10] DEBUG Servicemms_return - 获取字段
2013-11-28 20:37:35,702 [10] DEBUG Mms - select top 1 BillNo from mms_return where ProjectCode='201306030001' order by BillNo desc
2013-11-28 20:37:35,703 [10] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:37:35,703 [10] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 20:37:35,704 [10] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:37:35,704 [10] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-28 20:37:35,705 [10] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:37:35,705 [10] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 20:37:35,706 [10] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 20:37:35,706 [10] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 20:37:35,707 [10] DEBUG Servicesys_code - 获取字段
2013-11-28 20:37:35,707 [10] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 20:37:35,708 [10] DEBUG Servicesys_code - 获取字段
2013-11-28 20:37:35,708 [10] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2013-11-28 20:37:35,803 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/return/edit')
2013-11-28 20:37:35,805 [6] DEBUG Servicemms_return - 获取实体对象
2013-11-28 20:37:35,805 [6] DEBUG Mms - select mms_return.* from mms_return where BillNo='201306060001'
2013-11-28 20:37:35,806 [6] DEBUG Servicemms_return - 获取上一条下一条数据
2013-11-28 20:37:35,806 [6] DEBUG Servicemms_return - 获取字段
2013-11-28 20:37:35,806 [6] DEBUG Mms - select top 1 BillNo from mms_return where ProjectCode='201306030001' order by BillNo
2013-11-28 20:37:35,806 [6] DEBUG Servicemms_return - 获取字段
2013-11-28 20:37:35,807 [6] DEBUG Mms - select top 1 BillNo from mms_return where BillNo<'201306060001' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 20:37:35,807 [6] DEBUG Servicemms_return - 获取字段
2013-11-28 20:37:35,807 [6] DEBUG Mms - select top 1 BillNo from mms_return where BillNo>'201306060001' and ProjectCode='201306030001' order by BillNo
2013-11-28 20:37:35,808 [6] DEBUG Servicemms_return - 获取字段
2013-11-28 20:37:35,808 [6] DEBUG Mms - select top 1 BillNo from mms_return where ProjectCode='201306030001' order by BillNo desc
2013-11-28 20:37:35,808 [6] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:37:35,809 [6] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 20:37:35,809 [6] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:37:35,810 [6] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-28 20:37:35,810 [6] DEBUG Servicesys_code - 获取动态列表
2013-11-28 20:37:35,810 [6] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 20:37:35,811 [6] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 20:37:35,811 [6] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 20:37:35,812 [6] DEBUG Servicesys_code - 获取字段
2013-11-28 20:37:35,812 [6] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 20:37:35,812 [6] DEBUG Servicesys_code - 获取字段
2013-11-28 20:37:35,813 [6] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2013-11-28 20:37:44,543 [27] DEBUG Servicemms_return - 获取动态列表
2013-11-28 20:37:44,544 [27] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_returnDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201306060001' order by A.MaterialCode
2013-11-28 20:37:44,587 [16] DEBUG Servicemms_return - 获取动态列表
2013-11-28 20:37:44,587 [16] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_returnDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201306060001' order by A.MaterialCode
2013-11-28 21:04:17,019 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:04:17,052 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:04:17,060 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:04:17,060 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:04:17,411 [121] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:04:17,436 [121] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:04:18,048 [121] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:04:18,607 [121] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:04:18,607 [121] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:04:20,096 [121] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:04:25,039 [124] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:04:25,039 [124] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:04:25,050 [124] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:04:25,052 [124] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:04:25,052 [124] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:04:25,488 [118] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:04:30,045 [117] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 21:04:30,057 [117] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 21:04:30,059 [117] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 21:04:30,061 [117] DEBUG Servicesys_code - 获取动态列表
2013-11-28 21:04:30,062 [117] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 21:04:33,143 [120] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 21:04:33,145 [120] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 21:04:33,227 [120] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 21:05:05,214 [113] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:05:05,214 [113] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:05:05,227 [113] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:05:05,229 [113] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:05:05,230 [113] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:05:06,805 [112] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:05:10,847 [109] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:05:10,848 [109] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:05:10,871 [109] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:05:10,872 [109] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:05:10,873 [109] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:05:11,898 [115] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:07:05,686 [105] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:07:05,686 [105] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:07:05,703 [105] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:07:06,116 [105] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:07:06,116 [105] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:07:06,707 [116] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:07:11,801 [108] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:07:11,801 [108] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:07:11,812 [108] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:07:11,813 [108] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:07:11,814 [108] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:07:12,232 [105] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:07:17,791 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:07:17,791 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:07:17,802 [106] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:07:17,803 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:07:17,804 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:07:18,755 [118] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:07:26,718 [107] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:07:26,718 [107] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:07:26,729 [107] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:07:26,730 [107] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:07:26,731 [107] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:07:27,040 [108] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:20:09,671 [100] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:20:09,702 [100] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:20:09,710 [100] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:20:09,710 [100] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:20:10,127 [104] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:20:10,152 [104] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:20:10,771 [104] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:20:11,345 [104] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:20:11,346 [104] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:20:12,803 [121] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:20:22,794 [124] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:20:22,795 [124] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:20:22,808 [124] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:20:22,810 [124] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:20:22,810 [124] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:20:23,214 [113] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:20:53,772 [124] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:20:53,772 [124] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:20:53,785 [124] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:20:53,786 [124] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:20:53,787 [124] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:20:54,271 [121] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:20:56,143 [124] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:20:56,144 [124] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:20:56,156 [124] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:20:56,158 [124] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:20:56,158 [124] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:20:56,243 [124] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:49:19,713 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:49:19,744 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:49:19,752 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:49:19,753 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:49:20,151 [99] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:49:20,176 [99] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:49:20,746 [99] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:49:21,321 [99] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:49:21,321 [99] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:49:22,763 [123] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:49:31,415 [123] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:49:31,415 [123] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:49:31,429 [123] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:49:31,430 [123] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:49:31,431 [123] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:49:31,761 [117] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:51:24,412 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:51:24,443 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:51:24,451 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:51:24,451 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:51:24,862 [115] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:51:24,886 [115] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:51:25,470 [115] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:51:26,018 [115] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:51:26,018 [115] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:51:26,844 [104] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:51:30,533 [123] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:51:30,533 [123] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:51:30,560 [123] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:51:30,562 [123] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:51:30,563 [123] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:51:30,958 [105] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:51:35,518 [115] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:51:35,519 [115] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:51:35,532 [115] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:51:35,534 [115] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:51:35,534 [115] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:51:35,970 [96] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:51:36,876 [95] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:51:36,877 [95] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:51:36,891 [95] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:51:36,893 [95] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:51:36,894 [95] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:51:37,073 [116] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:53:14,238 [118] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:53:14,239 [118] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:53:14,252 [118] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:53:14,625 [118] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:53:14,625 [118] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:53:15,194 [92] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:53:17,688 [96] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:53:17,688 [96] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:53:17,700 [96] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:53:17,701 [96] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:53:17,702 [96] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:53:18,159 [105] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:53:23,453 [115] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:53:23,454 [115] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:53:23,466 [115] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:53:23,468 [115] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:53:23,469 [115] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:53:23,867 [99] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:54:24,372 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:54:24,404 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:54:24,411 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:54:24,412 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:54:24,785 [119] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:54:24,805 [119] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:54:25,391 [119] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:54:28,767 [119] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:54:28,767 [119] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:54:30,273 [103] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:54:35,690 [116] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:54:35,691 [116] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:54:35,707 [116] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:54:35,709 [116] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:54:35,710 [116] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:54:36,080 [105] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:54:41,590 [119] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:54:41,590 [119] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:54:41,602 [119] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:54:41,603 [119] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:54:41,604 [119] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:54:42,020 [106] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:54:43,344 [111] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:54:43,344 [111] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:54:43,356 [111] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:54:43,357 [111] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:54:43,358 [111] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:54:43,512 [120] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 21:55:31,560 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:55:31,592 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:55:31,599 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:55:31,600 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 21:55:31,976 [121] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:55:32,001 [121] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 21:55:32,597 [121] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 21:56:15,298 [121] DEBUG Servicesys_parameter - 获取字段
2013-11-28 21:56:15,299 [121] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 21:56:17,013 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:07:29,404 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:07:29,410 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:07:29,426 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:07:29,429 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:07:29,430 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:07:30,033 [92] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:07:59,080 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:07:59,112 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:07:59,119 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:07:59,120 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:07:59,496 [92] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:07:59,521 [92] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:08:00,118 [92] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:08:13,371 [92] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:08:13,372 [92] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:08:14,878 [113] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:10:36,596 [109] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:10:36,627 [109] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:10:36,635 [109] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:10:36,635 [109] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:10:37,018 [95] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:10:37,037 [95] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:10:37,592 [95] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:10:44,592 [95] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:10:44,593 [95] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:10:45,592 [102] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:10:49,822 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:10:49,822 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:10:49,836 [106] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:10:49,837 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:10:49,838 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:10:50,341 [94] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:10:57,577 [110] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:10:57,578 [110] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:10:57,604 [110] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:10:57,606 [110] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:10:57,606 [110] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:10:58,035 [97] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:11:08,576 [110] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:11:08,577 [110] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:11:08,590 [110] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:11:08,591 [110] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:11:08,592 [110] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:11:08,924 [114] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:11:10,519 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:11:10,519 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:11:10,533 [102] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:11:10,535 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:11:10,535 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:11:10,813 [106] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:11:38,344 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:11:38,376 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:11:38,383 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:11:38,384 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:11:38,755 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:11:38,777 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:11:39,335 [102] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:11:39,883 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:11:39,884 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:11:41,212 [102] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:12:22,390 [111] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:12:22,391 [111] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:12:22,405 [111] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:12:22,408 [111] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:12:22,408 [111] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:12:23,043 [110] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:12:45,369 [104] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:12:45,383 [104] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:12:45,386 [104] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:12:45,386 [104] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:12:45,573 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:12:45,596 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:12:46,176 [102] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:12:46,740 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:12:46,741 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:12:48,241 [102] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:13:40,309 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:13:40,341 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:13:40,348 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:13:40,349 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:13:40,775 [120] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:13:40,799 [120] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:13:41,374 [120] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:13:41,978 [120] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:13:41,978 [120] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:13:43,161 [94] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:13:53,609 [120] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:13:53,609 [120] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:13:53,629 [120] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:13:53,631 [120] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:13:53,631 [120] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:13:53,939 [107] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:15:50,620 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:15:50,652 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:15:50,659 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:15:50,660 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:15:51,045 [98] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:15:51,069 [98] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:15:51,641 [98] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:15:52,179 [98] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:15:52,180 [98] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:15:53,592 [98] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:16:44,575 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:16:44,607 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:16:44,614 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:16:44,615 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:16:45,009 [98] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:16:45,030 [98] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:16:45,613 [98] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:16:46,170 [98] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:16:46,171 [98] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:16:47,484 [101] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:16:52,859 [105] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:16:52,860 [105] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:16:52,875 [105] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:16:52,876 [105] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:16:52,877 [105] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:16:53,251 [107] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:16:58,985 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:16:58,985 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:16:59,004 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:16:59,006 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:16:59,007 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:16:59,418 [92] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:18:12,492 [96] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:18:12,493 [96] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:18:12,506 [96] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:18:12,837 [96] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:18:12,838 [96] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:18:13,324 [94] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:18:17,254 [92] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:18:17,254 [92] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:18:17,264 [92] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:18:17,266 [92] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:18:17,266 [92] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:18:17,661 [106] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:18:29,677 [115] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:18:29,678 [115] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:18:29,691 [115] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:18:29,693 [115] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:18:29,693 [115] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:18:30,137 [94] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:19:17,211 [119] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:19:17,211 [119] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:19:17,226 [119] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:19:17,649 [119] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:19:17,649 [119] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:19:18,347 [119] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:19:23,681 [107] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:19:23,682 [107] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:19:23,694 [107] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:19:23,696 [107] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:19:23,696 [107] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:19:24,127 [98] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:19:51,913 [94] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:19:51,914 [94] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:19:51,926 [94] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:19:52,318 [94] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:19:52,318 [94] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:19:53,322 [115] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:19:56,937 [117] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:20:00,589 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 22:20:00,590 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 22:20:00,591 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 22:20:00,592 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 22:20:00,592 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 22:20:00,593 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 22:20:00,594 [117] DEBUG Sys - update sys_userSetting set [SettingValue] = 'default' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 22:20:01,350 [114] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:20:01,351 [114] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:20:01,365 [114] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:20:01,709 [114] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:20:01,709 [114] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:20:02,112 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:20:28,221 [103] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:20:28,222 [103] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:20:28,235 [103] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:20:28,237 [103] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:20:28,238 [103] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:20:28,647 [107] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:20:33,914 [112] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:20:41,682 [115] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 22:20:41,683 [115] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 22:20:41,683 [115] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 22:20:41,684 [115] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 22:20:41,684 [115] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 22:20:41,685 [115] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 22:20:41,685 [115] DEBUG Sys - update sys_userSetting set [SettingValue] = 'gray' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 22:20:42,890 [103] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:20:42,890 [103] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:20:42,904 [103] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:20:42,906 [103] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:20:42,906 [103] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:20:43,303 [117] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:26:03,424 [104] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:26:03,454 [104] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:26:03,460 [104] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:26:03,461 [104] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:26:03,813 [91] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:26:03,837 [91] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:26:04,404 [91] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:26:04,997 [91] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:26:04,998 [91] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:26:06,150 [91] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:26:12,269 [91] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:26:28,605 [106] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 22:26:28,607 [106] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 22:26:28,607 [106] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 22:26:28,608 [106] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 22:26:28,608 [106] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 22:26:28,609 [106] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 22:26:28,610 [106] DEBUG Sys - update sys_userSetting set [SettingValue] = 'bootstrap' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 22:26:29,165 [94] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 22:26:29,166 [94] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 22:26:29,166 [94] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 22:26:29,167 [94] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 22:26:29,167 [94] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 22:26:29,168 [94] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 22:26:29,168 [94] DEBUG Sys - update sys_userSetting set [SettingValue] = 'bootstrap' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 22:26:29,943 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:26:29,944 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:26:29,958 [102] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:26:30,403 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:26:30,404 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:26:30,773 [111] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:26:42,093 [105] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:26:42,093 [105] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:26:42,106 [105] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:26:42,108 [105] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:26:42,108 [105] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:26:42,447 [116] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:26:47,010 [106] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:26:47,021 [106] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:26:47,022 [106] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:26:47,023 [106] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:26:47,024 [106] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:26:55,515 [96] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:26:55,516 [96] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:26:55,601 [96] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:27:09,512 [102] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:27:09,514 [102] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:27:09,514 [102] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:27:09,515 [102] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:27:09,515 [102] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:27:11,523 [93] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:27:11,524 [93] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:27:11,527 [93] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:28:27,424 [91] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:28:27,425 [91] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName, row_number() over (order by A.BillNo) as FLUENTDATA_ROWNUMBER
									 from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001'
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 21 and 40
2013-11-28 22:28:27,434 [91] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:28:29,545 [106] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:28:29,545 [106] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:28:29,547 [106] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:49:03,874 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:49:03,895 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:49:03,900 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:49:03,901 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 22:49:04,183 [52] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:04,193 [52] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:49:04,339 [52] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:49:04,617 [52] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:04,617 [52] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:49:06,480 [73] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:06,480 [73] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:49:06,493 [73] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:49:06,495 [73] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:06,495 [73] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:49:07,067 [60] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:49:12,426 [52] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:12,426 [52] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:49:12,449 [52] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:49:12,451 [52] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:12,452 [52] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:49:12,825 [57] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:49:15,568 [106] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:49:15,578 [106] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:49:15,580 [106] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:49:15,581 [106] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:49:15,582 [106] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:49:18,668 [60] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:49:18,669 [60] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:49:18,749 [60] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:49:34,655 [96] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:49:38,965 [96] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 22:49:38,966 [96] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 22:49:38,967 [96] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 22:49:38,968 [96] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 22:49:38,968 [96] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 22:49:38,969 [96] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 22:49:38,970 [96] DEBUG Sys - update sys_userSetting set [SettingValue] = 'metro' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 22:49:40,388 [53] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:40,388 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:49:40,413 [53] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:49:40,671 [53] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:40,672 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:49:41,004 [55] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:49:46,022 [60] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:46,023 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:49:46,041 [60] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:49:46,044 [60] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:49:46,044 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:49:46,405 [56] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:49:49,759 [48] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:49:49,761 [48] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:49:49,762 [48] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:49:49,762 [48] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:49:49,763 [48] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:49:57,067 [19] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:49:57,069 [19] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:49:57,070 [19] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:49:57,070 [19] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:49:57,070 [19] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:49:59,115 [96] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:49:59,116 [96] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:49:59,118 [96] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:50:18,732 [110] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:50:18,733 [110] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:50:18,746 [110] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:50:18,748 [110] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:50:18,748 [110] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:50:19,197 [52] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:50:19,716 [48] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:50:19,718 [48] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:50:19,719 [48] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:50:19,719 [48] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:50:19,720 [48] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:50:20,460 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:50:20,460 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:50:20,475 [106] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:50:20,477 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:50:20,477 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:50:20,620 [48] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:50:21,066 [55] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:50:21,068 [55] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:50:21,068 [55] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:50:21,069 [55] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:50:21,069 [55] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:50:22,072 [60] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:50:22,072 [60] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:50:22,074 [60] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:50:22,976 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:50:22,977 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:50:22,990 [106] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:50:22,992 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:50:22,992 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:50:23,152 [96] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:50:23,673 [60] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:50:23,675 [60] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:50:23,676 [60] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:50:23,676 [60] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:50:23,676 [60] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:50:24,242 [73] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:50:24,242 [73] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:50:24,246 [73] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:50:26,163 [110] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:50:26,165 [110] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:50:26,166 [110] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:50:26,166 [110] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:50:26,167 [110] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:50:26,764 [106] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:50:26,765 [106] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:50:26,767 [106] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:50:28,108 [96] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-28 22:50:28,119 [96] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:50:28,120 [96] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:50:28,120 [96] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:50:28,120 [96] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-28 22:50:28,121 [96] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:50:28,121 [96] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-28 22:50:28,934 [96] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-28 22:50:28,937 [96] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-28 22:50:28,989 [96] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-28 22:50:28,990 [96] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-28 22:50:29,670 [57] DEBUG Servicemms_send - 获取动态列表
2013-11-28 22:50:29,671 [57] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:50:29,836 [57] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:50:35,971 [52] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/direct/Index','/Mms/direct')
2013-11-28 22:50:35,982 [52] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:50:35,983 [52] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:50:35,983 [52] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:50:35,983 [52] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:50:37,202 [19] DEBUG Servicemms_direct - 获取动态列表
2013-11-28 22:50:37,202 [19] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:50:37,261 [19] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:50:39,729 [55] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/transfer/Index','/Mms/transfer')
2013-11-28 22:50:39,740 [55] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:50:39,741 [55] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-28 22:50:39,741 [55] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:50:39,742 [55] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:50:41,022 [102] DEBUG Servicemms_transfer - 获取动态列表
2013-11-28 22:50:41,023 [102] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as ReceiveUnitName from mms_transfer A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.ReceiveUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:50:41,077 [102] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as ReceiveUnitName from mms_transfer A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.ReceiveUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 22:50:45,635 [94] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentin/Index','/Mms/rentin')
2013-11-28 22:50:45,646 [94] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:50:45,646 [94] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:50:46,734 [49] DEBUG Servicemms_rentIn - 获取动态列表
2013-11-28 22:50:46,734 [49] DEBUG Mms - select top 20 * from mms_rentIn order by BillNo
2013-11-28 22:50:46,808 [49] DEBUG Mms - select count(*) from ( select * from mms_rentIn ) tb_temp
2013-11-28 22:56:46,685 [63] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:56:46,691 [63] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 22:56:46,706 [63] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 22:56:46,708 [63] DEBUG Servicesys_parameter - 获取字段
2013-11-28 22:56:46,708 [63] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 22:56:47,146 [58] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 22:56:48,164 [101] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 22:56:48,165 [101] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 22:56:48,167 [101] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 22:56:48,167 [101] DEBUG Servicesys_code - 获取动态列表
2013-11-28 22:56:48,167 [101] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 22:56:49,985 [64] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 22:56:49,986 [64] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 22:56:49,991 [64] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:00:20,548 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:00:20,548 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:00:20,618 [102] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:00:20,958 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:00:20,958 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:00:21,316 [59] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:00:27,963 [61] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:00:27,964 [61] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:00:27,976 [61] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:00:27,978 [61] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:00:27,978 [61] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:00:28,385 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:00:30,850 [102] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:00:30,852 [102] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:00:30,853 [102] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:00:30,853 [102] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:00:30,854 [102] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:00:32,777 [101] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:00:32,778 [101] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:00:32,781 [101] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:01:44,369 [110] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:01:44,401 [110] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:01:44,408 [110] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:01:44,409 [110] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:01:44,805 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:01:44,827 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:01:45,399 [102] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:01:45,952 [102] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:01:45,953 [102] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:01:47,207 [54] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:01:51,341 [64] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:01:51,350 [64] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:01:51,352 [64] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:01:51,353 [64] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:01:51,353 [64] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:01:54,469 [95] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:01:54,470 [95] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:01:54,534 [95] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:08:23,747 [66] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:08:23,750 [66] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:08:23,780 [66] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:08:23,781 [66] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:08:23,781 [66] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:08:25,913 [64] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:08:25,914 [64] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:08:25,920 [64] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:08:25,921 [64] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:08:25,921 [64] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:08:27,653 [94] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:08:28,435 [54] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentin/Index','/Mms/rentin')
2013-11-28 23:08:28,438 [54] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:08:28,438 [54] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:08:32,244 [52] DEBUG Servicemms_rentIn - 获取动态列表
2013-11-28 23:08:32,245 [52] DEBUG Mms - select top 20 * from mms_rentIn order by BillNo
2013-11-28 23:08:32,273 [52] DEBUG Mms - select count(*) from ( select * from mms_rentIn ) tb_temp
2013-11-28 23:09:00,132 [64] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:09:00,135 [64] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:09:00,135 [64] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:09:00,136 [64] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:09:00,136 [64] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:09:01,100 [51] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:09:01,101 [51] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:09:01,104 [51] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:11:10,423 [51] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:10,423 [51] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:11:10,431 [51] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:11:10,608 [51] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:10,608 [51] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:11:10,838 [52] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:11:12,567 [71] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:12,568 [71] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:11:12,574 [71] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:11:12,575 [71] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:12,575 [71] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:11:12,763 [57] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:11:16,518 [52] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:16,519 [52] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:11:16,535 [52] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:11:16,536 [52] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:16,536 [52] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:11:16,767 [91] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:16,767 [91] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:11:16,774 [91] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:11:16,775 [91] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:16,775 [91] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:11:17,134 [56] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:11:17,508 [71] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:11:17,509 [71] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:11:17,509 [71] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:11:17,509 [71] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:11:17,510 [71] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:11:18,265 [51] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:11:18,265 [51] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:11:18,267 [51] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:11:18,301 [57] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:18,301 [57] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:11:18,312 [57] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:11:18,313 [57] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:18,313 [57] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:11:18,508 [66] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:11:18,874 [55] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:11:18,876 [55] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:11:18,876 [55] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:11:18,876 [55] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:11:18,877 [55] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:11:19,485 [55] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:11:19,485 [55] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:11:19,487 [55] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:11:47,284 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:11:47,323 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:11:47,329 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:11:47,330 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:11:47,734 [112] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:47,755 [112] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:11:48,321 [112] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:11:49,028 [112] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:49,029 [112] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:11:50,050 [70] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:11:54,596 [112] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:54,597 [112] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:11:54,625 [112] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:11:54,626 [112] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:11:54,626 [112] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:11:54,940 [55] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:11:55,389 [66] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:11:55,395 [66] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:11:55,395 [66] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:11:55,396 [66] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:11:55,397 [66] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:11:57,634 [94] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:11:57,635 [94] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:11:57,666 [94] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:16:46,528 [64] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:16:46,529 [64] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:16:46,599 [64] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:16:46,601 [64] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:16:46,601 [64] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:16:47,286 [63] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:16:50,461 [58] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:16:50,461 [58] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:16:50,472 [58] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:16:50,473 [58] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:16:50,473 [58] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:16:50,954 [70] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:16:59,608 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:16:59,609 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:16:59,626 [106] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:16:59,628 [106] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:16:59,629 [106] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:17:00,111 [53] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:17:07,950 [58] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:17:07,951 [58] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:17:07,951 [58] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:17:07,951 [58] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:17:07,951 [58] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:17:08,413 [64] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:17:08,414 [64] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:17:08,415 [64] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:17:42,326 [63] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:17:42,327 [63] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:17:42,357 [63] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:17:42,358 [63] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:17:42,358 [63] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:17:42,692 [64] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:17:43,304 [106] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:17:43,306 [106] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:17:43,306 [106] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:17:43,307 [106] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:17:43,307 [106] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:17:43,916 [73] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:17:43,916 [73] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:17:43,917 [73] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:17:56,448 [56] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:17:56,448 [56] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:17:56,461 [56] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:17:56,462 [56] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:17:56,462 [56] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:17:56,594 [106] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:17:56,871 [96] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:17:56,873 [96] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:17:56,873 [96] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:17:56,873 [96] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:17:56,873 [96] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:17:57,234 [73] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:17:57,234 [73] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:17:57,235 [73] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:18:58,956 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:18:58,991 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:18:58,997 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:18:58,998 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:18:59,449 [55] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:18:59,478 [55] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:19:00,135 [55] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:19:00,791 [55] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:19:00,791 [55] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:19:01,806 [55] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:20:24,921 [60] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:20:24,921 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:20:24,929 [60] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:20:24,930 [60] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:20:24,930 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:20:25,170 [112] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:20:52,366 [66] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:20:52,376 [66] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:20:52,378 [66] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:20:52,379 [66] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:20:52,380 [66] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:20:55,682 [52] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:20:55,684 [52] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:20:55,746 [52] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:21:54,272 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:21:54,304 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:21:54,311 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:21:54,312 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:21:54,703 [71] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:21:54,728 [71] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:21:55,347 [71] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:21:55,972 [71] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:21:55,973 [71] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:21:57,151 [95] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:21:59,748 [52] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:21:59,758 [52] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:21:59,759 [52] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:21:59,760 [52] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:21:59,761 [52] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:22:02,893 [57] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:22:02,894 [57] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:22:02,964 [57] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:22:54,486 [49] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:22:54,492 [49] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:22:54,493 [49] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-28 23:22:54,497 [49] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:22:54,507 [49] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:22:54,507 [49] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:22:54,509 [49] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:22:54,509 [49] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:22:54,510 [49] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:22:54,510 [49] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:22:54,512 [49] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:22:54,512 [49] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:22:54,709 [49] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:22:54,710 [49] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:22:54,711 [49] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:22:54,711 [49] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:22:54,712 [49] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:22:54,712 [49] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:22:54,713 [49] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:22:54,713 [49] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:22:54,715 [49] DEBUG Servicesys_code - 获取字段
2013-11-28 23:22:54,715 [49] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:22:54,717 [49] DEBUG Servicesys_code - 获取字段
2013-11-28 23:22:54,717 [49] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:22:57,339 [49] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:22:57,339 [49] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 23:22:58,223 [57] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:22:58,223 [57] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-28 23:25:26,230 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:25:26,244 [99] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:25:26,247 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:25:26,247 [99] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-28 23:25:26,504 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:25:26,519 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:25:27,126 [49] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:25:27,662 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:25:27,662 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:25:28,889 [95] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:25:33,677 [71] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:25:33,684 [71] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:25:33,686 [71] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:25:33,686 [71] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:25:33,687 [71] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:25:35,229 [52] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:25:35,230 [52] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:25:35,262 [52] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:25:47,470 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:25:47,470 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:25:47,477 [49] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:25:47,478 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:25:47,478 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:25:47,799 [57] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:25:48,222 [96] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:25:48,223 [96] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:25:48,224 [96] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:25:48,224 [96] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:25:48,224 [96] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:25:48,812 [106] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:25:48,812 [106] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:25:48,814 [106] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:31:21,485 [62] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:31:21,485 [62] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:31:21,504 [62] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:31:21,505 [62] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:31:21,505 [62] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:31:21,659 [94] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:31:22,031 [65] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:31:22,032 [65] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:31:22,033 [65] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:31:22,033 [65] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:31:22,033 [65] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:31:22,579 [95] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:31:22,579 [95] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:31:22,581 [95] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:34:24,919 [112] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:34:24,919 [112] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:34:24,926 [112] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:34:24,927 [112] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:34:24,927 [112] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:34:25,465 [49] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:34:28,491 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:34:28,492 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:34:28,499 [49] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:34:28,500 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:34:28,500 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:34:28,706 [94] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:34:35,993 [52] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2013-11-28 23:34:36,004 [52] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:34:36,005 [52] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:34:36,006 [52] DEBUG Servicemms_buildPart - 获取动态列表
2013-11-28 23:34:36,007 [52] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-11-28 23:34:36,855 [59] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-11-28 23:34:36,979 [59] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney0                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-11-28 23:34:37,134 [59] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2013-11-28 23:34:46,677 [59] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/sendsummary')
2013-11-28 23:34:46,682 [59] DEBUG Servicemms_buildPart - 获取动态列表
2013-11-28 23:34:46,682 [59] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-11-28 23:34:48,256 [60] DEBUG Mms - 
Select T.*
From
( 
	--发料单
    Select mms_send.BillNo As SrcBillNo,'send' As SrcBillType,mms_send.SendDate As TakeDate,
		mms_send.PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_sendDetail.Unit,mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,
		mms_sendDetail.Remark,'' as name,(mms_send.BillNo+'send'+mms_sendDetail.MaterialCode) as id
    From mms_sendDetail
    Left join mms_send ON mms_sendDetail.BillNo=mms_send.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_send.PickUnit
    left join mms_material on mms_material.MaterialCode=mms_sendDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_send.BuildPartCode
    Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

    UNION

    --直入直出
    Select mms_direct.BillNo As SrcBillNo,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
		mms_direct.PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_directDetail.Unit,mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,
		mms_directDetail.Remark,'' as name,(mms_direct.BillNo+'direct'+mms_directDetail.MaterialCode) as id
    From mms_directDetail
    Left join mms_direct ON mms_directDetail.BillNo=mms_direct.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_direct.PickUnit
    left join mms_material on mms_material.MaterialCode=mms_directDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_direct.BuildPartCode
    Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

    UNION

    --退库
     Select mms_refund.BillNo As SrcBillNo,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
		mms_refund.RefundUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,NULL AS BuildPartName,
	    mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_refundDetail.Unit,mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,
		mms_refundDetail.Remark,'' as name,(mms_refund.BillNo+'refund'+mms_refundDetail.MaterialCode) as id
    From mms_refundDetail
    Left join mms_refund ON mms_refundDetail.BillNo=mms_refund.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_refund.RefundUnit
    left join mms_material on mms_material.MaterialCode=mms_refundDetail.MaterialCode
    Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

    UNION

    --租赁进场
    Select mms_rentin.BillNo As SrcBillNo,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
		mms_rentinDetail.UseUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_rentinDetail.Unit,mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,
		mms_rentinDetail.Remark,'' as name,(mms_rentin.BillNo+'rentin'+mms_rentinDetail.MaterialCode) as id
    From mms_rentinDetail
    Left join mms_rentin ON mms_rentinDetail.BillNo=mms_rentin.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
    left join mms_material on mms_material.MaterialCode=mms_rentinDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_rentin.BuildPartCode
    Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

    UNION

	--报损
	Select mms_lossReport.BillNo As SrcBillNo,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
		'其他' as PickUnit,'其他' as PickUnitName,NULL AS BuildPartName,
	    mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_lossReportDetail.Unit,mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,
		mms_lossReportDetail.Remark,'' as name,(mms_lossReport.BillNo+'lossReport'+mms_lossReportDetail.MaterialCode) as id
    From mms_lossReportDetail
    Left join mms_lossReport ON mms_lossReportDetail.BillNo=mms_lossReport.BillNo
    left join mms_material on mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
    Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'

    UNION

	--调拨
	Select mms_transfer.BillNo As SrcBillNo,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
		mms_transfer.ReceiveUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,NULL AS BuildPartName,
	    mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_transferDetail.Unit,mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,
		mms_transferDetail.Remark,'' as name,(mms_transfer.BillNo+'transfer'+mms_transferDetail.MaterialCode) as id
    From mms_transferDetail
    Left join mms_transfer ON mms_transferDetail.BillNo=mms_transfer.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
    left join mms_material on mms_material.MaterialCode=mms_transferDetail.MaterialCode
    Where mms_transfer.ApproveState='passed'  And  mms_transfer.ProjectCode='201306030001'

) as T
Where 1=1 

                
2013-11-28 23:35:07,518 [63] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:35:07,520 [63] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:35:07,520 [63] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:35:07,520 [63] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:07,521 [63] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:35:09,484 [63] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:35:09,484 [63] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:35:09,486 [63] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:35:14,894 [58] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:35:14,904 [58] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:35:14,906 [58] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-28 23:35:14,913 [58] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:35:14,934 [58] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:14,934 [58] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:14,936 [58] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:14,936 [58] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:14,939 [58] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:14,940 [58] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:14,943 [58] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:14,943 [58] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:15,187 [58] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:15,187 [58] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:35:15,188 [58] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:15,189 [58] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:35:15,189 [58] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:15,189 [58] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:35:15,190 [58] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:35:15,191 [58] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:35:15,192 [58] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:15,192 [58] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:15,193 [58] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:15,193 [58] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:18,323 [52] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:35:18,323 [52] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2013-11-28 23:35:19,198 [91] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:35:19,198 [91] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-28 23:35:29,554 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:35:29,555 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:35:29,564 [49] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:35:29,565 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:35:29,565 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:35:29,896 [63] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:35:30,659 [91] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:35:30,660 [91] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:35:30,660 [91] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-28 23:35:30,661 [91] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:35:30,661 [91] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:30,661 [91] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:30,661 [91] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:30,661 [91] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:30,661 [91] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:30,661 [91] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:30,662 [91] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:30,662 [91] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:30,662 [91] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:30,662 [91] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:35:30,662 [91] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:30,662 [91] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:35:30,663 [91] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:30,663 [91] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:35:30,663 [91] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:35:30,663 [91] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:35:30,663 [91] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:30,663 [91] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:30,664 [91] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:30,664 [91] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:30,781 [63] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:35:30,783 [63] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:35:30,783 [63] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-28 23:35:30,784 [63] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:35:30,784 [63] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:30,784 [63] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:30,785 [63] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:30,785 [63] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:30,785 [63] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:30,785 [63] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:30,785 [63] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:30,786 [63] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:30,786 [63] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:30,786 [63] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:35:30,787 [63] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:30,787 [63] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:35:30,787 [63] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:30,787 [63] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:35:30,788 [63] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:35:30,788 [63] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:35:30,788 [63] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:30,788 [63] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:30,789 [63] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:30,789 [63] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:36,181 [52] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:35:36,181 [52] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-28 23:35:36,202 [63] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:35:36,202 [63] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-28 23:35:47,147 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:35:47,147 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:35:47,155 [49] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:35:47,156 [49] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:35:47,156 [49] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:35:49,266 [49] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:35:49,913 [91] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:35:49,914 [91] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:35:49,914 [91] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-28 23:35:49,914 [91] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:35:49,914 [91] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:49,915 [91] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:49,915 [91] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:49,915 [91] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:49,915 [91] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:49,915 [91] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:49,915 [91] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:49,916 [91] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:49,916 [91] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:49,916 [91] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:35:49,916 [91] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:49,916 [91] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:35:49,917 [91] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:49,917 [91] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:35:49,917 [91] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:35:49,917 [91] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:35:49,917 [91] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:49,918 [91] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:49,918 [91] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:49,918 [91] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:49,981 [95] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:35:49,982 [95] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:35:49,982 [95] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-28 23:35:49,983 [95] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:35:49,983 [95] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:49,983 [95] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:49,983 [95] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:49,983 [95] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:49,984 [95] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:49,984 [95] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:35:49,984 [95] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:35:49,984 [95] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:35:49,984 [95] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:49,984 [95] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:35:49,985 [95] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:49,985 [95] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:35:49,985 [95] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:35:49,985 [95] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:35:49,986 [95] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:35:49,986 [95] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:35:49,986 [95] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:49,986 [95] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:49,986 [95] DEBUG Servicesys_code - 获取字段
2013-11-28 23:35:49,987 [95] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:35:51,854 [49] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:35:51,854 [49] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2013-11-28 23:35:53,633 [59] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:35:53,633 [59] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2013-11-28 23:35:54,676 [95] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:35:54,676 [95] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-28 23:35:54,711 [49] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:35:54,711 [49] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-28 23:36:20,081 [52] DEBUG Servicemms_materialType - 获取动态列表
2013-11-28 23:36:20,082 [52] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-28 23:36:20,156 [94] DEBUG Servicemms_material - 获取动态列表
2013-11-28 23:36:20,157 [94] DEBUG Mms - select top 10 A.* from mms_material A order by A.MaterialCode
2013-11-28 23:36:20,180 [94] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-28 23:39:57,514 [112] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:39:57,514 [112] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-28 23:39:57,515 [112] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:39:57,515 [112] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:39:57,515 [112] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:39:57,515 [112] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:39:57,515 [112] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:39:57,515 [112] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:39:57,515 [112] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:39:57,516 [112] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:39:57,516 [112] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:39:57,660 [64] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:39:57,660 [64] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-28 23:39:57,762 [102] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:39:57,762 [102] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 23:40:07,781 [60] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:40:07,782 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:40:07,802 [60] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:40:07,804 [60] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:40:07,804 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:40:08,140 [102] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:40:08,424 [59] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:40:08,426 [59] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:40:08,426 [59] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-28 23:40:08,427 [59] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:40:08,427 [59] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:40:08,427 [59] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:40:08,427 [59] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:40:08,427 [59] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:40:08,427 [59] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:40:08,427 [59] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:40:08,428 [59] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:40:08,428 [59] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:40:08,428 [59] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:40:08,428 [59] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:40:08,428 [59] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:40:08,429 [59] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:40:08,429 [59] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:40:08,429 [59] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:40:08,429 [59] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:40:08,429 [59] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:40:08,429 [59] DEBUG Servicesys_code - 获取字段
2013-11-28 23:40:08,430 [59] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:40:08,430 [59] DEBUG Servicesys_code - 获取字段
2013-11-28 23:40:08,430 [59] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:40:08,631 [60] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:40:08,632 [60] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:40:08,632 [60] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-28 23:40:08,632 [60] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:40:08,632 [60] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:40:08,633 [60] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:40:08,633 [60] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:40:08,633 [60] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:40:08,633 [60] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:40:08,633 [60] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:40:08,634 [60] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:40:08,634 [60] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:40:08,634 [60] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:40:08,634 [60] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:40:08,634 [60] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:40:08,635 [60] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:40:08,635 [60] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:40:08,635 [60] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:40:08,635 [60] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:40:08,635 [60] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:40:08,636 [60] DEBUG Servicesys_code - 获取字段
2013-11-28 23:40:08,636 [60] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:40:08,636 [60] DEBUG Servicesys_code - 获取字段
2013-11-28 23:40:08,636 [60] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:40:09,354 [59] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:40:09,354 [59] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 23:40:09,906 [60] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:40:09,906 [60] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 23:40:10,590 [112] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:40:10,590 [112] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-28 23:41:34,278 [94] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:41:34,278 [94] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:41:34,285 [94] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:41:34,286 [94] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:41:34,287 [94] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:41:34,480 [94] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:50:32,540 [75] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:50:32,543 [75] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:50:32,553 [75] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:50:32,554 [75] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:50:32,555 [75] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:50:33,048 [29] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:50:41,532 [16] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:50:41,532 [16] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:50:41,553 [16] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:50:41,553 [16] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:50:41,554 [16] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:50:41,752 [42] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:51:09,742 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:51:09,742 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:51:09,762 [32] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:51:09,763 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:51:09,764 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:51:10,651 [23] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:51:28,438 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:51:28,440 [6] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:51:28,444 [6] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:51:28,445 [6] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:51:28,445 [6] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:51:30,422 [13] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:51:30,423 [13] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:51:30,424 [13] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:51:35,504 [33] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:51:35,505 [33] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:51:35,505 [33] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-28 23:51:35,505 [33] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:51:35,505 [33] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:51:35,506 [33] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:51:35,506 [33] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:51:35,506 [33] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:51:35,507 [33] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:51:35,507 [33] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:51:35,508 [33] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:51:35,508 [33] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:51:35,508 [33] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:51:35,508 [33] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:51:35,509 [33] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:51:35,509 [33] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:51:35,509 [33] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:51:35,509 [33] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:51:35,509 [33] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:51:35,510 [33] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:51:35,510 [33] DEBUG Servicesys_code - 获取字段
2013-11-28 23:51:35,510 [33] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:51:35,510 [33] DEBUG Servicesys_code - 获取字段
2013-11-28 23:51:35,510 [33] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:51:37,145 [13] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:51:37,145 [13] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 23:51:37,997 [13] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:51:37,998 [13] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-28 23:51:39,399 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:51:39,399 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:51:39,413 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:51:39,415 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:51:39,415 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:51:39,925 [17] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:51:48,150 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:51:48,152 [13] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:51:48,153 [13] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-28 23:51:48,153 [13] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:51:48,154 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:51:48,154 [13] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:51:48,154 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:51:48,154 [13] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:51:48,155 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:51:48,155 [13] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:51:48,155 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:51:48,156 [13] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:51:48,156 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:51:48,156 [13] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:51:48,157 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:51:48,157 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:51:48,158 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:51:48,158 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:51:48,159 [13] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:51:48,159 [13] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:51:48,159 [13] DEBUG Servicesys_code - 获取字段
2013-11-28 23:51:48,160 [13] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:51:48,160 [13] DEBUG Servicesys_code - 获取字段
2013-11-28 23:51:48,160 [13] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:51:51,462 [33] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:51:51,462 [33] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-28 23:52:05,784 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:52:05,787 [9] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:52:05,787 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:52:05,788 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:52:05,788 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:52:07,782 [13] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:52:07,783 [13] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:52:07,785 [13] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:52:13,297 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:52:13,298 [13] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:52:13,298 [13] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-28 23:52:13,299 [13] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:52:13,299 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:52:13,299 [13] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:52:13,299 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:52:13,299 [13] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:52:13,300 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:52:13,300 [13] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:52:13,300 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:52:13,300 [13] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:52:13,300 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:52:13,300 [13] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:52:13,301 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:52:13,301 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:52:13,301 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:52:13,301 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:52:13,301 [13] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:52:13,301 [13] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:52:13,302 [13] DEBUG Servicesys_code - 获取字段
2013-11-28 23:52:13,302 [13] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:52:13,302 [13] DEBUG Servicesys_code - 获取字段
2013-11-28 23:52:13,302 [13] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:52:15,926 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:52:15,926 [12] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-28 23:52:19,137 [25] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:52:19,137 [25] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:52:19,152 [25] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:52:19,152 [25] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:52:19,153 [25] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:52:19,449 [32] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:52:59,530 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:52:59,533 [9] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:52:59,533 [9] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-28 23:52:59,534 [9] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:52:59,534 [9] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:52:59,535 [9] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:52:59,535 [9] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:52:59,535 [9] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:52:59,536 [9] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:52:59,536 [9] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:52:59,536 [9] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:52:59,537 [9] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:52:59,537 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:52:59,537 [9] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:52:59,538 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:52:59,538 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:52:59,539 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:52:59,539 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:52:59,540 [9] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:52:59,540 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:52:59,541 [9] DEBUG Servicesys_code - 获取字段
2013-11-28 23:52:59,541 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:52:59,541 [9] DEBUG Servicesys_code - 获取字段
2013-11-28 23:52:59,542 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:53:02,327 [29] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:53:02,327 [29] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-28 23:55:56,370 [112] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:55:56,371 [112] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:55:56,389 [112] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:55:56,390 [112] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:55:56,390 [112] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:55:56,870 [38] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:55:57,479 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:55:57,480 [13] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:55:57,481 [13] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-28 23:55:57,481 [13] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:55:57,481 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:55:57,481 [13] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:55:57,481 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:55:57,481 [13] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:55:57,482 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:55:57,482 [13] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:55:57,482 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:55:57,482 [13] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:55:57,482 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:55:57,482 [13] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:55:57,483 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:55:57,483 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:55:57,483 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:55:57,483 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:55:57,483 [13] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:55:57,483 [13] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:55:57,484 [13] DEBUG Servicesys_code - 获取字段
2013-11-28 23:55:57,484 [13] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:55:57,484 [13] DEBUG Servicesys_code - 获取字段
2013-11-28 23:55:57,484 [13] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:56:00,002 [40] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:56:00,002 [40] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-28 23:56:18,460 [29] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:56:18,461 [29] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:56:18,484 [29] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:56:18,485 [29] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:56:18,485 [29] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:56:18,798 [14] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:56:19,215 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:56:19,216 [13] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:56:19,216 [13] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-28 23:56:19,217 [13] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:56:19,217 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:56:19,217 [13] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:56:19,217 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:56:19,217 [13] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:56:19,217 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:56:19,217 [13] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:56:19,217 [13] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:56:19,217 [13] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:56:19,218 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:56:19,218 [13] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:56:19,218 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:56:19,218 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:56:19,218 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:56:19,218 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:56:19,219 [13] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:56:19,219 [13] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:56:19,219 [13] DEBUG Servicesys_code - 获取字段
2013-11-28 23:56:19,219 [13] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:56:19,219 [13] DEBUG Servicesys_code - 获取字段
2013-11-28 23:56:19,219 [13] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:56:19,834 [36] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:56:19,834 [36] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 23:56:20,121 [40] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:56:20,121 [40] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-28 23:56:27,230 [13] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:56:27,231 [13] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-28 23:56:27,235 [13] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-28 23:56:37,157 [13] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:56:37,158 [13] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2013-11-28 23:56:38,733 [37] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:56:38,734 [37] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-28 23:56:38,737 [37] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-28 23:57:32,698 [16] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:57:36,514 [9] DEBUG Sys - update sys_userSetting set [SettingValue] = '20' where [UserCode] = 'admin' and [SettingCode] = 'gridrows'
2013-11-28 23:57:36,514 [9] DEBUG Sys - update sys_userSetting set [SettingValue] = '/mms/home/desktop' where [UserCode] = 'admin' and [SettingCode] = 'homeTabUrl'
2013-11-28 23:57:36,515 [9] DEBUG Sys - update sys_userSetting set [SettingValue] = '我的桌面' where [UserCode] = 'admin' and [SettingCode] = 'homeTabTitle'
2013-11-28 23:57:36,515 [9] DEBUG Sys - update sys_userSetting set [SettingValue] = '10' where [UserCode] = 'admin' and [SettingCode] = 'maxTabCount'
2013-11-28 23:57:36,515 [9] DEBUG Sys - update sys_userSetting set [SettingValue] = 'accordion' where [UserCode] = 'admin' and [SettingCode] = 'navigation'
2013-11-28 23:57:36,516 [9] DEBUG Sys - update sys_userSetting set [SettingValue] = 'zh_CN' where [UserCode] = 'admin' and [SettingCode] = 'locale'
2013-11-28 23:57:36,516 [9] DEBUG Sys - update sys_userSetting set [SettingValue] = 'black' where [UserCode] = 'admin' and [SettingCode] = 'theme'
2013-11-28 23:57:43,203 [39] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:57:43,203 [39] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-28 23:57:43,228 [39] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-28 23:57:43,691 [39] DEBUG Servicesys_parameter - 获取字段
2013-11-28 23:57:43,692 [39] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-28 23:57:43,985 [40] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-28 23:57:47,242 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-28 23:57:47,244 [14] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:57:47,244 [14] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:57:47,244 [14] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:57:47,244 [14] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:57:47,649 [29] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:57:47,649 [29] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-28 23:57:47,651 [29] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-28 23:58:28,875 [39] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-28 23:58:28,876 [39] DEBUG Servicemms_receive - 获取实体对象
2013-11-28 23:58:28,876 [39] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-28 23:58:28,877 [39] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-28 23:58:28,877 [39] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:58:28,877 [39] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-28 23:58:28,877 [39] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:58:28,877 [39] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:58:28,878 [39] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:58:28,878 [39] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-28 23:58:28,880 [39] DEBUG Servicemms_receive - 获取字段
2013-11-28 23:58:28,880 [39] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-28 23:58:28,880 [39] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:58:28,880 [39] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-28 23:58:28,881 [39] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:58:28,881 [39] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-28 23:58:28,881 [39] DEBUG Servicesys_code - 获取动态列表
2013-11-28 23:58:28,881 [39] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-28 23:58:28,881 [39] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-28 23:58:28,882 [39] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-28 23:58:28,882 [39] DEBUG Servicesys_code - 获取字段
2013-11-28 23:58:28,882 [39] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:58:28,882 [39] DEBUG Servicesys_code - 获取字段
2013-11-28 23:58:28,882 [39] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-28 23:58:30,197 [16] DEBUG ServiceModelBase - 获取动态列表
2013-11-28 23:58:30,198 [16] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-28 23:58:30,966 [29] DEBUG Servicemms_receive - 获取动态列表
2013-11-28 23:58:30,967 [29] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
