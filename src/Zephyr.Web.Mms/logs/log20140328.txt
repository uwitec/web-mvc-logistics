2014-03-28 09:26:54,326 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:55,387 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:55,714 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:55,808 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:55,979 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:55,995 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:58,569 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:58,585 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:58,585 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:58,585 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:58,600 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:58,600 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:26:58,865 [8] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:26:58,881 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 09:26:59,209 [8] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:26:59,209 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-28 09:27:06,946 [10] DEBUG Servicesys_user - 获取实体对象
2014-03-28 09:27:06,946 [10] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-28 09:27:07,227 [10] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-28 09:27:07,601 [10] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/28 9:27:07')
2014-03-28 09:27:07,648 [10] DEBUG Servicemms_project - 获取实体对象
2014-03-28 09:27:07,648 [10] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 09:27:07,773 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:27:07,773 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 09:27:07,960 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 09:27:08,413 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:27:08,413 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 09:27:10,138 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 09:27:18,301 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2014-03-28 09:27:18,316 [10] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 09:27:18,316 [10] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 09:27:18,376 [10] DEBUG Servicesys_code - 获取动态列表
2014-03-28 09:27:18,377 [10] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-28 09:27:20,107 [11] DEBUG Servicemms_receive - 获取动态列表
2014-03-28 09:27:20,107 [11] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 09:27:20,266 [11] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 09:31:13,716 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:31:13,731 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:31:13,747 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:31:13,747 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:31:13,747 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:31:13,747 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 09:31:13,950 [11] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:31:13,965 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 09:31:14,121 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 09:31:14,340 [11] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:31:14,340 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 09:31:15,116 [10] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 09:31:58,548 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 09:31:58,593 [11] DEBUG Servicesys_code - 获取动态列表
2014-03-28 09:31:58,594 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 09:31:59,533 [10] DEBUG Servicebase_line - 获取动态列表
2014-03-28 09:31:59,534 [10] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 09:31:59,649 [10] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 09:32:05,563 [11] DEBUG Servicebase_line - 获取动态列表
2014-03-28 09:32:05,563 [11] DEBUG Trade - select top 20 * from base_line where bizlist like '%111%' order by keyid
2014-03-28 09:32:05,751 [11] DEBUG Trade - select count(*) from ( select * from base_line where bizlist like '%111%' ) tb_temp
2014-03-28 09:32:08,261 [11] DEBUG Servicebase_line - 获取动态列表
2014-03-28 09:32:08,262 [11] DEBUG Trade - select top 20 * from base_line where bizlist like '%112%' order by keyid
2014-03-28 09:32:08,284 [11] DEBUG Trade - select count(*) from ( select * from base_line where bizlist like '%112%' ) tb_temp
2014-03-28 09:32:10,761 [14] DEBUG Servicebase_line - 获取动态列表
2014-03-28 09:32:10,762 [14] DEBUG Trade - select top 20 * from base_line where bizlist like '%111%' order by keyid
2014-03-28 09:32:10,764 [14] DEBUG Trade - select count(*) from ( select * from base_line where bizlist like '%111%' ) tb_temp
2014-03-28 09:32:34,535 [14] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:32:34,535 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 09:32:34,550 [14] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 09:32:34,550 [14] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:32:34,550 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 09:32:34,846 [11] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 09:32:42,391 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 09:32:42,391 [10] DEBUG Servicesys_code - 获取动态列表
2014-03-28 09:32:42,391 [10] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 09:32:43,092 [14] DEBUG Servicebase_line - 获取动态列表
2014-03-28 09:32:43,092 [14] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 09:32:43,093 [14] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 09:32:59,807 [9] DEBUG Servicebase_line - 获取动态列表
2014-03-28 09:32:59,807 [9] DEBUG Trade - select top 20 * from base_line where bizlist like '%111%' order by keyid
2014-03-28 09:32:59,810 [9] DEBUG Trade - select count(*) from ( select * from base_line where bizlist like '%111%' ) tb_temp
2014-03-28 09:40:54,544 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:40:54,549 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 09:40:54,557 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 09:40:54,558 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:40:54,558 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 09:40:54,880 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 09:40:57,893 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 09:40:57,905 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 09:40:57,906 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 09:40:58,741 [7] DEBUG Servicebase_line - 获取动态列表
2014-03-28 09:40:58,744 [7] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 09:40:58,744 [7] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 09:41:00,322 [7] DEBUG Servicebase_line - 获取新主键
2014-03-28 09:44:17,724 [15] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:44:17,724 [15] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 09:44:17,733 [15] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 09:44:17,734 [15] DEBUG Servicesys_parameter - 获取字段
2014-03-28 09:44:17,734 [15] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 09:44:18,055 [8] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 09:44:22,365 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 09:44:22,378 [8] DEBUG Servicesys_code - 获取动态列表
2014-03-28 09:44:22,379 [8] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 09:44:23,193 [15] DEBUG Servicebase_line - 获取动态列表
2014-03-28 09:44:23,194 [15] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 09:44:23,194 [15] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 09:44:24,706 [17] DEBUG Servicebase_line - 获取新主键
2014-03-28 09:58:01,787 [21] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:09:43,476 [14] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:09:43,554 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:09:43,563 [14] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:09:43,564 [14] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:09:43,564 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:09:43,880 [16] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:09:47,292 [16] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:09:47,296 [16] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:09:47,297 [16] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:09:48,196 [8] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:09:48,199 [8] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:09:48,199 [8] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:09:49,818 [8] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:11:23,558 [11] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:11:23,558 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:11:23,569 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:11:23,655 [11] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:11:23,656 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:11:23,984 [16] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:11:27,008 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:11:27,051 [8] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:11:27,052 [8] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:11:27,809 [16] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:11:27,809 [16] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:11:27,810 [16] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:11:29,386 [16] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:21:35,394 [13] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:21:35,417 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:21:36,231 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:21:36,353 [13] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:21:36,354 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:21:36,672 [3] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:21:43,468 [3] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:21:43,482 [3] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:21:43,483 [3] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:21:44,563 [19] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:21:44,596 [19] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:21:44,657 [19] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:21:45,334 [19] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:22:05,632 [3] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:22:05,632 [3] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:22:05,642 [3] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:22:05,645 [3] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:22:05,645 [3] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:22:05,987 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:22:08,545 [19] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:22:08,554 [19] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:22:08,554 [19] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:22:10,374 [3] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:22:10,374 [3] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:22:10,376 [3] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:22:11,010 [19] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:25:37,059 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:25:37,059 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:25:37,071 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:25:37,077 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:25:37,077 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:25:37,427 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:25:41,889 [3] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:25:41,902 [3] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:25:41,903 [3] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:25:42,743 [9] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:25:42,743 [9] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:25:42,745 [9] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:25:43,425 [3] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:26:01,357 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:26:01,359 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:26:01,375 [12] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:26:01,378 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:26:01,378 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:26:01,703 [11] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:26:04,037 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:26:04,038 [11] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:26:04,038 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:26:04,911 [9] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:26:04,911 [9] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:26:04,939 [9] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:26:05,552 [11] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:26:23,930 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:26:23,930 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:26:23,959 [12] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:26:23,961 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:26:23,961 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:26:24,296 [12] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:26:27,342 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:26:27,363 [11] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:26:27,363 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:26:28,198 [12] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:26:28,198 [12] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:26:28,201 [12] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:26:29,083 [11] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:55:09,691 [34] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:55:09,693 [34] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:55:09,703 [34] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:55:09,708 [34] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:55:09,708 [34] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:55:10,037 [22] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:55:18,014 [36] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:55:18,027 [36] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:55:18,027 [36] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:55:18,918 [36] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:55:18,925 [36] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:55:18,926 [36] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:55:21,404 [36] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:55:23,004 [36] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:56:43,766 [36] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:56:43,766 [36] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 10:56:43,778 [36] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 10:56:43,782 [36] DEBUG Servicesys_parameter - 获取字段
2014-03-28 10:56:43,782 [36] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 10:56:44,125 [32] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 10:56:46,406 [34] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 10:56:46,412 [34] DEBUG Servicesys_code - 获取动态列表
2014-03-28 10:56:46,413 [34] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 10:56:47,196 [32] DEBUG Servicebase_line - 获取动态列表
2014-03-28 10:56:47,197 [32] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 10:56:47,199 [32] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 10:56:48,705 [32] DEBUG Servicebase_line - 获取新主键
2014-03-28 10:56:54,966 [34] DEBUG Servicebase_line - 获取新主键
2014-03-28 11:04:31,310 [33] DEBUG Servicesys_parameter - 获取字段
2014-03-28 11:04:31,318 [33] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 11:04:31,327 [33] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 11:04:31,329 [33] DEBUG Servicesys_parameter - 获取字段
2014-03-28 11:04:31,330 [33] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 11:04:31,659 [31] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 11:04:34,182 [31] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 11:04:34,195 [31] DEBUG Servicesys_code - 获取动态列表
2014-03-28 11:04:34,195 [31] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 11:04:35,693 [33] DEBUG Servicebase_line - 获取新主键
2014-03-28 11:06:56,633 [33] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2014-03-28 11:06:56,761 [33] DEBUG Servicesys_organize - 获取实体列表
2014-03-28 11:06:56,783 [33] DEBUG Sys - select sys_organize.* from sys_organize
2014-03-28 11:11:45,431 [36] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/code/Index','/Sys/code')
2014-03-28 11:11:46,096 [36] DEBUG Servicesys_codeType - 获取动态列表
2014-03-28 11:11:46,096 [36] DEBUG Sys - select sys_codeType.* from sys_codeType order by Seq,CodeType
2014-03-28 11:11:46,199 [32] DEBUG Servicesys_code - 获取实体列表
2014-03-28 11:11:46,202 [32] DEBUG Sys - select top 20 sys_code.* from sys_code order by Seq
2014-03-28 11:11:46,344 [32] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2014-03-28 11:11:47,918 [36] DEBUG Servicesys_code - 获取实体列表
2014-03-28 11:11:47,918 [36] DEBUG Sys - select top 20 sys_code.* from sys_code where CodeType='Sex' order by Seq
2014-03-28 11:11:47,939 [36] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code where CodeType='Sex' ) tb_temp
2014-03-28 11:11:48,714 [31] DEBUG Servicesys_codeType - 获取动态列表
2014-03-28 11:11:48,714 [31] DEBUG Sys - select top 10 sys_codeType.* from sys_codeType order by Seq,CodeType
2014-03-28 11:11:48,716 [31] DEBUG Sys - select count(*) from ( select sys_codeType.* from sys_codeType ) tb_temp
2014-03-28 11:12:36,202 [31] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/project/Index','/Mms/project')
2014-03-28 11:12:36,328 [31] DEBUG Servicemms_project - 获取实体对象
2014-03-28 11:12:36,332 [31] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 11:12:36,521 [31] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 11:12:36,549 [31] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:36,549 [31] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 11:12:36,551 [31] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:36,564 [31] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 11:12:36,586 [31] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:36,586 [31] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 11:12:36,588 [31] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:36,588 [31] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 11:12:36,664 [31] DEBUG Servicesys_code - 获取动态列表
2014-03-28 11:12:36,665 [31] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PartAttr'
2014-03-28 11:12:36,666 [31] DEBUG Servicesys_code - 获取动态列表
2014-03-28 11:12:36,666 [31] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='ImagePart'
2014-03-28 11:12:38,400 [31] DEBUG Servicemms_project - 获取动态列表
2014-03-28 11:12:38,401 [31] DEBUG Mms - select ProjectName as text,ProjectCode as id,ParentCode as pid from mms_project
2014-03-28 11:12:38,552 [32] DEBUG Servicemms_project - 获取实体对象
2014-03-28 11:12:38,552 [32] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 11:12:38,553 [32] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 11:12:38,553 [32] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:38,553 [32] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 11:12:38,553 [32] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:38,553 [32] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 11:12:38,553 [32] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:38,553 [32] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 11:12:38,554 [32] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:38,554 [32] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 11:12:38,580 [36] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 11:12:38,581 [36] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030001'
2014-03-28 11:12:39,395 [32] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 11:12:39,395 [32] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030002'
2014-03-28 11:12:39,397 [36] DEBUG Servicemms_project - 获取实体对象
2014-03-28 11:12:39,463 [36] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030002'
2014-03-28 11:12:39,464 [36] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 11:12:39,464 [36] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:39,464 [36] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode
2014-03-28 11:12:39,465 [36] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:39,465 [36] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030002' and ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 11:12:39,466 [36] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:39,466 [36] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030002' and ProjectCode='201306030002' order by ProjectCode
2014-03-28 11:12:39,468 [36] DEBUG Servicemms_project - 获取字段
2014-03-28 11:12:39,469 [36] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 11:12:41,128 [31] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/warehouse/Index','/Mms/warehouse')
2014-03-28 11:12:41,839 [36] DEBUG Servicemms_project - 获取动态列表
2014-03-28 11:12:41,839 [36] DEBUG Mms - select ProjectName as text,ProjectCode as id,ParentCode as pid from mms_project
2014-03-28 11:12:41,919 [32] DEBUG Servicemms_warehouse - 获取实体列表
2014-03-28 11:12:41,920 [32] DEBUG Mms - select top 20 mms_warehouse.* from mms_warehouse order by WarehouseCode
2014-03-28 11:12:41,970 [32] DEBUG Mms - select count(*) from ( select mms_warehouse.* from mms_warehouse ) tb_temp
2014-03-28 11:12:46,165 [36] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/material/Index','/Mms/material')
2014-03-28 11:12:46,886 [36] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 11:12:46,887 [36] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 11:12:46,897 [32] DEBUG Servicemms_material - 获取实体列表
2014-03-28 11:12:46,898 [32] DEBUG Mms - select top 20 mms_material.* from mms_material order by MaterialCode
2014-03-28 11:12:47,111 [32] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material ) tb_temp
2014-03-28 11:12:49,220 [32] DEBUG Servicemms_material - 获取实体列表
2014-03-28 11:12:49,220 [32] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010103' order by MaterialCode
2014-03-28 11:12:49,270 [32] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010103' ) tb_temp
2014-03-28 11:12:50,120 [36] DEBUG Servicemms_material - 获取实体列表
2014-03-28 11:12:50,120 [36] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010102' order by MaterialCode
2014-03-28 11:12:50,122 [36] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010102' ) tb_temp
2014-03-28 11:12:51,150 [32] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 11:12:51,151 [32] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 11:13:20,311 [31] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 11:13:20,311 [31] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 11:13:46,710 [31] DEBUG Servicemms_material - 编辑记录
2014-03-28 11:13:46,870 [31] DEBUG Mms - select mms_materialType.* from mms_materialType where MaterialType='c2b2908e-a5ce-4ccf-938a-259a0f62dddc'
2014-03-28 11:13:46,922 [31] DEBUG Mms - insert into mms_materialType([MaterialType],[MaterialTypeName],[ParentCode],[Type],[Remark],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('c2b2908e-a5ce-4ccf-938a-259a0f62dddc','板材','','','','管理员','2014/3/28 11:13:46','管理员','2014/3/28 11:13:46')
2014-03-28 11:13:47,493 [31] ERROR Servicemms_material - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 将截断字符串或二进制数据。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<Edit>b__a(RequestWrapper x) 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 66
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 180
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:bddc5b48-054b-4ad9-9e8c-d1f19e7a9e2b
2014-03-28 11:13:48,630 [31] ERROR /api/mms/material/edittype/ - System.Data.SqlClient.SqlException (0x80131904): 将截断字符串或二进制数据。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 70
   在 CallSite.Target(Closure , CallSite , mms_materialService , Object , Object , List`1 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Web.Mms.Controllers.MaterialApiController.EditType(Object data) 位置 f:\lbl\soft\web-mvc-logistics\src\Zephyr.Web.Mms\Areas\Mms\Controllers\MaterialController.cs:行号 88
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:bddc5b48-054b-4ad9-9e8c-d1f19e7a9e2b
2014-03-28 11:14:28,895 [33] DEBUG Servicemms_material - 编辑记录
2014-03-28 11:14:28,897 [33] DEBUG Mms - select mms_materialType.* from mms_materialType where MaterialType='070103'
2014-03-28 11:14:28,898 [33] DEBUG Mms - insert into mms_materialType([MaterialType],[MaterialTypeName],[ParentCode],[Type],[Remark],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('070103','板材','','','','管理员','2014/3/28 11:14:28','管理员','2014/3/28 11:14:28')
2014-03-28 11:14:28,972 [33] DEBUG Mms - select mms_materialType.* from mms_materialType where MaterialType='00'
2014-03-28 11:14:28,979 [33] DEBUG Mms - update mms_materialType set [MaterialTypeName] = '日常资料', [ParentCode] = '', [Type] = '069', [Remark] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/3/28 11:14:28' where [MaterialType] = '00'
2014-03-28 11:14:29,032 [33] DEBUG Mms - select mms_materialType.* from mms_materialType where MaterialType='0702'
2014-03-28 11:14:29,033 [33] DEBUG Mms - update mms_materialType set [MaterialTypeName] = '起子', [ParentCode] = '07', [Type] = '069', [Remark] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/3/28 11:14:29' where [MaterialType] = '0702'
2014-03-28 11:14:29,157 [32] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 11:14:29,158 [32] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 11:14:36,486 [31] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 11:14:36,486 [31] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 11:15:29,708 [36] DEBUG Servicemms_material - 编辑记录
2014-03-28 11:15:29,709 [36] DEBUG Mms - select mms_materialType.* from mms_materialType where MaterialType='070103'
2014-03-28 11:15:29,711 [36] DEBUG Mms - update mms_materialType set [MaterialTypeName] = '板材', [ParentCode] = '0701', [Type] = '', [Remark] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2014/3/28 11:15:29' where [MaterialType] = '070103'
2014-03-28 11:15:29,809 [33] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 11:15:29,809 [33] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 11:15:32,248 [33] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 11:15:32,248 [33] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 11:16:24,978 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2014-03-28 11:16:24,999 [32] DEBUG Servicesys_organize - 获取实体列表
2014-03-28 11:16:24,999 [32] DEBUG Sys - select sys_organize.* from sys_organize
2014-03-28 11:20:45,235 [36] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2014-03-28 11:20:45,655 [31] DEBUG Servicesys_permission - 获取动态列表
2014-03-28 11:20:45,655 [31] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2014-03-28 11:21:08,896 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/log/Index','/Sys/log')
2014-03-28 11:21:09,752 [31] DEBUG Servicesys_loginHistory - 获取实体列表
2014-03-28 11:21:09,754 [32] DEBUG Servicesys_log - 获取实体列表
2014-03-28 11:21:09,755 [31] DEBUG Sys - select top 20 A.* from sys_loginHistory A order by A.ID desc
2014-03-28 11:21:09,766 [32] DEBUG Sys - select top 20 A.* from sys_log A order by A.ID desc
2014-03-28 11:21:09,977 [31] DEBUG Sys - select count(*) from ( select A.* from sys_loginHistory A ) tb_temp
2014-03-28 11:21:10,667 [32] DEBUG Sys - select count(*) from ( select A.* from sys_log A ) tb_temp
2014-03-28 11:21:11,228 [30] DEBUG Servicesys_loginHistory - 获取实体列表
2014-03-28 11:21:11,229 [30] DEBUG Sys - select top 20 A.* from sys_loginHistory A order by A.ID desc
2014-03-28 11:21:11,229 [30] DEBUG Sys - select count(*) from ( select A.* from sys_loginHistory A ) tb_temp
2014-03-28 11:21:13,905 [31] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/parameter/Index','/Sys/parameter')
2014-03-28 11:21:14,202 [30] DEBUG Servicesys_parameter - 获取实体列表
2014-03-28 11:21:14,202 [30] DEBUG Sys - select top 20 sys_parameter.* from sys_parameter order by ParamCode
2014-03-28 11:21:14,211 [30] DEBUG Sys - select count(*) from ( select sys_parameter.* from sys_parameter ) tb_temp
2014-03-28 14:13:22,534 [144] DEBUG Servicesys_parameter - 获取字段
2014-03-28 14:13:22,627 [144] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 14:13:22,839 [144] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 14:13:22,876 [144] DEBUG Servicesys_parameter - 获取字段
2014-03-28 14:13:22,876 [144] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 14:13:23,342 [144] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 14:13:36,371 [144] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2014-03-28 14:13:45,179 [146] DEBUG Trade - SELECT Name as TableName FROM sys.tables order by Name
2014-03-28 14:13:45,294 [79] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2014-03-28 14:13:48,449 [146] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_area')
ORDER BY sys.columns.column_id
2014-03-28 14:14:29,782 [147] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('base_area')
ORDER BY sys.columns.column_id
2014-03-28 14:14:29,797 [147] DEBUG Trade - sp_pkeys 'base_area'
2014-03-28 15:11:39,319 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:39,882 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:40,006 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:40,354 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:40,387 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:40,459 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:41,977 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:11:41,989 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 15:11:42,400 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:11:42,400 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-28 15:11:52,160 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:52,210 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:52,271 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:52,276 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:52,292 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:52,296 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:11:57,911 [5] DEBUG Servicesys_user - 获取实体对象
2014-03-28 15:11:57,922 [5] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-28 15:11:58,371 [5] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-28 15:11:58,664 [5] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/28 15:11:58')
2014-03-28 15:11:58,763 [5] DEBUG Servicemms_project - 获取实体对象
2014-03-28 15:11:58,763 [5] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 15:11:59,104 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:11:59,105 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 15:12:12,856 [6] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 15:12:13,475 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:12:13,475 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 15:12:15,105 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 15:12:36,778 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 15:12:36,969 [13] DEBUG Servicesys_code - 获取动态列表
2014-03-28 15:12:36,970 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 15:13:38,895 [9] DEBUG Servicebase_line - 获取动态列表
2014-03-28 15:13:38,895 [9] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 15:13:39,603 [9] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 15:13:44,305 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:13:44,318 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:13:44,324 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:13:44,324 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:13:44,328 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:13:44,328 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:33:03,604 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:33:03,621 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:33:03,643 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:33:03,646 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:33:03,649 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:33:03,652 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:33:03,923 [20] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:33:03,934 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 15:33:04,242 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 15:33:04,533 [20] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:33:04,533 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 15:33:05,516 [17] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 15:34:51,533 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:34:51,568 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:34:51,617 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:34:51,639 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:34:51,650 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:34:51,654 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:34:52,573 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:34:52,586 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 15:34:59,157 [6] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 15:34:59,608 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:34:59,608 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 15:35:00,499 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 15:35:03,977 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/line/Index','/Trade/line')
2014-03-28 15:35:04,082 [6] DEBUG Servicesys_code - 获取动态列表
2014-03-28 15:35:04,082 [6] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='bizname'
2014-03-28 15:35:48,543 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:35:48,570 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:35:48,602 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:35:48,607 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:35:48,612 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:35:48,617 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:36:00,178 [6] DEBUG Servicebase_line - 获取动态列表
2014-03-28 15:36:00,192 [6] DEBUG Trade - select top 20 * from base_line order by keyid
2014-03-28 15:36:00,313 [6] DEBUG Trade - select count(*) from ( select * from base_line ) tb_temp
2014-03-28 15:56:46,733 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:56:46,776 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:56:46,804 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:56:46,804 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:56:46,810 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:56:46,811 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:56:58,046 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:56:58,056 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 15:56:58,988 [6] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 15:57:01,556 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-28 15:57:01,556 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 15:57:17,052 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:57:17,064 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:57:17,067 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:57:17,067 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:57:17,069 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:57:17,069 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 15:57:17,446 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 15:57:19,049 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 15:57:23,555 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/material/Index','/Mms/material')
2014-03-28 15:57:25,826 [7] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 15:57:25,835 [7] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 15:57:25,864 [6] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:25,867 [6] DEBUG Mms - select top 20 mms_material.* from mms_material order by MaterialCode
2014-03-28 15:57:26,235 [6] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material ) tb_temp
2014-03-28 15:57:29,322 [6] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:29,323 [6] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010101' order by MaterialCode
2014-03-28 15:57:29,359 [6] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010101' ) tb_temp
2014-03-28 15:57:30,456 [6] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:30,457 [6] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010102' order by MaterialCode
2014-03-28 15:57:30,459 [6] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010102' ) tb_temp
2014-03-28 15:57:31,907 [6] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:31,907 [6] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010104' order by MaterialCode
2014-03-28 15:57:31,923 [6] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010104' ) tb_temp
2014-03-28 15:57:33,295 [6] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:33,295 [6] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0101010503' order by MaterialCode
2014-03-28 15:57:33,312 [6] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0101010503' ) tb_temp
2014-03-28 15:57:34,189 [6] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:34,189 [6] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0101010502' order by MaterialCode
2014-03-28 15:57:34,192 [6] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0101010502' ) tb_temp
2014-03-28 15:57:34,902 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:34,902 [7] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010102' order by MaterialCode
2014-03-28 15:57:34,904 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010102' ) tb_temp
2014-03-28 15:57:35,906 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:35,906 [7] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0002' order by MaterialCode
2014-03-28 15:57:35,912 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0002' ) tb_temp
2014-03-28 15:57:36,522 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:36,522 [7] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0001' order by MaterialCode
2014-03-28 15:57:36,525 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0001' ) tb_temp
2014-03-28 15:57:37,705 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:37,705 [7] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010103' order by MaterialCode
2014-03-28 15:57:37,717 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010103' ) tb_temp
2014-03-28 15:57:38,421 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:38,421 [7] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0101010503' order by MaterialCode
2014-03-28 15:57:38,423 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0101010503' ) tb_temp
2014-03-28 15:57:38,975 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:38,975 [7] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0101010502' order by MaterialCode
2014-03-28 15:57:38,976 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0101010502' ) tb_temp
2014-03-28 15:57:39,688 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:39,689 [7] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010204' order by MaterialCode
2014-03-28 15:57:39,696 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010204' ) tb_temp
2014-03-28 15:57:40,107 [6] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:57:40,107 [6] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010202' order by MaterialCode
2014-03-28 15:57:40,123 [6] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010202' ) tb_temp
2014-03-28 15:57:45,631 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2014-03-28 15:57:45,693 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 15:57:45,694 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 15:57:45,801 [7] DEBUG Servicemms_buildPart - 获取动态列表
2014-03-28 15:57:45,801 [7] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2014-03-28 15:57:46,618 [6] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2014-03-28 15:57:47,462 [6] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='北京士兴钢结构有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='北京士兴钢结构有限公司' then Money else 0 end),0) as PickUnitMoney0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum1 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney1                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2014-03-28 15:57:47,752 [6] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2014-03-28 15:57:49,540 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/receivesummary')
2014-03-28 15:57:49,896 [6] DEBUG Mms - 
Select T.*
From
( 
    --收料单
    Select mms_receive.BillNo As SrcBillNo,'receive' As SrcBillType,mms_receive.ContractCode As ContractCode,
	    mms_receive.SupplierCode,mms_receive.OriginalNum,mms_receive.ReceiveDate As TakeDate,
	    mms_receiveDetail.MaterialCode,mms_receiveDetail.Unit,mms_receiveDetail.UnitPrice,
	    mms_receiveDetail.Num,mms_receiveDetail.Money,mms_receiveDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_receive.BillNo+'receive'+mms_receiveDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_receiveDetail
    Left join mms_receive ON mms_receiveDetail.BillNo=mms_receive.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_receive.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_receiveDetail.MaterialCode
    Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

    UNION

    --直入直出
    Select mms_direct.BillNo As SrcBillNo,'direct' As SrcBillType,mms_direct.ContractCode As ContractCode,
	    mms_direct.SupplierCode,mms_direct.OriginalNum,mms_direct.ArriveDate As TakeDate,
	    mms_directDetail.MaterialCode,mms_directDetail.Unit,mms_directDetail.UnitPrice,
	    mms_directDetail.Num,mms_directDetail.Money,mms_directDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_direct.BillNo+'direct'+mms_directDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_directDetail
    Left join mms_direct ON mms_directDetail.BillNo=mms_direct.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_direct.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_directDetail.MaterialCode
    Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

    UNION

    --退货
    Select mms_return.BillNo As SrcBillNo,'return' As SrcBillType,mms_return.ContractCode As ContractCode,
	    mms_return.SupplierCode,'' AS OriginalNum,mms_return.ReturnDate As TakeDate,
	    mms_returnDetail.MaterialCode,mms_returnDetail.Unit,mms_returnDetail.UnitPrice,
	    -mms_returnDetail.Num,-mms_returnDetail.Money,mms_returnDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_return.BillNo+'return'+mms_returnDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_returnDetail
    Left join mms_return ON mms_returnDetail.BillNo=mms_return.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_return.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_returnDetail.MaterialCode
    Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

    UNION

    --租赁进场
    Select mms_rentIn.BillNo As SrcBillNo,'rentin' As SrcBillType,mms_rentIn.ContractCode As ContractCode,
	    mms_rentIn.SupplierCode,'' as OriginalNum,mms_rentIn.RentInDate As TakeDate,
	    mms_rentInDetail.MaterialCode,mms_rentInDetail.Unit,mms_rentInDetail.UnitPrice,
	    mms_rentInDetail.Num,'0' as Money,mms_rentInDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_rentIn.BillNo+'rentIn'+mms_rentInDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_rentInDetail
    Left join mms_rentIn ON mms_rentInDetail.BillNo=mms_rentIn.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_rentIn.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_rentInDetail.MaterialCode
    Where mms_rentIn.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'
) as T
Where 1=1 
                
2014-03-28 15:57:50,051 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/receivesummary')
2014-03-28 15:57:51,692 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/sendsummary')
2014-03-28 15:57:51,700 [6] DEBUG Servicemms_buildPart - 获取动态列表
2014-03-28 15:57:51,701 [6] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2014-03-28 15:57:52,055 [6] DEBUG Mms - 
Select T.*
From
( 
	--发料单
    Select mms_send.BillNo As SrcBillNo,'send' As SrcBillType,mms_send.SendDate As TakeDate,
		mms_send.PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_sendDetail.Unit,mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,
		mms_sendDetail.Remark,'' as name,(mms_send.BillNo+'send'+mms_sendDetail.MaterialCode) as id
    From mms_sendDetail
    Left join mms_send ON mms_sendDetail.BillNo=mms_send.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_send.PickUnit
    left join mms_material on mms_material.MaterialCode=mms_sendDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_send.BuildPartCode
    Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

    UNION

    --直入直出
    Select mms_direct.BillNo As SrcBillNo,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
		mms_direct.PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_directDetail.Unit,mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,
		mms_directDetail.Remark,'' as name,(mms_direct.BillNo+'direct'+mms_directDetail.MaterialCode) as id
    From mms_directDetail
    Left join mms_direct ON mms_directDetail.BillNo=mms_direct.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_direct.PickUnit
    left join mms_material on mms_material.MaterialCode=mms_directDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_direct.BuildPartCode
    Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

    UNION

    --退库
     Select mms_refund.BillNo As SrcBillNo,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
		mms_refund.RefundUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,NULL AS BuildPartName,
	    mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_refundDetail.Unit,mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,
		mms_refundDetail.Remark,'' as name,(mms_refund.BillNo+'refund'+mms_refundDetail.MaterialCode) as id
    From mms_refundDetail
    Left join mms_refund ON mms_refundDetail.BillNo=mms_refund.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_refund.RefundUnit
    left join mms_material on mms_material.MaterialCode=mms_refundDetail.MaterialCode
    Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

    UNION

    --租赁进场
    Select mms_rentin.BillNo As SrcBillNo,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
		mms_rentinDetail.UseUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_rentinDetail.Unit,mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,
		mms_rentinDetail.Remark,'' as name,(mms_rentin.BillNo+'rentin'+mms_rentinDetail.MaterialCode) as id
    From mms_rentinDetail
    Left join mms_rentin ON mms_rentinDetail.BillNo=mms_rentin.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
    left join mms_material on mms_material.MaterialCode=mms_rentinDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_rentin.BuildPartCode
    Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

    UNION

	--报损
	Select mms_lossReport.BillNo As SrcBillNo,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
		'其他' as PickUnit,'其他' as PickUnitName,NULL AS BuildPartName,
	    mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_lossReportDetail.Unit,mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,
		mms_lossReportDetail.Remark,'' as name,(mms_lossReport.BillNo+'lossReport'+mms_lossReportDetail.MaterialCode) as id
    From mms_lossReportDetail
    Left join mms_lossReport ON mms_lossReportDetail.BillNo=mms_lossReport.BillNo
    left join mms_material on mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
    Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'

    UNION

	--调拨
	Select mms_transfer.BillNo As SrcBillNo,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
		mms_transfer.ReceiveUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,NULL AS BuildPartName,
	    mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_transferDetail.Unit,mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,
		mms_transferDetail.Remark,'' as name,(mms_transfer.BillNo+'transfer'+mms_transferDetail.MaterialCode) as id
    From mms_transferDetail
    Left join mms_transfer ON mms_transferDetail.BillNo=mms_transfer.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
    left join mms_material on mms_material.MaterialCode=mms_transferDetail.MaterialCode
    Where mms_transfer.ApproveState='passed'  And  mms_transfer.ProjectCode='201306030001'

) as T
Where 1=1 

                
2014-03-28 15:57:52,214 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/sendsummary')
2014-03-28 15:57:52,216 [6] DEBUG Servicemms_buildPart - 获取动态列表
2014-03-28 15:57:52,216 [6] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2014-03-28 15:57:53,870 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/warehousequery')
2014-03-28 15:57:53,880 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 15:57:53,880 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 15:57:54,223 [7] DEBUG Mms - 
Select mms_warehouseStock.*,mms_material.MaterialName,mms_material.Model,mms_warehouse.WarehouseName,
    mms_warehouseStock.WarehouseCode+'_'+mms_material.MaterialCode as id,'' AS name
From mms_warehouseStock
Left join mms_warehouse on mms_warehouseStock.WarehouseCode=mms_warehouse.WarehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStock.MaterialCode
Where mms_warehouse.ProjectCode='201306030001' 

                
2014-03-28 15:57:54,444 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/warehousequery')
2014-03-28 15:57:54,446 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 15:57:54,447 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 15:57:55,889 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/warehouseaccount')
2014-03-28 15:57:56,223 [7] DEBUG Mms - 
Select mms_warehouseStockHistory.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStockHistory.WarehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where  mms_warehouse.ProjectCode='201306030001' 
order by mms_warehouseStockHistory.CreateDate desc
                
2014-03-28 15:57:57,981 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/materialwarnning')
2014-03-28 15:57:58,305 [6] DEBUG Mms - 
Select mms_materialWarnning.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_materialWarnning
Left join mms_material on mms_material.MaterialCode=mms_materialWarnning.MaterialCode
Where mms_materialWarnning.ProjectCode='201306030001' 
                
2014-03-28 15:57:58,337 [7] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode=''
                
2014-03-28 15:58:09,309 [10] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:58:09,309 [10] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0101010502' order by MaterialCode
2014-03-28 15:58:09,311 [10] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0101010502' ) tb_temp
2014-03-28 15:58:10,003 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:58:10,003 [7] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010103' order by MaterialCode
2014-03-28 15:58:10,005 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010103' ) tb_temp
2014-03-28 15:58:10,788 [6] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:58:10,789 [6] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010102' order by MaterialCode
2014-03-28 15:58:10,790 [6] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010102' ) tb_temp
2014-03-28 15:58:15,790 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/material/Index','/Mms/material')
2014-03-28 15:58:16,025 [6] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 15:58:16,026 [6] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 15:58:16,092 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 15:58:16,092 [7] DEBUG Mms - select top 20 mms_material.* from mms_material order by MaterialCode
2014-03-28 15:58:16,094 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material ) tb_temp
2014-03-28 22:20:53,628 [5] ERROR /Login - System.TypeInitializationException: “Zephyr.Web.Sys.DbCreatorBase”的类型初始值设定项引发异常。 ---> System.Data.SqlClient.SqlException: 在与 SQL Server 建立连接时出现与网络相关的或特定于实例的错误。未找到或无法访问服务器。请验证实例名称是否正确并且 SQL Server 已配置为允许远程连接。 (provider: SQL Network Interfaces, error: 26 - 定位指定的服务器/实例时出错)
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Web.Sys.DbCreatorBase.GetDefaultConnectionName() 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 57
   在 Zephyr.Web.Sys.DbCreatorBase..cctor() 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 26
   --- 内部异常堆栈跟踪的结尾 ---
   在 Zephyr.Web.Sys.SysEntrance.OnFrameworkActionExecuting(ActionExecutingContext filterContext) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\SysEntrance.cs:行号 54
   在 Zephyr.Web.Mvc.WebFrameworkFilter.OnActionExecuting(ActionExecutingContext filterContext) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Web.Mvc\Webstack\WebFrameworkFilter.cs:行号 12
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState)
2014-03-28 22:22:27,896 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 22:22:28,427 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 22:22:28,583 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 22:22:29,082 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 22:22:29,097 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 22:22:29,191 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 22:22:31,469 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:22:31,500 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 22:22:32,483 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:22:32,483 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-28 22:23:16,840 [9] DEBUG Servicesys_user - 获取实体对象
2014-03-28 22:23:16,840 [9] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-28 22:23:17,386 [9] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-28 22:23:17,683 [9] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','lbl','127.0.0.1','福建省厦门市','2014/3/28 22:23:17')
2014-03-28 22:23:17,854 [9] DEBUG Servicemms_project - 获取实体对象
2014-03-28 22:23:17,854 [9] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 22:23:18,088 [5] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:23:18,088 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 22:23:18,572 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 22:23:19,648 [5] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:23:19,648 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 22:23:26,283 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 22:23:40,980 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2014-03-28 22:23:44,172 [9] DEBUG Servicesys_menu - 获取动态列表
2014-03-28 22:23:44,173 [9] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-03-28 22:24:56,675 [6] DEBUG Servicesys_menu - 编辑记录
2014-03-28 22:24:56,744 [6] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='cc68e03e-4619-4650-b348-adfb289da14c'
2014-03-28 22:24:56,785 [6] DEBUG Sys - insert into sys_menu([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('地区资料','1204','12','icon-application_side_list','/trade/area','1','1','','管理员','2014/3/28 22:24:56','管理员','2014/3/28 22:24:56')
2014-03-28 22:24:56,938 [6] ERROR Servicesys_menu - 编辑记录失败
System.Exception: 主键重复，更新失败！
   在 Zephyr.Core.Db.<Context>b__1(ErrorEventArgs e) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 162
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 105
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<Edit>b__a(RequestWrapper x) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 66
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 180
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2014-03-28 22:24:57,118 [6] ERROR /api/sys/menu/edit - System.Exception: 主键重复，更新失败！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 70
   在 CallSite.Target(Closure , CallSite , sys_menuService , Object , Object , List`1 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Web.Sys.Controllers.MenuApiController.Edit(Object data) 位置 d:\lbl\SOFT\web-mvc-logistics\web-mvc-logistics\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Controllers\MenuController.cs:行号 66
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2014-03-28 22:25:13,738 [6] DEBUG Servicesys_menu - 编辑记录
2014-03-28 22:25:13,744 [6] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='cc68e03e-4619-4650-b348-adfb289da14c'
2014-03-28 22:25:13,745 [6] DEBUG Sys - insert into sys_menu([MenuName],[MenuCode],[ParentCode],[IconClass],[URL],[IsVisible],[IsEnable],[MenuSeq],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('地区资料','1205','12','icon-application_side_list','/trade/area','1','1','','管理员','2014/3/28 22:25:13','管理员','2014/3/28 22:25:13')
2014-03-28 22:25:13,973 [6] DEBUG Servicesys_menu - 获取动态列表
2014-03-28 22:25:13,979 [6] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2014-03-28 22:25:30,960 [12] DEBUG Sys - 
select A.*,
       case when B.ID is null then 0 else 1 end as Selected
from sys_button A
left join sys_menuButtonMap B on B.MenuCode = '1205' and B.ButtonCode = A.ButtonCode
order by ButtonSeq
2014-03-28 22:25:41,259 [6] DEBUG Servicesys_menu - 设置菜单按钮
2014-03-28 22:25:41,259 [6] DEBUG Sys - delete from sys_menuButtonMap where [MenuCode] = '1205'
2014-03-28 22:25:41,306 [6] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('1205','add')
2014-03-28 22:25:41,322 [6] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('1205','edit')
2014-03-28 22:25:41,322 [6] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('1205','delete')
2014-03-28 22:25:41,322 [6] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('1205','refresh')
2014-03-28 22:25:41,322 [6] DEBUG Sys - insert into sys_menuButtonMap([MenuCode],[ButtonCode]) values('1205','save')
2014-03-28 22:25:45,138 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/role/Index','/Sys/role')
2014-03-28 22:25:45,146 [6] DEBUG Servicesys_user - 获取动态列表
2014-03-28 22:25:45,146 [6] DEBUG Sys - select UserCode,UserName from sys_user
2014-03-28 22:25:45,148 [6] DEBUG Servicesys_organize - 获取动态列表
2014-03-28 22:25:45,148 [6] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2014-03-28 22:25:45,527 [6] DEBUG Servicesys_role - 获取实体列表
2014-03-28 22:25:45,534 [6] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2014-03-28 22:25:50,502 [12] DEBUG Sys - select * from sys_button order by ButtonSeq
2014-03-28 22:25:50,519 [12] DEBUG Sys - select A.MenuName,A.MenuCode,A.ParentCode,A.IconClass as iconCls,B.MenuName as ParentName,(select 1 from sys_roleMenuMap tb_role where tb_role.RoleCode='super' and tb_role.MenuCode=A.MenuCode) as checked,(
select case when max(tb1_add.ID) is null then -1 
            when max(tb2_add.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_add
left join sys_roleMenuButtonMap AS tb2_add ON tb2_add.MenuCode=tb1_add.MenuCode AND tb2_add.ButtonCode=tb1_add.ButtonCode AND tb2_add.RoleCode='super'
where tb1_add.MenuCode = A.MenuCode and  tb1_add.ButtonCode = 'add'  
)as 'btn_add' ,(
select case when max(tb1_browse.ID) is null then -1 
            when max(tb2_browse.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_browse
left join sys_roleMenuButtonMap AS tb2_browse ON tb2_browse.MenuCode=tb1_browse.MenuCode AND tb2_browse.ButtonCode=tb1_browse.ButtonCode AND tb2_browse.RoleCode='super'
where tb1_browse.MenuCode = A.MenuCode and  tb1_browse.ButtonCode = 'browse'  
)as 'btn_browse' ,(
select case when max(tb1_edit.ID) is null then -1 
            when max(tb2_edit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_edit
left join sys_roleMenuButtonMap AS tb2_edit ON tb2_edit.MenuCode=tb1_edit.MenuCode AND tb2_edit.ButtonCode=tb1_edit.ButtonCode AND tb2_edit.RoleCode='super'
where tb1_edit.MenuCode = A.MenuCode and  tb1_edit.ButtonCode = 'edit'  
)as 'btn_edit' ,(
select case when max(tb1_delete.ID) is null then -1 
            when max(tb2_delete.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_delete
left join sys_roleMenuButtonMap AS tb2_delete ON tb2_delete.MenuCode=tb1_delete.MenuCode AND tb2_delete.ButtonCode=tb1_delete.ButtonCode AND tb2_delete.RoleCode='super'
where tb1_delete.MenuCode = A.MenuCode and  tb1_delete.ButtonCode = 'delete'  
)as 'btn_delete' ,(
select case when max(tb1_search.ID) is null then -1 
            when max(tb2_search.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_search
left join sys_roleMenuButtonMap AS tb2_search ON tb2_search.MenuCode=tb1_search.MenuCode AND tb2_search.ButtonCode=tb1_search.ButtonCode AND tb2_search.RoleCode='super'
where tb1_search.MenuCode = A.MenuCode and  tb1_search.ButtonCode = 'search'  
)as 'btn_search' ,(
select case when max(tb1_refresh.ID) is null then -1 
            when max(tb2_refresh.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_refresh
left join sys_roleMenuButtonMap AS tb2_refresh ON tb2_refresh.MenuCode=tb1_refresh.MenuCode AND tb2_refresh.ButtonCode=tb1_refresh.ButtonCode AND tb2_refresh.RoleCode='super'
where tb1_refresh.MenuCode = A.MenuCode and  tb1_refresh.ButtonCode = 'refresh'  
)as 'btn_refresh' ,(
select case when max(tb1_download.ID) is null then -1 
            when max(tb2_download.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_download
left join sys_roleMenuButtonMap AS tb2_download ON tb2_download.MenuCode=tb1_download.MenuCode AND tb2_download.ButtonCode=tb1_download.ButtonCode AND tb2_download.RoleCode='super'
where tb1_download.MenuCode = A.MenuCode and  tb1_download.ButtonCode = 'download'  
)as 'btn_download' ,(
select case when max(tb1_print.ID) is null then -1 
            when max(tb2_print.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_print
left join sys_roleMenuButtonMap AS tb2_print ON tb2_print.MenuCode=tb1_print.MenuCode AND tb2_print.ButtonCode=tb1_print.ButtonCode AND tb2_print.RoleCode='super'
where tb1_print.MenuCode = A.MenuCode and  tb1_print.ButtonCode = 'print'  
)as 'btn_print' ,(
select case when max(tb1_accredit.ID) is null then -1 
            when max(tb2_accredit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_accredit
left join sys_roleMenuButtonMap AS tb2_accredit ON tb2_accredit.MenuCode=tb1_accredit.MenuCode AND tb2_accredit.ButtonCode=tb1_accredit.ButtonCode AND tb2_accredit.RoleCode='super'
where tb1_accredit.MenuCode = A.MenuCode and  tb1_accredit.ButtonCode = 'accredit'  
)as 'btn_accredit' ,(
select case when max(tb1_audit.ID) is null then -1 
            when max(tb2_audit.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_audit
left join sys_roleMenuButtonMap AS tb2_audit ON tb2_audit.MenuCode=tb1_audit.MenuCode AND tb2_audit.ButtonCode=tb1_audit.ButtonCode AND tb2_audit.RoleCode='super'
where tb1_audit.MenuCode = A.MenuCode and  tb1_audit.ButtonCode = 'audit'  
)as 'btn_audit' ,(
select case when max(tb1_inport.ID) is null then -1 
            when max(tb2_inport.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_inport
left join sys_roleMenuButtonMap AS tb2_inport ON tb2_inport.MenuCode=tb1_inport.MenuCode AND tb2_inport.ButtonCode=tb1_inport.ButtonCode AND tb2_inport.RoleCode='super'
where tb1_inport.MenuCode = A.MenuCode and  tb1_inport.ButtonCode = 'inport'  
)as 'btn_inport' ,(
select case when max(tb1_copy.ID) is null then -1 
            when max(tb2_copy.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_copy
left join sys_roleMenuButtonMap AS tb2_copy ON tb2_copy.MenuCode=tb1_copy.MenuCode AND tb2_copy.ButtonCode=tb1_copy.ButtonCode AND tb2_copy.RoleCode='super'
where tb1_copy.MenuCode = A.MenuCode and  tb1_copy.ButtonCode = 'copy'  
)as 'btn_copy' ,(
select case when max(tb1_save.ID) is null then -1 
            when max(tb2_save.ID) is null then 0 
            else 1 end 
from  sys_menuButtonMap AS tb1_save
left join sys_roleMenuButtonMap AS tb2_save ON tb2_save.MenuCode=tb1_save.MenuCode AND tb2_save.ButtonCode=tb1_save.ButtonCode AND tb2_save.RoleCode='super'
where tb1_save.MenuCode = A.MenuCode and  tb1_save.ButtonCode = 'save'  
)as 'btn_save' 
from sys_menu as A
left join sys_menu B on B.MenuCode = A.ParentCode
where A.IsEnable = 1
order by A.MenuSeq,A.MenuCode
2014-03-28 22:25:50,537 [6] DEBUG Servicesys_permission - 获取动态列表
2014-03-28 22:25:50,537 [6] DEBUG Sys - select A.*
,case when B.PermissionCode is null then 0 else 1           end as checked
,case when B.PermissionCode is null then 0 else B.IsDefault end as IsDefault from sys_permission A
left join sys_rolePermissionMap B on B.RoleCode='super' and B.PermissionCode = A.PermissionCode 
2014-03-28 22:25:50,815 [12] DEBUG Sys - select * from sys_roleMenuColumnMap where RoleCode = 'super'
2014-03-28 22:26:00,567 [12] DEBUG Servicesys_role - 修改角色菜单权限
2014-03-28 22:26:00,569 [12] DEBUG Sys - delete from sys_roleMenuMap where [RoleCode] = 'super'
2014-03-28 22:26:00,573 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','13')
2014-03-28 22:26:00,575 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1301')
2014-03-28 22:26:00,577 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1302')
2014-03-28 22:26:00,578 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','10')
2014-03-28 22:26:00,578 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1002')
2014-03-28 22:26:00,578 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1001')
2014-03-28 22:26:00,578 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1009')
2014-03-28 22:26:00,578 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1010')
2014-03-28 22:26:00,579 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1013')
2014-03-28 22:26:00,579 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1007')
2014-03-28 22:26:00,579 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1006')
2014-03-28 22:26:00,579 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1011')
2014-03-28 22:26:00,579 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1003')
2014-03-28 22:26:00,580 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1012')
2014-03-28 22:26:00,580 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1008')
2014-03-28 22:26:00,580 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1005')
2014-03-28 22:26:00,580 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1004')
2014-03-28 22:26:00,580 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100101')
2014-03-28 22:26:00,582 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100201')
2014-03-28 22:26:00,582 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100312')
2014-03-28 22:26:00,582 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100401')
2014-03-28 22:26:00,583 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100501')
2014-03-28 22:26:00,583 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100601')
2014-03-28 22:26:00,583 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100701')
2014-03-28 22:26:00,583 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100801')
2014-03-28 22:26:00,583 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','100901')
2014-03-28 22:26:00,584 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101001')
2014-03-28 22:26:00,584 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101101')
2014-03-28 22:26:00,584 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101201')
2014-03-28 22:26:00,585 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','101301')
2014-03-28 22:26:00,585 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','11')
2014-03-28 22:26:00,585 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1105')
2014-03-28 22:26:00,585 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1101')
2014-03-28 22:26:00,586 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1102')
2014-03-28 22:26:00,586 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1103')
2014-03-28 22:26:00,586 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1104')
2014-03-28 22:26:00,586 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1109')
2014-03-28 22:26:00,586 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','12')
2014-03-28 22:26:00,586 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1204')
2014-03-28 22:26:00,587 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1205')
2014-03-28 22:26:00,587 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1201')
2014-03-28 22:26:00,587 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1202')
2014-03-28 22:26:00,587 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','1203')
2014-03-28 22:26:00,587 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','99')
2014-03-28 22:26:00,588 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9902')
2014-03-28 22:26:00,588 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9903')
2014-03-28 22:26:00,588 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9910')
2014-03-28 22:26:00,588 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9904')
2014-03-28 22:26:00,588 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9905')
2014-03-28 22:26:00,589 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9906')
2014-03-28 22:26:00,589 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9911')
2014-03-28 22:26:00,589 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9907')
2014-03-28 22:26:00,589 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','98')
2014-03-28 22:26:00,589 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9810')
2014-03-28 22:26:00,589 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9915')
2014-03-28 22:26:00,590 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9920')
2014-03-28 22:26:00,590 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9950')
2014-03-28 22:26:00,590 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9960')
2014-03-28 22:26:00,590 [12] DEBUG Sys - insert into sys_roleMenuMap([RoleCode],[MenuCode]) values('super','9961')
2014-03-28 22:26:00,593 [12] DEBUG Servicesys_role - 修改角色菜单按钮权限
2014-03-28 22:26:00,593 [12] DEBUG Sys - delete from sys_roleMenuButtonMap where [RoleCode] = 'super'
2014-03-28 22:26:00,595 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1301','add')
2014-03-28 22:26:00,597 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1301','edit')
2014-03-28 22:26:00,610 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1301','delete')
2014-03-28 22:26:00,612 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1301','refresh')
2014-03-28 22:26:00,614 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1301','download')
2014-03-28 22:26:00,616 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1301','audit')
2014-03-28 22:26:00,620 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1302','print')
2014-03-28 22:26:00,620 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1302','audit')
2014-03-28 22:26:00,620 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1302','save')
2014-03-28 22:26:00,620 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','add')
2014-03-28 22:26:00,621 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','edit')
2014-03-28 22:26:00,621 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','delete')
2014-03-28 22:26:00,621 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','refresh')
2014-03-28 22:26:00,621 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','download')
2014-03-28 22:26:00,621 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','1001','audit')
2014-03-28 22:26:00,622 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','add')
2014-03-28 22:26:00,622 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','edit')
2014-03-28 22:26:00,622 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','delete')
2014-03-28 22:26:00,622 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','refresh')
2014-03-28 22:26:00,623 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','download')
2014-03-28 22:26:00,623 [12] DEBUG Sys - insert into sys_roleMenuButtonMap([RoleCode],[MenuCode],[ButtonCode]) values('super','9960','audit')
2014-03-28 22:26:00,625 [12] DEBUG Servicesys_role - 修改角色数据权限
2014-03-28 22:26:00,626 [12] DEBUG Sys - delete from sys_rolePermissionMap where [RoleCode] = 'super'
2014-03-28 22:26:00,627 [12] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','01','0')
2014-03-28 22:26:00,629 [12] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0102','0')
2014-03-28 22:26:00,631 [12] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','02','0')
2014-03-28 22:26:00,631 [12] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','0201','0')
2014-03-28 22:26:00,631 [12] DEBUG Sys - insert into sys_rolePermissionMap([RoleCode],[PermissionCode],[IsDefault]) values('super','030','0')
2014-03-28 22:26:00,635 [12] DEBUG Servicesys_role - 修改角色数据列权限
2014-03-28 22:26:00,637 [12] DEBUG Sys - delete from sys_roleMenuColumnMap where [RoleCode] = 'super'
2014-03-28 22:26:09,371 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:26:09,371 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 22:26:09,371 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:26:09,371 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-28 22:26:16,685 [6] DEBUG Servicesys_user - 获取实体对象
2014-03-28 22:26:16,701 [6] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-28 22:26:16,701 [6] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-28 22:26:16,717 [6] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','lbl','127.0.0.1','福建省厦门市','2014/3/28 22:26:16')
2014-03-28 22:26:16,717 [6] DEBUG Servicemms_project - 获取实体对象
2014-03-28 22:26:16,717 [6] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 22:26:16,748 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:26:16,748 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 22:26:16,763 [12] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 22:26:16,763 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:26:16,763 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 22:26:16,935 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 22:26:23,001 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 22:26:23,162 [12] ERROR /trade/area - System.Web.HttpParseException (0x80004005): 应为“}”。

   在 System.Web.WebPages.Razor.RazorBuildProvider.EnsureGeneratedCode()
   在 System.Web.WebPages.Razor.RazorBuildProvider.get_CodeCompilerType()
   在 System.Web.Compilation.BuildProvider.GetCompilerTypeFromBuildProvider(BuildProvider buildProvider)
   在 System.Web.Compilation.BuildProvidersCompiler.ProcessBuildProviders()
   在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2014-03-28 22:27:30,809 [5] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:27:30,809 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 22:27:30,840 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 22:27:30,840 [5] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:27:30,840 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 22:27:31,316 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 22:27:39,274 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 22:27:42,135 [5] DEBUG Servicebase_area - 获取动态列表
2014-03-28 22:27:42,136 [5] DEBUG Trade - select top 20 * from base_area order by keyid
2014-03-28 22:27:42,291 [5] DEBUG Trade - select count(*) from ( select * from base_area ) tb_temp
2014-03-28 22:27:50,279 [12] DEBUG Servicebase_area - 获取新主键
2014-03-28 22:32:18,197 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:32:18,197 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 22:32:18,228 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 22:32:18,306 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:32:18,306 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 22:32:18,844 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 22:32:24,051 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 22:32:25,673 [5] DEBUG Servicebase_area - 获取动态列表
2014-03-28 22:32:25,677 [5] DEBUG Trade - select top 20 * from base_area order by keyid
2014-03-28 22:32:25,678 [5] DEBUG Trade - select count(*) from ( select * from base_area ) tb_temp
2014-03-28 22:46:11,300 [19] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:46:11,316 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 22:46:11,331 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 22:46:11,347 [19] DEBUG Servicesys_parameter - 获取字段
2014-03-28 22:46:11,347 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 22:46:11,798 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 22:46:15,858 [19] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 22:46:22,166 [19] DEBUG Servicebase_area - 获取动态列表
2014-03-28 22:46:22,181 [19] DEBUG Trade - select top 20 * from base_area order by keyid
2014-03-28 22:46:22,181 [19] DEBUG Trade - select count(*) from ( select * from base_area ) tb_temp
2014-03-28 22:46:22,228 [16] DEBUG Servicebase_area - 获取动态列表
2014-03-28 22:46:22,228 [16] DEBUG Trade - select * from base_area order by keyid
2014-03-28 23:03:30,376 [25] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:03:30,748 [24] DEBUG Servicebase_area - 获取动态列表
2014-03-28 23:03:30,752 [24] DEBUG Trade - select * from base_area order by keyid
2014-03-28 23:03:30,789 [25] DEBUG Servicebase_area - 获取动态列表
2014-03-28 23:03:30,789 [25] DEBUG Trade - select top 20 * from base_area order by keyid
2014-03-28 23:03:30,792 [25] DEBUG Trade - select count(*) from ( select * from base_area ) tb_temp
2014-03-28 23:04:16,931 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:04:17,310 [25] DEBUG Servicebase_area - 获取动态列表
2014-03-28 23:04:17,311 [25] DEBUG Trade - select * from base_area order by keyid
2014-03-28 23:04:17,356 [23] DEBUG Servicebase_area - 获取动态列表
2014-03-28 23:04:17,357 [23] DEBUG Trade - select top 20 * from base_area order by keyid
2014-03-28 23:04:17,357 [23] DEBUG Trade - select count(*) from ( select * from base_area ) tb_temp
2014-03-28 23:04:30,710 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/material/Index','/Mms/material')
2014-03-28 23:04:31,875 [26] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 23:04:31,890 [23] DEBUG Servicemms_material - 获取实体列表
2014-03-28 23:04:31,890 [26] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 23:04:31,890 [23] DEBUG Mms - select top 20 mms_material.* from mms_material order by MaterialCode
2014-03-28 23:04:32,031 [23] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material ) tb_temp
2014-03-28 23:05:03,378 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2014-03-28 23:05:04,278 [26] DEBUG Servicesys_organize - 获取实体列表
2014-03-28 23:05:04,279 [26] DEBUG Sys - select sys_organize.* from sys_organize
2014-03-28 23:05:04,304 [23] DEBUG Servicesys_user - 获取实体列表
2014-03-28 23:05:04,330 [23] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2014-03-28 23:05:04,371 [23] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2014-03-28 23:05:06,574 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/code/Index','/Sys/code')
2014-03-28 23:05:07,379 [25] DEBUG Servicesys_codeType - 获取动态列表
2014-03-28 23:05:07,380 [25] DEBUG Sys - select sys_codeType.* from sys_codeType order by Seq,CodeType
2014-03-28 23:05:07,488 [25] DEBUG Servicesys_code - 获取实体列表
2014-03-28 23:05:07,488 [25] DEBUG Sys - select top 20 sys_code.* from sys_code order by Seq
2014-03-28 23:05:07,505 [25] DEBUG Sys - select count(*) from ( select sys_code.* from sys_code ) tb_temp
2014-03-28 23:05:09,597 [25] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/parameter/Index','/Sys/parameter')
2014-03-28 23:05:09,880 [26] DEBUG Servicesys_parameter - 获取实体列表
2014-03-28 23:05:09,880 [26] DEBUG Sys - select top 20 sys_parameter.* from sys_parameter order by ParamCode
2014-03-28 23:05:09,895 [26] DEBUG Sys - select count(*) from ( select sys_parameter.* from sys_parameter ) tb_temp
2014-03-28 23:05:13,935 [25] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/log/Index','/Sys/log')
2014-03-28 23:05:14,860 [26] DEBUG Servicesys_log - 获取实体列表
2014-03-28 23:05:14,861 [26] DEBUG Sys - select top 20 A.* from sys_log A order by A.ID desc
2014-03-28 23:05:14,881 [23] DEBUG Servicesys_loginHistory - 获取实体列表
2014-03-28 23:05:14,882 [23] DEBUG Sys - select top 20 A.* from sys_loginHistory A order by A.ID desc
2014-03-28 23:05:14,894 [23] DEBUG Sys - select count(*) from ( select A.* from sys_loginHistory A ) tb_temp
2014-03-28 23:05:15,036 [26] DEBUG Sys - select count(*) from ( select A.* from sys_log A ) tb_temp
2014-03-28 23:05:19,655 [25] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2014-03-28 23:05:19,686 [25] DEBUG Servicesys_organize - 获取实体列表
2014-03-28 23:05:19,686 [25] DEBUG Sys - select sys_organize.* from sys_organize
2014-03-28 23:05:32,684 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/project/Index','/Mms/project')
2014-03-28 23:05:32,692 [26] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:05:32,692 [26] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 23:05:32,695 [26] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:05:32,712 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:32,713 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:05:32,715 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:32,715 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:05:32,730 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:32,730 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:05:32,732 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:32,732 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:05:32,748 [26] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:05:32,748 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PartAttr'
2014-03-28 23:05:32,750 [26] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:05:32,750 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='ImagePart'
2014-03-28 23:05:34,548 [23] DEBUG Servicemms_project - 获取动态列表
2014-03-28 23:05:34,549 [23] DEBUG Mms - select ProjectName as text,ProjectCode as id,ParentCode as pid from mms_project
2014-03-28 23:05:34,610 [23] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:05:34,611 [23] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030001'
2014-03-28 23:05:34,648 [26] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:05:34,649 [26] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 23:05:34,650 [26] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:05:34,650 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:34,650 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:05:34,651 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:34,651 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:05:34,652 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:34,653 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:05:34,653 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:34,653 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:05:36,876 [23] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:05:36,876 [23] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030002'
2014-03-28 23:05:36,908 [26] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:05:36,908 [26] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030002'
2014-03-28 23:05:36,908 [26] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:05:36,908 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:36,908 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode
2014-03-28 23:05:36,908 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:36,908 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030002' and ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 23:05:36,908 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:36,908 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030002' and ProjectCode='201306030002' order by ProjectCode
2014-03-28 23:05:36,908 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:36,908 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 23:05:40,571 [23] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:05:40,571 [23] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030001'
2014-03-28 23:05:40,586 [26] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:05:40,586 [26] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 23:05:40,586 [26] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:05:40,586 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:40,586 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:05:40,586 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:40,586 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:05:40,586 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:40,586 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:05:40,586 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:40,586 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:05:47,428 [26] DEBUG Servicemms_project - 获取新主键
2014-03-28 23:05:47,429 [26] DEBUG Mms - select isnull(max(ProjectCode),0) from mms_project  where 1 = 1 
2014-03-28 23:05:47,629 [25] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:05:47,629 [25] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030003'
2014-03-28 23:05:50,893 [25] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:05:50,893 [25] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030002'
2014-03-28 23:05:50,919 [26] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:05:50,919 [26] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030002'
2014-03-28 23:05:50,925 [26] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:05:50,925 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:50,925 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode
2014-03-28 23:05:50,926 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:50,927 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030002' and ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 23:05:50,927 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:50,927 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030002' and ProjectCode='201306030002' order by ProjectCode
2014-03-28 23:05:50,928 [26] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:50,928 [26] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 23:05:53,643 [26] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:05:53,643 [26] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030001'
2014-03-28 23:05:53,658 [25] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:05:53,658 [25] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 23:05:53,674 [25] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:05:53,674 [25] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:53,674 [25] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:05:53,674 [25] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:53,674 [25] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:05:53,674 [25] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:53,674 [25] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:05:53,674 [25] DEBUG Servicemms_project - 获取字段
2014-03-28 23:05:53,674 [25] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:10:51,785 [20] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:10:51,785 [20] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030002'
2014-03-28 23:10:51,818 [21] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:10:51,818 [21] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030002'
2014-03-28 23:10:51,821 [21] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:10:51,821 [21] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:51,821 [21] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode
2014-03-28 23:10:51,824 [21] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:51,824 [21] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030002' and ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 23:10:51,825 [21] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:51,826 [21] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030002' and ProjectCode='201306030002' order by ProjectCode
2014-03-28 23:10:51,832 [21] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:51,832 [21] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 23:10:54,355 [20] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:10:54,355 [20] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030001'
2014-03-28 23:10:54,359 [21] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:10:54,359 [21] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 23:10:54,380 [21] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:10:54,380 [21] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:54,380 [21] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:10:54,382 [21] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:54,382 [21] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:10:54,387 [21] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:54,387 [21] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:10:54,389 [21] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:54,389 [21] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:10:56,400 [20] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:10:56,401 [20] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030002'
2014-03-28 23:10:56,422 [5] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:10:56,422 [5] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030002'
2014-03-28 23:10:56,429 [5] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:10:56,429 [5] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:56,429 [5] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode
2014-03-28 23:10:56,431 [5] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:56,431 [5] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030002' and ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 23:10:56,432 [5] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:56,432 [5] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030002' and ProjectCode='201306030002' order by ProjectCode
2014-03-28 23:10:56,432 [5] DEBUG Servicemms_project - 获取字段
2014-03-28 23:10:56,432 [5] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode desc
2014-03-28 23:16:43,534 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/merchant/Index','/Mms/merchant')
2014-03-28 23:16:49,804 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2014-03-28 23:16:49,831 [23] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:16:49,849 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:16:49,923 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:16:49,924 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-28 23:16:50,054 [7] DEBUG Servicemms_merchantsType - 获取动态列表
2014-03-28 23:16:50,055 [7] DEBUG Mms - select mms_merchantsType.* from mms_merchantsType order by MerchantsTypeCode
2014-03-28 23:16:50,064 [9] DEBUG Servicemms_merchants - 获取实体列表
2014-03-28 23:16:50,069 [9] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants order by MerchantsCode
2014-03-28 23:16:50,252 [9] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants ) tb_temp
2014-03-28 23:16:51,668 [23] DEBUG Servicemms_receive - 获取动态列表
2014-03-28 23:16:51,668 [23] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:16:51,776 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:16:53,894 [23] DEBUG Servicemms_receive - 获取新主键
2014-03-28 23:16:53,895 [23] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2014-03-28 23:16:54,022 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2014-03-28 23:16:54,030 [9] DEBUG Servicemms_receive - 获取实体对象
2014-03-28 23:16:54,030 [9] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201403280001'
2014-03-28 23:16:54,032 [9] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-03-28 23:16:54,033 [9] DEBUG Servicemms_receive - 获取字段
2014-03-28 23:16:54,033 [9] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-03-28 23:16:54,035 [9] DEBUG Servicemms_receive - 获取字段
2014-03-28 23:16:54,035 [9] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:16:54,038 [9] DEBUG Servicemms_receive - 获取字段
2014-03-28 23:16:54,038 [9] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:16:54,056 [9] DEBUG Servicemms_receive - 获取字段
2014-03-28 23:16:54,057 [9] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:16:54,069 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:16:54,070 [9] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:16:54,073 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:16:54,073 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-28 23:16:54,073 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:16:54,074 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-28 23:16:54,074 [9] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:16:54,074 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:16:54,075 [9] DEBUG Servicesys_code - 获取字段
2014-03-28 23:16:54,075 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-03-28 23:16:54,089 [9] DEBUG Servicesys_code - 获取字段
2014-03-28 23:16:54,090 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-03-28 23:16:55,596 [7] DEBUG Servicemms_receive - 获取动态列表
2014-03-28 23:16:55,598 [7] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201403280001' order by A.MaterialCode
2014-03-28 23:17:03,938 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2014-03-28 23:17:03,960 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:17:03,961 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:17:03,962 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:03,962 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-28 23:17:03,963 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:03,964 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2014-03-28 23:17:04,723 [7] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2014-03-28 23:17:04,726 [7] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2014-03-28 23:17:04,928 [7] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2014-03-28 23:17:04,929 [7] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2014-03-28 23:17:05,644 [7] DEBUG Servicemms_send - 获取动态列表
2014-03-28 23:17:05,645 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:17:05,678 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:17:07,411 [7] DEBUG Servicemms_send - 获取新主键
2014-03-28 23:17:07,412 [7] DEBUG Mms - select isnull(max(BillNo),0) from mms_send
2014-03-28 23:17:07,509 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/edit')
2014-03-28 23:17:07,521 [7] DEBUG Servicemms_send - 获取实体对象
2014-03-28 23:17:07,522 [7] DEBUG Mms - select mms_send.* from mms_send where BillNo='201403280001'
2014-03-28 23:17:07,524 [7] DEBUG Servicemms_send - 获取上一条下一条数据
2014-03-28 23:17:07,525 [7] DEBUG Servicemms_send - 获取字段
2014-03-28 23:17:07,525 [7] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo
2014-03-28 23:17:07,527 [7] DEBUG Servicemms_send - 获取字段
2014-03-28 23:17:07,527 [7] DEBUG Mms - select top 1 BillNo from mms_send where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:17:07,529 [7] DEBUG Servicemms_send - 获取字段
2014-03-28 23:17:07,530 [7] DEBUG Mms - select top 1 BillNo from mms_send where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:17:07,531 [7] DEBUG Servicemms_send - 获取字段
2014-03-28 23:17:07,532 [7] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:17:07,542 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:07,542 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-28 23:17:07,543 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:07,543 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2014-03-28 23:17:07,543 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:07,543 [7] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:17:07,544 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:17:07,544 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:17:07,544 [7] DEBUG Servicesys_code - 获取字段
2014-03-28 23:17:07,544 [7] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2014-03-28 23:17:08,857 [7] DEBUG Servicemms_send - 获取动态列表
2014-03-28 23:17:08,858 [7] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_sendDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201403280001' order by A.MaterialCode
2014-03-28 23:17:15,201 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/direct/Index','/Mms/direct')
2014-03-28 23:17:15,207 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:17:15,208 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:17:15,208 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:15,208 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-28 23:17:16,445 [9] DEBUG Servicemms_direct - 获取动态列表
2014-03-28 23:17:16,446 [9] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:17:16,514 [9] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:17:17,932 [9] DEBUG Servicemms_direct - 获取新主键
2014-03-28 23:17:17,932 [9] DEBUG Mms - select isnull(max(BillNo),0) from mms_direct
2014-03-28 23:17:17,996 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/direct/edit')
2014-03-28 23:17:18,021 [9] DEBUG Servicemms_direct - 获取实体对象
2014-03-28 23:17:18,021 [9] DEBUG Mms - select mms_direct.* from mms_direct where BillNo='201403280001'
2014-03-28 23:17:18,023 [9] DEBUG Servicemms_direct - 获取上一条下一条数据
2014-03-28 23:17:18,024 [9] DEBUG Servicemms_direct - 获取字段
2014-03-28 23:17:18,024 [9] DEBUG Mms - select top 1 BillNo from mms_direct where ProjectCode='201306030001' order by BillNo
2014-03-28 23:17:18,026 [9] DEBUG Servicemms_direct - 获取字段
2014-03-28 23:17:18,026 [9] DEBUG Mms - select top 1 BillNo from mms_direct where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:17:18,028 [9] DEBUG Servicemms_direct - 获取字段
2014-03-28 23:17:18,028 [9] DEBUG Mms - select top 1 BillNo from mms_direct where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:17:18,030 [9] DEBUG Servicemms_direct - 获取字段
2014-03-28 23:17:18,031 [9] DEBUG Mms - select top 1 BillNo from mms_direct where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:17:18,044 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:18,044 [9] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:17:18,044 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:18,044 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-28 23:17:18,045 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:18,045 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-28 23:17:18,045 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:18,045 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2014-03-28 23:17:18,045 [9] DEBUG Servicesys_code - 获取字段
2014-03-28 23:17:18,046 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-03-28 23:17:18,046 [9] DEBUG Servicesys_code - 获取字段
2014-03-28 23:17:18,047 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-03-28 23:17:19,455 [9] DEBUG Servicemms_direct - 获取动态列表
2014-03-28 23:17:19,455 [9] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_directDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201403280001' order by A.MaterialCode
2014-03-28 23:17:26,557 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2014-03-28 23:17:26,591 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:17:26,592 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:17:27,770 [7] DEBUG Servicemms_refund - 获取动态列表
2014-03-28 23:17:27,771 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName from mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:17:27,814 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName from mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:17:29,698 [23] DEBUG Servicemms_refund - 获取新主键
2014-03-28 23:17:29,698 [23] DEBUG Mms - select isnull(max(BillNo),0) from mms_refund
2014-03-28 23:17:29,754 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/refund/edit')
2014-03-28 23:17:29,782 [7] DEBUG Servicemms_refund - 获取实体对象
2014-03-28 23:17:29,782 [7] DEBUG Mms - select mms_refund.* from mms_refund where BillNo='201403280001'
2014-03-28 23:17:29,785 [7] DEBUG Servicemms_refund - 获取上一条下一条数据
2014-03-28 23:17:29,787 [7] DEBUG Servicemms_refund - 获取字段
2014-03-28 23:17:29,788 [7] DEBUG Mms - select top 1 BillNo from mms_refund where ProjectCode='201306030001' order by BillNo
2014-03-28 23:17:29,790 [7] DEBUG Servicemms_refund - 获取字段
2014-03-28 23:17:29,790 [7] DEBUG Mms - select top 1 BillNo from mms_refund where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:17:29,793 [7] DEBUG Servicemms_refund - 获取字段
2014-03-28 23:17:29,793 [7] DEBUG Mms - select top 1 BillNo from mms_refund where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:17:29,799 [7] DEBUG Servicemms_refund - 获取字段
2014-03-28 23:17:29,800 [7] DEBUG Mms - select top 1 BillNo from mms_refund where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:17:29,811 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:29,812 [7] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:17:29,812 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:17:29,812 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:17:31,028 [9] DEBUG Servicemms_refund - 获取动态列表
2014-03-28 23:17:31,029 [9] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum from mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId where A.BillNo='201403280001' order by A.MaterialCode
2014-03-28 23:17:37,270 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/return/Index','/Mms/return')
2014-03-28 23:17:37,276 [9] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:17:37,277 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:17:37,277 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:37,277 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-28 23:17:37,278 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:37,278 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-28 23:17:38,573 [23] DEBUG Servicemms_return - 获取动态列表
2014-03-28 23:17:38,573 [23] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName from mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:17:38,631 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName from mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:17:39,513 [23] DEBUG Servicemms_return - 获取新主键
2014-03-28 23:17:39,513 [23] DEBUG Mms - select isnull(max(BillNo),0) from mms_return
2014-03-28 23:17:39,566 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/return/edit')
2014-03-28 23:17:39,603 [7] DEBUG Servicemms_return - 获取实体对象
2014-03-28 23:17:39,604 [7] DEBUG Mms - select mms_return.* from mms_return where BillNo='201403280001'
2014-03-28 23:17:39,606 [7] DEBUG Servicemms_return - 获取上一条下一条数据
2014-03-28 23:17:39,608 [7] DEBUG Servicemms_return - 获取字段
2014-03-28 23:17:39,620 [7] DEBUG Mms - select top 1 BillNo from mms_return where ProjectCode='201306030001' order by BillNo
2014-03-28 23:17:39,622 [7] DEBUG Servicemms_return - 获取字段
2014-03-28 23:17:39,622 [7] DEBUG Mms - select top 1 BillNo from mms_return where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:17:39,624 [7] DEBUG Servicemms_return - 获取字段
2014-03-28 23:17:39,624 [7] DEBUG Mms - select top 1 BillNo from mms_return where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:17:39,627 [7] DEBUG Servicemms_return - 获取字段
2014-03-28 23:17:39,627 [7] DEBUG Mms - select top 1 BillNo from mms_return where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:17:39,638 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:39,638 [7] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:17:39,638 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:39,639 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-28 23:17:39,639 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:17:39,639 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-28 23:17:39,639 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:17:39,639 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:17:39,640 [7] DEBUG Servicesys_code - 获取字段
2014-03-28 23:17:39,640 [7] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-03-28 23:17:39,640 [7] DEBUG Servicesys_code - 获取字段
2014-03-28 23:17:39,640 [7] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2014-03-28 23:17:40,873 [7] DEBUG Servicemms_return - 获取动态列表
2014-03-28 23:17:40,874 [7] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_returnDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201403280001' order by A.MaterialCode
2014-03-28 23:17:45,285 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/lossreport/Index','/Mms/lossreport')
2014-03-28 23:17:45,304 [23] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:17:45,305 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:17:46,601 [7] DEBUG Servicemms_lossReport - 获取动态列表
2014-03-28 23:17:46,606 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_LossReport A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:17:46,649 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_LossReport A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:18:54,560 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/transfer/Index','/Mms/transfer')
2014-03-28 23:18:54,569 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:18:54,570 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-28 23:18:54,570 [23] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:18:54,570 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:18:56,648 [23] DEBUG Servicemms_transfer - 获取动态列表
2014-03-28 23:18:56,649 [23] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as ReceiveUnitName from mms_transfer A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.ReceiveUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:18:56,685 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as ReceiveUnitName from mms_transfer A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.ReceiveUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:18:59,409 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/check/Index','/Mms/check')
2014-03-28 23:18:59,419 [23] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:18:59,419 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:19:00,665 [23] DEBUG Servicemms_check - 获取动态列表
2014-03-28 23:19:00,666 [23] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_check A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode where isnull(A.BookMoney,0)<>isnull(A.OperateMoney,0) and A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:19:00,737 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_check A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode where isnull(A.BookMoney,0)<>isnull(A.OperateMoney,0) and A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:19:04,829 [23] DEBUG Servicemms_check - 获取新主键
2014-03-28 23:19:04,830 [23] DEBUG Mms - select isnull(max(BillNo),0) from mms_check
2014-03-28 23:19:04,931 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/check/edit')
2014-03-28 23:19:04,938 [12] DEBUG Servicemms_check - 获取实体对象
2014-03-28 23:19:04,939 [12] DEBUG Mms - select mms_check.* from mms_check where BillNo='201403280001'
2014-03-28 23:19:04,941 [12] DEBUG Servicemms_check - 获取上一条下一条数据
2014-03-28 23:19:04,942 [12] DEBUG Servicemms_check - 获取字段
2014-03-28 23:19:04,942 [12] DEBUG Mms - select top 1 BillNo from mms_check where ProjectCode='201306030001' order by BillNo
2014-03-28 23:19:04,944 [12] DEBUG Servicemms_check - 获取字段
2014-03-28 23:19:04,944 [12] DEBUG Mms - select top 1 BillNo from mms_check where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:19:04,946 [12] DEBUG Servicemms_check - 获取字段
2014-03-28 23:19:04,946 [12] DEBUG Mms - select top 1 BillNo from mms_check where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:19:04,948 [12] DEBUG Servicemms_check - 获取字段
2014-03-28 23:19:04,948 [12] DEBUG Mms - select top 1 BillNo from mms_check where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:19:04,959 [12] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:04,959 [12] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:19:04,960 [12] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:19:04,960 [12] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:19:06,068 [9] DEBUG Servicemms_check - 获取动态列表
2014-03-28 23:19:06,068 [9] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_checkDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201403280001' order by A.MaterialCode
2014-03-28 23:19:09,605 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2014-03-28 23:19:09,639 [9] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:19:09,639 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:19:10,842 [23] DEBUG Servicemms_repair - 获取动态列表
2014-03-28 23:19:10,843 [23] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:19:10,889 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:19:16,399 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2014-03-28 23:19:16,423 [12] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:19:16,424 [12] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:19:16,926 [23] DEBUG Servicemms_repair - 获取动态列表
2014-03-28 23:19:16,927 [23] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:19:16,928 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:19:18,065 [9] DEBUG Servicemms_repair - 获取新主键
2014-03-28 23:19:18,066 [9] DEBUG Mms - select isnull(max(BillNo),0) from mms_repair
2014-03-28 23:19:18,161 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/edit')
2014-03-28 23:19:18,171 [9] DEBUG Servicemms_repair - 获取实体对象
2014-03-28 23:19:18,172 [9] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201403280001'
2014-03-28 23:19:18,173 [9] DEBUG Servicemms_repair - 获取上一条下一条数据
2014-03-28 23:19:18,175 [9] DEBUG Servicemms_repair - 获取字段
2014-03-28 23:19:18,175 [9] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo
2014-03-28 23:19:18,178 [9] DEBUG Servicemms_repair - 获取字段
2014-03-28 23:19:18,178 [9] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:19:18,180 [9] DEBUG Servicemms_repair - 获取字段
2014-03-28 23:19:18,180 [9] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:19:18,182 [9] DEBUG Servicemms_repair - 获取字段
2014-03-28 23:19:18,182 [9] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:19:18,193 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:18,193 [9] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:19:18,194 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:18,194 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-28 23:19:18,194 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:18,195 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-28 23:19:18,195 [9] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:19:18,195 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:19:19,273 [9] DEBUG Servicemms_repairDetail - 获取动态列表
2014-03-28 23:19:19,274 [9] DEBUG Mms - select * from mms_repairDetail where BillNo='201403280001' order by RepairNo
2014-03-28 23:19:22,152 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/deal/Index','/Mms/deal')
2014-03-28 23:19:22,176 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:22,176 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalType'
2014-03-28 23:19:22,185 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:22,185 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalWay'
2014-03-28 23:19:23,404 [23] DEBUG Servicemms_deal - 获取动态列表
2014-03-28 23:19:23,405 [23] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:19:23,447 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:19:24,301 [9] DEBUG Servicemms_deal - 获取新主键
2014-03-28 23:19:24,301 [9] DEBUG Mms - select isnull(max(BillNo),0) from mms_deal
2014-03-28 23:19:24,359 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/deal/edit')
2014-03-28 23:19:24,389 [23] DEBUG Servicemms_deal - 获取实体对象
2014-03-28 23:19:24,389 [23] DEBUG Mms - select mms_deal.* from mms_deal where BillNo='201403280001'
2014-03-28 23:19:24,392 [23] DEBUG Servicemms_deal - 获取上一条下一条数据
2014-03-28 23:19:24,393 [23] DEBUG Servicemms_deal - 获取字段
2014-03-28 23:19:24,394 [23] DEBUG Mms - select top 1 BillNo from mms_deal where ProjectCode='201306030001' order by BillNo
2014-03-28 23:19:24,396 [23] DEBUG Servicemms_deal - 获取字段
2014-03-28 23:19:24,396 [23] DEBUG Mms - select top 1 BillNo from mms_deal where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:19:24,398 [23] DEBUG Servicemms_deal - 获取字段
2014-03-28 23:19:24,398 [23] DEBUG Mms - select top 1 BillNo from mms_deal where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:19:24,421 [23] DEBUG Servicemms_deal - 获取字段
2014-03-28 23:19:24,421 [23] DEBUG Mms - select top 1 BillNo from mms_deal where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:19:24,432 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:24,432 [23] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:19:24,432 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:24,433 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalType'
2014-03-28 23:19:24,433 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:24,433 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalWay'
2014-03-28 23:19:24,433 [23] DEBUG Servicesys_code - 获取字段
2014-03-28 23:19:24,433 [23] DEBUG Sys - select top 1 Code from sys_code where CodeType='DisposalType' and IsEnable='1' and IsDefault='1'
2014-03-28 23:19:24,435 [23] DEBUG Servicesys_code - 获取字段
2014-03-28 23:19:24,435 [23] DEBUG Sys - select top 1 Code from sys_code where CodeType='DisposalWay' and IsEnable='1' and IsDefault='1'
2014-03-28 23:19:25,626 [12] DEBUG Servicemms_dealDetail - 获取动态列表
2014-03-28 23:19:25,627 [12] DEBUG Mms - select A.*,B.MerchantsName as ExpendCompanyName from mms_dealDetail A
        left join mms_merchants B on B.MerchantsCode = A.ExpendCompany where BillNo='201403280001' order by A.RowId
2014-03-28 23:19:28,558 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2014-03-28 23:19:28,568 [23] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:19:28,568 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:19:29,785 [23] DEBUG Servicemms_rentOut - 获取动态列表
2014-03-28 23:19:29,786 [23] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2014-03-28 23:19:29,826 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2014-03-28 23:19:30,718 [9] DEBUG Servicemms_rentOut - 获取新主键
2014-03-28 23:19:30,719 [9] DEBUG Mms - select isnull(max(BillNo),0) from mms_rentOut
2014-03-28 23:19:30,788 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/edit')
2014-03-28 23:19:30,814 [12] DEBUG Servicemms_rentOut - 获取实体对象
2014-03-28 23:19:30,814 [12] DEBUG Mms - select mms_rentOut.* from mms_rentOut where BillNo='201403280001'
2014-03-28 23:19:30,822 [12] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2014-03-28 23:19:30,823 [12] DEBUG Servicemms_rentOut - 获取字段
2014-03-28 23:19:30,823 [12] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo
2014-03-28 23:19:30,825 [12] DEBUG Servicemms_rentOut - 获取字段
2014-03-28 23:19:30,825 [12] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:19:30,828 [12] DEBUG Servicemms_rentOut - 获取字段
2014-03-28 23:19:30,829 [12] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:19:30,831 [12] DEBUG Servicemms_rentOut - 获取字段
2014-03-28 23:19:30,831 [12] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:19:30,842 [12] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:19:30,842 [12] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:19:31,891 [23] DEBUG Servicemms_rentOut - 获取动态列表
2014-03-28 23:19:31,892 [23] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo from mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId where A.BillNo='201403280001' order by A.MaterialCode
2014-03-28 23:27:01,810 [22] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:27:01,839 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:27:01,919 [22] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:27:01,942 [22] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:27:01,942 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:27:02,729 [21] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:27:07,342 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:27:17,895 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/merchant/Index','/Mms/merchant')
2014-03-28 23:27:18,240 [22] DEBUG Servicemms_merchants - 获取实体列表
2014-03-28 23:27:18,247 [21] DEBUG Servicemms_merchantsType - 获取动态列表
2014-03-28 23:27:18,251 [22] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants order by MerchantsCode
2014-03-28 23:27:18,255 [22] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants ) tb_temp
2014-03-28 23:27:18,286 [21] DEBUG Mms - select mms_merchantsType.* from mms_merchantsType order by MerchantsTypeCode
2014-03-28 23:27:19,204 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:27:22,199 [21] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/merchant/Index','/Mms/merchant')
2014-03-28 23:27:22,470 [22] DEBUG Servicemms_merchantsType - 获取动态列表
2014-03-28 23:27:22,471 [22] DEBUG Mms - select mms_merchantsType.* from mms_merchantsType order by MerchantsTypeCode
2014-03-28 23:27:22,508 [22] DEBUG Servicemms_merchants - 获取实体列表
2014-03-28 23:27:22,508 [22] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants order by MerchantsCode
2014-03-28 23:27:22,510 [22] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants ) tb_temp
2014-03-28 23:27:23,199 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:27:24,870 [21] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/merchant/Index','/Mms/merchant')
2014-03-28 23:27:25,156 [9] DEBUG Servicemms_merchantsType - 获取动态列表
2014-03-28 23:27:25,156 [9] DEBUG Mms - select mms_merchantsType.* from mms_merchantsType order by MerchantsTypeCode
2014-03-28 23:27:25,191 [9] DEBUG Servicemms_merchants - 获取实体列表
2014-03-28 23:27:25,192 [9] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants order by MerchantsCode
2014-03-28 23:27:25,194 [9] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants ) tb_temp
2014-03-28 23:27:25,745 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:27:34,262 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:29:20,658 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:29:20,658 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:29:20,680 [12] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:29:20,688 [12] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:29:20,689 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:29:21,030 [22] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:29:26,816 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:29:33,156 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:29:34,270 [21] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:34:45,147 [10] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:34:45,153 [10] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:34:45,183 [10] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:34:45,193 [10] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:34:45,193 [10] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:34:45,532 [10] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:34:50,433 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:34:51,522 [10] DEBUG Servicebase_area - 获取动态列表
2014-03-28 23:34:51,534 [8] DEBUG Servicebase_area - 获取动态列表
2014-03-28 23:34:51,537 [10] DEBUG Trade - select * from base_area order by keyid
2014-03-28 23:34:51,565 [8] DEBUG Trade - select top 20 * from base_area order by keyid
2014-03-28 23:34:51,566 [8] DEBUG Trade - select count(*) from ( select * from base_area ) tb_temp
2014-03-28 23:42:14,664 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 23:42:14,723 [17] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 23:42:14,749 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 23:42:14,808 [17] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 23:42:14,817 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 23:42:14,822 [17] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-28 23:42:15,591 [15] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:42:15,614 [15] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:42:16,133 [15] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:42:16,636 [15] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:42:16,636 [15] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:42:17,839 [15] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:42:22,167 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:25,855 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:26,824 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:27,747 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:28,579 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:29,608 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:30,496 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:31,376 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:32,336 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:33,278 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:42:34,165 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:43:00,132 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/material/Index','/Mms/material')
2014-03-28 23:43:01,786 [14] DEBUG Servicemms_materialType - 获取动态列表
2014-03-28 23:43:01,787 [14] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2014-03-28 23:43:01,796 [7] DEBUG Servicemms_material - 获取实体列表
2014-03-28 23:43:01,801 [7] DEBUG Mms - select top 20 mms_material.* from mms_material order by MaterialCode
2014-03-28 23:43:01,856 [7] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material ) tb_temp
2014-03-28 23:43:14,977 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/project/Index','/Mms/project')
2014-03-28 23:43:14,987 [14] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:43:14,988 [14] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 23:43:14,992 [14] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:43:15,010 [14] DEBUG Servicemms_project - 获取字段
2014-03-28 23:43:15,010 [14] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:43:15,011 [14] DEBUG Servicemms_project - 获取字段
2014-03-28 23:43:15,012 [14] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:43:15,012 [14] DEBUG Servicemms_project - 获取字段
2014-03-28 23:43:15,013 [14] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:43:15,014 [14] DEBUG Servicemms_project - 获取字段
2014-03-28 23:43:15,014 [14] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:43:15,026 [14] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:43:15,027 [14] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PartAttr'
2014-03-28 23:43:15,027 [14] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:43:15,028 [14] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='ImagePart'
2014-03-28 23:43:16,616 [14] DEBUG Servicemms_project - 获取动态列表
2014-03-28 23:43:16,617 [14] DEBUG Mms - select ProjectName as text,ProjectCode as id,ParentCode as pid from mms_project
2014-03-28 23:43:16,730 [7] DEBUG Servicemms_project - 获取实体对象
2014-03-28 23:43:16,731 [14] DEBUG Servicemms_buildPart - 获取实体列表
2014-03-28 23:43:16,731 [7] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-28 23:43:16,732 [7] DEBUG Servicemms_project - 获取上一条下一条数据
2014-03-28 23:43:16,732 [7] DEBUG Servicemms_project - 获取字段
2014-03-28 23:43:16,732 [7] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:43:16,734 [7] DEBUG Servicemms_project - 获取字段
2014-03-28 23:43:16,734 [7] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:43:16,734 [7] DEBUG Servicemms_project - 获取字段
2014-03-28 23:43:16,734 [7] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2014-03-28 23:43:16,735 [7] DEBUG Servicemms_project - 获取字段
2014-03-28 23:43:16,735 [7] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2014-03-28 23:43:16,750 [14] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030001'
2014-03-28 23:44:35,125 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:44:35,126 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:44:35,139 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:44:35,140 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:44:35,140 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:44:35,459 [14] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:44:42,372 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:44:43,202 [14] DEBUG Servicebase_area - 获取动态列表
2014-03-28 23:44:43,203 [14] DEBUG Trade - select * from base_area order by keyid
2014-03-28 23:45:28,199 [14] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:45:28,199 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:45:28,221 [14] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:45:28,243 [14] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:45:28,244 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:45:28,565 [15] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:45:32,348 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:45:49,308 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2014-03-28 23:45:49,312 [7] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:45:49,313 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:45:49,313 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:45:49,314 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-28 23:45:50,778 [7] DEBUG Servicemms_receive - 获取动态列表
2014-03-28 23:45:50,778 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-28 23:45:50,792 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-28 23:45:53,353 [7] DEBUG Servicemms_receive - 获取新主键
2014-03-28 23:45:53,355 [7] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2014-03-28 23:45:53,411 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2014-03-28 23:45:53,416 [14] DEBUG Servicemms_receive - 获取实体对象
2014-03-28 23:45:53,419 [14] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201403280001'
2014-03-28 23:45:53,422 [14] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-03-28 23:45:53,423 [14] DEBUG Servicemms_receive - 获取字段
2014-03-28 23:45:53,423 [14] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-03-28 23:45:53,427 [14] DEBUG Servicemms_receive - 获取字段
2014-03-28 23:45:53,427 [14] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201403280001' and ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:45:53,429 [14] DEBUG Servicemms_receive - 获取字段
2014-03-28 23:45:53,430 [14] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201403280001' and ProjectCode='201306030001' order by BillNo
2014-03-28 23:45:53,431 [14] DEBUG Servicemms_receive - 获取字段
2014-03-28 23:45:53,431 [14] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-03-28 23:45:53,447 [14] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:45:53,447 [14] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-28 23:45:53,454 [14] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:45:53,454 [14] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-28 23:45:53,455 [14] DEBUG Servicesys_code - 获取动态列表
2014-03-28 23:45:53,455 [14] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-28 23:45:53,455 [14] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-28 23:45:53,456 [14] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-28 23:45:53,457 [14] DEBUG Servicesys_code - 获取字段
2014-03-28 23:45:53,457 [14] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-03-28 23:45:53,457 [14] DEBUG Servicesys_code - 获取字段
2014-03-28 23:45:53,457 [14] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-03-28 23:45:54,836 [7] DEBUG Servicemms_receive - 获取动态列表
2014-03-28 23:45:54,837 [7] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201403280001' order by A.MaterialCode
2014-03-28 23:46:44,079 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:46:44,079 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:46:44,115 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:46:44,116 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:46:44,116 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:46:44,457 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:46:50,183 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:47:57,568 [5] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:47:57,569 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:47:57,605 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:47:57,606 [5] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:47:57,606 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:47:57,950 [15] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:48:01,674 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
2014-03-28 23:48:03,179 [14] DEBUG Servicebase_area - 获取动态列表
2014-03-28 23:48:03,186 [14] DEBUG Trade - select * from base_area order by keyid
2014-03-28 23:48:17,809 [14] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:48:17,809 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-28 23:48:17,835 [14] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-28 23:48:17,841 [14] DEBUG Servicesys_parameter - 获取字段
2014-03-28 23:48:17,842 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-28 23:48:18,212 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-28 23:48:22,204 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/area/Index','/Trade/area')
