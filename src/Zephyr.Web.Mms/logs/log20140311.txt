2014-03-11 08:46:01,463 [5] ERROR /Login - System.TypeInitializationException: “Zephyr.Web.Sys.DbCreatorBase”的类型初始值设定项引发异常。 ---> System.Data.SqlClient.SqlException: 在与 SQL Server 建立连接时出现与网络相关的或特定于实例的错误。未找到或无法访问服务器。请验证实例名称是否正确并且 SQL Server 已配置为允许远程连接。 (provider: Shared Memory Provider, error: 40 - 无法打开到 SQL Server 的连接) ---> System.ComponentModel.Win32Exception: 系统找不到指定的文件。
   --- 内部异常堆栈跟踪的结尾 ---
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Web.Sys.DbCreatorBase.GetDefaultConnectionName() 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 57
   在 Zephyr.Web.Sys.DbCreatorBase..cctor() 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 26
   --- 内部异常堆栈跟踪的结尾 ---
   在 Zephyr.Web.Sys.SysEntrance.OnFrameworkActionExecuting(ActionExecutingContext filterContext) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\SysEntrance.cs:行号 54
   在 Zephyr.Web.Mvc.WebFrameworkFilter.OnActionExecuting(ActionExecutingContext filterContext) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Mvc\Webstack\WebFrameworkFilter.cs:行号 12
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.InvokeActionMethodFilterAsynchronously(IActionFilter filter, ActionExecutingContext preContext, Func`1 nextInChain)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<>c__DisplayClass3b.<BeginInvokeActionMethodWithFilters>b__35()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__31(AsyncCallback asyncCallback, Object asyncState)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.Begin(AsyncCallback callback, Object state, Int32 timeout)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.BeginInvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters, AsyncCallback callback, Object state)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__1e(AsyncCallback asyncCallback, Object asyncState)
2014-03-11 08:46:47,960 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:46:48,922 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:46:49,240 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:46:49,312 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:46:49,443 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:46:49,473 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:46:49,680 [5] DEBUG Servicesys_parameter - 获取字段
2014-03-11 08:46:49,697 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 08:46:49,980 [5] DEBUG Servicesys_parameter - 获取字段
2014-03-11 08:46:49,980 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 08:47:20,355 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:47:20,367 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:47:20,370 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:47:20,370 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:47:20,376 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:47:20,376 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 08:47:20,630 [5] DEBUG Servicesys_user - 获取实体对象
2014-03-11 08:47:20,639 [5] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-11 08:47:20,926 [5] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-11 08:47:21,141 [5] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/11 8:47:21')
2014-03-11 08:47:21,185 [5] DEBUG Servicemms_project - 获取实体对象
2014-03-11 08:47:21,185 [5] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-11 08:47:21,375 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 08:47:21,377 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 08:47:21,538 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 08:47:21,855 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 08:47:21,855 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 08:47:23,005 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 08:48:35,184 [13] DEBUG Servicesys_parameter - 获取字段
2014-03-11 08:48:35,185 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 08:48:35,206 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 08:48:35,207 [13] DEBUG Servicesys_parameter - 获取字段
2014-03-11 08:48:35,207 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 08:48:35,463 [16] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:13:46,791 [53] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:13:46,891 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:13:46,904 [53] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:13:46,906 [53] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:13:46,906 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:13:48,048 [54] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:14:12,898 [54] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:14:12,898 [54] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:14:12,924 [54] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:14:12,924 [54] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 09:14:24,182 [47] DEBUG Servicesys_user - 获取实体对象
2014-03-11 09:14:24,183 [47] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-11 09:14:24,188 [47] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-11 09:14:24,197 [47] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/11 9:14:24')
2014-03-11 09:14:24,200 [47] DEBUG Servicemms_project - 获取实体对象
2014-03-11 09:14:24,261 [47] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-11 09:14:24,329 [53] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:14:24,332 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:14:24,344 [53] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:14:24,347 [53] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:14:24,348 [53] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:14:24,420 [51] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:18:07,707 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:18:07,753 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:18:07,759 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:18:07,766 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:18:07,809 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:18:07,833 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:18:08,570 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:18:08,581 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:18:09,163 [6] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:18:09,451 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:18:09,451 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:18:10,142 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:18:15,698 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:18:15,698 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:18:15,752 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:18:15,752 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 09:18:23,610 [7] DEBUG Servicesys_user - 获取实体对象
2014-03-11 09:18:23,611 [7] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-11 09:18:23,628 [7] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-11 09:18:23,654 [7] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/11 9:18:23')
2014-03-11 09:18:23,664 [7] DEBUG Servicemms_project - 获取实体对象
2014-03-11 09:18:23,664 [7] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-11 09:18:23,717 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:18:23,717 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:18:23,728 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:18:23,735 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:18:23,735 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:18:23,907 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:19:02,230 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:19:02,253 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:19:02,259 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:19:02,266 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:19:02,271 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:19:02,277 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:19:02,568 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:19:02,579 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:19:02,881 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:19:03,172 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:19:03,172 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:19:04,313 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:21:14,344 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:21:16,337 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:21:48,374 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:21:48,374 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 09:24:45,402 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:24:45,428 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:24:45,435 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:24:45,442 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:24:45,448 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:24:45,454 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 09:28:25,012 [8] ERROR /Login - System.InvalidOperationException: ExecuteReader: CommandText 属性尚未初始化
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Web.Sys.DbCreatorBase.GetDefaultConnectionName() 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\DbCreator\DbCreatorBase.cs:行号 57
   在 Zephyr.Core.AttributeHelper._GetModuleAttribute(Type type) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Core\Attribute.cs:行号 33
   在 System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory)
   在 Zephyr.Core.AttributeHelper.GetModuleAttribute(Type type) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Core\Attribute.cs:行号 22
   在 Zephyr.Core.ServiceBase`1..ctor() 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 28
   在 Zephyr.Web.Sys.Models.sys_parameterService..ctor()
   在 Zephyr.Web.Sys.SysEntrance.GetParameter(String name) 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Sys\Areas\Sys\Common\SysEntrance.cs:行号 67
   在 Zephyr.Web.Mvc.Controllers.LoginController.Index() 位置 d:\lbl\SOFT\Zephyr.Net20140310\Zephyr.Net\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\LoginController.cs:行号 18
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2014-03-11 09:29:02,280 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:29:02,292 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:29:15,359 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:29:15,359 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 09:29:58,777 [9] DEBUG Servicesys_user - 获取实体对象
2014-03-11 09:29:58,778 [9] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-11 09:29:58,850 [9] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-11 09:29:58,879 [9] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/11 9:29:58')
2014-03-11 09:29:58,888 [9] DEBUG Servicemms_project - 获取实体对象
2014-03-11 09:29:58,889 [9] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-11 09:29:58,923 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:29:58,923 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:29:59,203 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:29:59,489 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:29:59,489 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:30:00,302 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:30:34,227 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:37:32,566 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:38:58,563 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:38:58,564 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 09:42:44,096 [27] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:42:44,096 [27] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:42:44,098 [27] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:42:44,099 [27] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 09:42:52,388 [27] DEBUG Servicesys_user - 获取实体对象
2014-03-11 09:42:52,389 [27] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-11 09:42:52,395 [27] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-11 09:42:52,402 [27] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/11 9:42:52')
2014-03-11 09:42:52,404 [27] DEBUG Servicemms_project - 获取实体对象
2014-03-11 09:42:52,407 [27] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-11 09:42:52,423 [24] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:42:52,423 [24] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:42:52,428 [24] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:42:52,430 [24] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:42:52,430 [24] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:42:52,634 [30] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:42:58,504 [28] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:42:58,505 [28] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:42:58,505 [28] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:42:58,506 [28] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 09:48:41,581 [11] DEBUG Servicesys_user - 获取实体对象
2014-03-11 09:48:41,591 [11] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-11 09:48:41,593 [11] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-11 09:48:41,597 [11] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/11 9:48:41')
2014-03-11 09:48:41,598 [11] DEBUG Servicemms_project - 获取实体对象
2014-03-11 09:48:41,601 [11] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-11 09:48:41,616 [13] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:48:41,616 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:48:41,620 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:48:41,622 [13] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:48:41,622 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:48:41,784 [11] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:48:51,677 [20] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:48:51,677 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:48:51,685 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:48:51,689 [20] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:48:51,690 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:48:51,953 [11] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:48:58,481 [13] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:48:58,483 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:48:58,484 [13] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:48:58,484 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 09:49:08,545 [11] DEBUG Servicesys_user - 获取实体对象
2014-03-11 09:49:08,546 [11] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-11 09:49:08,548 [11] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-11 09:49:08,557 [11] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/11 9:49:08')
2014-03-11 09:49:08,559 [11] DEBUG Servicemms_project - 获取实体对象
2014-03-11 09:49:08,560 [11] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-11 09:49:08,581 [11] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:49:08,581 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:49:08,585 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:49:08,587 [11] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:49:08,587 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:49:08,718 [11] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 09:53:59,725 [26] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:53:59,729 [26] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 09:53:59,735 [26] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 09:53:59,736 [26] DEBUG Servicesys_parameter - 获取字段
2014-03-11 09:53:59,736 [26] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 09:54:00,060 [26] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 10:49:49,459 [58] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:49:49,474 [58] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:49:49,478 [58] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:49:49,482 [58] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:49:49,485 [58] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:49:49,488 [58] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:49:49,815 [59] DEBUG Servicesys_parameter - 获取字段
2014-03-11 10:49:49,825 [59] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 10:49:50,033 [59] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 10:49:50,287 [59] DEBUG Servicesys_parameter - 获取字段
2014-03-11 10:49:50,288 [59] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 10:49:51,521 [63] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 10:49:56,813 [59] DEBUG Servicesys_parameter - 获取字段
2014-03-11 10:49:56,813 [59] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 10:49:56,815 [59] DEBUG Servicesys_parameter - 获取字段
2014-03-11 10:49:56,815 [59] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 10:58:30,128 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:58:30,141 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:58:30,147 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:58:30,147 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:58:30,155 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:58:30,156 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 10:58:30,460 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-11 10:58:30,469 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 10:58:30,487 [6] DEBUG Servicesys_parameter - 获取字段
2014-03-11 10:58:30,487 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-11 10:58:36,956 [7] DEBUG Servicesys_user - 获取实体对象
2014-03-11 10:58:36,957 [7] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-11 10:58:37,018 [7] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-11 10:58:37,054 [7] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/11 10:58:37')
2014-03-11 10:58:37,056 [7] DEBUG Servicemms_project - 获取实体对象
2014-03-11 10:58:37,057 [7] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-11 10:58:37,083 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 10:58:37,084 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 10:58:37,199 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 10:58:37,390 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 10:58:37,390 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 10:58:38,014 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 10:58:39,633 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-11 10:58:39,663 [6] DEBUG Servicesys_code - 获取动态列表
2014-03-11 10:58:39,664 [6] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-11 10:58:41,579 [6] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 10:58:41,579 [6] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-11 10:58:41,759 [6] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-11 10:58:43,192 [7] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 10:58:43,194 [7] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 10:58:43,274 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 10:58:43,285 [7] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 10:58:43,286 [7] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110001'
2014-03-11 10:58:43,300 [7] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 10:58:43,311 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 10:58:43,311 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno
2014-03-11 10:58:43,361 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 10:58:43,362 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110001' and Jobno='201403110001' order by Jobno desc
2014-03-11 10:58:43,407 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 10:58:43,407 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110001' and Jobno='201403110001' order by Jobno
2014-03-11 10:58:43,409 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 10:58:43,409 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno desc
2014-03-11 10:58:44,253 [7] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 10:58:44,253 [7] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110001' order by A.Jobno
2014-03-11 10:58:53,478 [8] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 10:58:53,480 [8] DEBUG Trade - select isnull(max(Jobno),0) from trade_scheduler  where 1 = 1 and Jobno='201403110001'
2014-03-11 10:59:04,530 [7] DEBUG Servicetrade_trailer - 编辑记录
2014-03-11 10:59:04,557 [7] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno=''
2014-03-11 10:59:04,564 [7] DEBUG Trade - insert into trade_trailer([JOBNO],[TR_JOBNOIN],[TR_BLNO],[TR_CONNO],[TR_SEALNO],[TR_ORDERDATE]) values('201403110001','2','2','2','2','2014/3/11 10:58:43')
2014-03-11 10:59:04,613 [7] DEBUG Trade - select trade_scheduler.* from trade_scheduler where Jobno='201403110001' and SNO=''
2014-03-11 10:59:04,833 [7] DEBUG Trade - insert into trade_scheduler([Jobno]) values('201403110001')
2014-03-11 10:59:05,048 [7] ERROR Servicetrade_trailer - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'SNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<Edit>b__a(RequestWrapper x) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 66
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 180
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:b1df8702-698d-478d-9ab9-5ff6d4261ac6
2014-03-11 10:59:05,094 [7] ERROR /api/trade/trailer/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'SNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 70
   在 CallSite.Target(Closure , CallSite , trade_trailerService , Object , RequestWrapper , List`1 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Web.Trade.Controllers.TrailerApiController.Edit(Object data) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Controllers\TrailerController.cs:行号 238
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:b1df8702-698d-478d-9ab9-5ff6d4261ac6
2014-03-11 11:00:24,318 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:00:24,330 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:00:24,333 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:00:24,333 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:00:24,336 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:00:24,336 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:00:24,539 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 11:00:24,549 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 11:00:24,696 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 11:00:24,890 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-11 11:00:24,890 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 11:00:25,535 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 11:00:46,897 [11] DEBUG Servicesys_parameter - 获取字段
2014-03-11 11:00:46,897 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 11:00:46,947 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 11:00:46,962 [11] DEBUG Servicesys_parameter - 获取字段
2014-03-11 11:00:46,962 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 11:00:47,161 [11] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 11:00:48,772 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-11 11:00:48,779 [11] DEBUG Servicesys_code - 获取动态列表
2014-03-11 11:00:48,779 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-11 11:00:49,828 [9] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 11:00:49,828 [9] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-11 11:00:49,837 [9] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-11 11:00:51,054 [11] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 11:00:51,056 [11] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 11:00:51,115 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 11:00:51,122 [11] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 11:00:51,123 [11] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110001'
2014-03-11 11:00:51,133 [11] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 11:00:51,141 [11] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 11:00:51,141 [11] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno
2014-03-11 11:00:51,144 [11] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 11:00:51,144 [11] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110001' and Jobno='201403110001' order by Jobno desc
2014-03-11 11:00:51,146 [11] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 11:00:51,146 [11] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110001' and Jobno='201403110001' order by Jobno
2014-03-11 11:00:51,148 [11] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 11:00:51,148 [11] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno desc
2014-03-11 11:00:51,870 [11] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 11:00:51,870 [11] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110001' order by A.Jobno
2014-03-11 11:00:54,657 [9] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 11:00:54,659 [9] DEBUG Trade - select isnull(max(Jobno),0) from trade_scheduler  where 1 = 1 and Jobno='201403110001'
2014-03-11 11:08:41,637 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:41,649 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:41,652 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:41,652 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:41,654 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:41,655 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:41,853 [17] DEBUG Servicesys_parameter - 获取字段
2014-03-11 11:08:41,863 [17] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 11:08:42,012 [17] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 11:08:42,203 [17] DEBUG Servicesys_parameter - 获取字段
2014-03-11 11:08:42,203 [17] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 11:08:42,963 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 11:08:46,224 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:46,239 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:46,243 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:46,243 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:46,246 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:46,246 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:46,472 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-11 11:08:46,480 [12] DEBUG Servicesys_code - 获取动态列表
2014-03-11 11:08:46,488 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-11 11:08:46,998 [10] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 11:08:47,673 [12] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 11:08:49,924 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:49,937 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:49,939 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:49,939 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:49,941 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:49,942 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:50,380 [6] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 11:08:50,388 [6] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-11 11:08:50,404 [6] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-11 11:08:52,501 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:52,513 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:52,517 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:52,518 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:52,520 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:52,521 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 11:08:52,790 [15] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 11:08:52,793 [15] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 11:08:53,013 [17] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 11:08:53,020 [17] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 11:08:53,028 [17] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110001'
2014-03-11 11:08:53,033 [17] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 11:08:53,042 [17] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 11:08:53,043 [17] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno
2014-03-11 11:08:53,046 [17] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 11:08:53,046 [17] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110001' and Jobno='201403110001' order by Jobno desc
2014-03-11 11:08:53,047 [17] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 11:08:53,047 [17] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110001' and Jobno='201403110001' order by Jobno
2014-03-11 11:08:53,048 [17] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 11:08:53,048 [17] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno desc
2014-03-11 11:08:53,629 [17] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 11:08:54,867 [6] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 11:08:54,868 [6] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110001' order by A.Jobno
2014-03-11 11:09:00,567 [9] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 11:09:00,568 [9] DEBUG Trade - select isnull(max(SNO),0) from trade_scheduler  where 1 = 1 and Jobno='201403110001'
2014-03-11 11:09:06,333 [10] DEBUG Servicetrade_trailer - 编辑记录
2014-03-11 11:09:06,342 [10] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno=''
2014-03-11 11:09:06,350 [10] DEBUG Trade - insert into trade_trailer([JOBNO],[TR_JOBNOIN],[TR_BLNO],[TR_CONNO],[TR_SEALNO],[TR_ORDERDATE]) values('201403110001','2','2','2','2','2014/3/11 11:08:53')
2014-03-11 11:09:06,351 [10] DEBUG Trade - select trade_scheduler.* from trade_scheduler where Jobno='201403110001' and SNO=''
2014-03-11 11:09:06,352 [10] DEBUG Trade - insert into trade_scheduler([Jobno]) values('201403110001')
2014-03-11 11:09:06,354 [10] ERROR Servicetrade_trailer - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'SNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<Edit>b__a(RequestWrapper x) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 66
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 180
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:5663ce6d-3fa5-4cd5-9c62-504a578253b1
2014-03-11 11:09:06,379 [10] ERROR /api/trade/trailer/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'SNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 70
   在 CallSite.Target(Closure , CallSite , trade_trailerService , Object , RequestWrapper , List`1 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Web.Trade.Controllers.TrailerApiController.Edit(Object data) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Controllers\TrailerController.cs:行号 238
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:5663ce6d-3fa5-4cd5-9c62-504a578253b1
2014-03-11 13:50:34,982 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 13:50:35,029 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 13:50:35,033 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 13:50:35,104 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 13:50:35,109 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 13:50:35,165 [18] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 13:50:35,992 [60] DEBUG Servicesys_parameter - 获取字段
2014-03-11 13:50:36,003 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 13:50:36,613 [60] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 13:50:37,367 [60] DEBUG Servicesys_parameter - 获取字段
2014-03-11 13:50:37,367 [60] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 13:50:38,556 [59] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 13:50:40,444 [57] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-11 13:50:40,453 [57] DEBUG Servicesys_code - 获取动态列表
2014-03-11 13:50:40,453 [57] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-11 13:50:42,508 [57] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 13:50:42,508 [57] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-11 13:50:42,665 [57] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-11 13:50:44,983 [59] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 13:50:44,986 [59] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 13:50:45,130 [60] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 13:50:45,187 [60] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 13:50:45,187 [60] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110001'
2014-03-11 13:50:45,220 [60] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 13:50:45,227 [60] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 13:50:45,228 [60] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno
2014-03-11 13:50:45,230 [60] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 13:50:45,230 [60] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110001' and Jobno='201403110001' order by Jobno desc
2014-03-11 13:50:45,284 [60] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 13:50:45,284 [60] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110001' and Jobno='201403110001' order by Jobno
2014-03-11 13:50:45,286 [60] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 13:50:45,286 [60] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno desc
2014-03-11 13:50:46,044 [60] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 13:50:46,044 [60] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110001' order by A.Jobno
2014-03-11 13:50:47,479 [57] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 13:50:47,481 [57] DEBUG Trade - select isnull(max(SNO),0) from trade_scheduler  where 1 = 1 and Jobno='201403110001'
2014-03-11 13:50:58,136 [57] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/role/Index','/Sys/role')
2014-03-11 13:50:58,156 [57] DEBUG Servicesys_user - 获取动态列表
2014-03-11 13:50:58,157 [57] DEBUG Sys - select UserCode,UserName from sys_user
2014-03-11 13:50:58,234 [57] DEBUG Servicesys_organize - 获取动态列表
2014-03-11 13:50:58,234 [57] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2014-03-11 13:50:58,791 [57] DEBUG Servicesys_role - 获取实体列表
2014-03-11 13:50:58,792 [57] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2014-03-11 13:51:11,763 [57] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/role/Index','/Sys/role')
2014-03-11 13:51:11,766 [57] DEBUG Servicesys_user - 获取动态列表
2014-03-11 13:51:11,766 [57] DEBUG Sys - select UserCode,UserName from sys_user
2014-03-11 13:51:11,766 [57] DEBUG Servicesys_organize - 获取动态列表
2014-03-11 13:51:11,767 [57] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2014-03-11 13:51:12,385 [59] DEBUG Servicesys_role - 获取实体列表
2014-03-11 13:51:12,385 [59] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2014-03-11 15:49:35,060 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 15:49:35,162 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 15:49:35,186 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 15:49:35,186 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 15:49:35,191 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 15:49:35,203 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 15:49:36,633 [30] DEBUG Servicesys_parameter - 获取字段
2014-03-11 15:49:36,650 [30] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 15:49:37,924 [30] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 15:49:38,858 [30] DEBUG Servicesys_parameter - 获取字段
2014-03-11 15:49:38,858 [30] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 15:49:41,122 [35] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 15:49:43,823 [28] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-11 15:49:43,873 [28] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:49:43,874 [28] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-11 15:49:46,021 [28] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 15:49:46,022 [28] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 15:49:46,602 [35] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 15:49:46,602 [35] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-11 15:49:46,960 [35] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-11 15:49:47,004 [28] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 15:49:47,035 [28] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 15:49:47,035 [28] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110001'
2014-03-11 15:49:47,049 [28] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 15:49:47,057 [28] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 15:49:47,057 [28] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno
2014-03-11 15:49:47,063 [28] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 15:49:47,063 [28] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110001' and Jobno='201403110001' order by Jobno desc
2014-03-11 15:49:47,065 [28] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 15:49:47,065 [28] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110001' and Jobno='201403110001' order by Jobno
2014-03-11 15:49:47,088 [28] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 15:49:47,088 [28] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno desc
2014-03-11 15:49:47,938 [35] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 15:49:47,938 [35] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110001' order by A.Jobno
2014-03-11 15:50:28,242 [26] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 15:50:28,243 [26] DEBUG Trade - select isnull(max(SNO),0) from trade_scheduler  where 1 = 1 and Jobno='201403110001'
2014-03-11 15:50:32,242 [26] DEBUG Servicetrade_trailer - 编辑记录
2014-03-11 15:50:32,415 [26] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno=''
2014-03-11 15:50:32,489 [26] DEBUG Trade - insert into trade_trailer([JOBNO],[TR_JOBNOIN],[TR_CONNO],[TR_ORDERDATE]) values('201403110001','2','2','2014/3/11 15:49:47')
2014-03-11 15:50:33,025 [26] DEBUG Trade - select trade_scheduler.* from trade_scheduler where Jobno='201403110001' and SNO=''
2014-03-11 15:50:33,055 [26] DEBUG Trade - insert into trade_scheduler([Jobno]) values('201403110001')
2014-03-11 15:50:33,368 [26] ERROR Servicetrade_trailer - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'SNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<Edit>b__a(RequestWrapper x) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 66
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 180
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:0e192626-43a8-4825-b854-f84d1807549d
2014-03-11 15:50:33,579 [26] ERROR /api/trade/trailer/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'SNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 70
   在 CallSite.Target(Closure , CallSite , trade_trailerService , Object , RequestWrapper , List`1 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Web.Trade.Controllers.TrailerApiController.Edit(Object data) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Controllers\TrailerController.cs:行号 238
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:0e192626-43a8-4825-b854-f84d1807549d
2014-03-11 15:53:48,112 [30] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2014-03-11 15:53:48,353 [30] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-11 15:53:48,354 [30] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-11 15:53:49,766 [32] DEBUG Servicemms_rentOut - 获取动态列表
2014-03-11 15:53:49,769 [32] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2014-03-11 15:53:50,275 [32] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2014-03-11 15:53:51,125 [30] DEBUG Servicemms_rentOut - 获取新主键
2014-03-11 15:53:51,125 [30] DEBUG Mms - select isnull(max(BillNo),0) from mms_rentOut
2014-03-11 15:53:51,188 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/edit')
2014-03-11 15:53:51,243 [32] DEBUG Servicemms_rentOut - 获取实体对象
2014-03-11 15:53:51,243 [32] DEBUG Mms - select mms_rentOut.* from mms_rentOut where BillNo='201403110001'
2014-03-11 15:53:51,256 [32] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2014-03-11 15:53:51,257 [32] DEBUG Servicemms_rentOut - 获取字段
2014-03-11 15:53:51,257 [32] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo
2014-03-11 15:53:51,259 [32] DEBUG Servicemms_rentOut - 获取字段
2014-03-11 15:53:51,259 [32] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo<'201403110001' and ProjectCode='201306030001' order by BillNo desc
2014-03-11 15:53:51,292 [32] DEBUG Servicemms_rentOut - 获取字段
2014-03-11 15:53:51,292 [32] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo>'201403110001' and ProjectCode='201306030001' order by BillNo
2014-03-11 15:53:51,331 [32] DEBUG Servicemms_rentOut - 获取字段
2014-03-11 15:53:51,331 [32] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo desc
2014-03-11 15:53:51,341 [32] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:53:51,341 [32] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-11 15:53:52,236 [32] DEBUG Servicemms_rentOut - 获取动态列表
2014-03-11 15:53:52,238 [32] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo from mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId where A.BillNo='201403110001' order by A.MaterialCode
2014-03-11 15:53:59,154 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/deal/Index','/Mms/deal')
2014-03-11 15:53:59,201 [32] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:53:59,201 [32] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalType'
2014-03-11 15:53:59,203 [32] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:53:59,203 [32] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalWay'
2014-03-11 15:53:59,965 [30] DEBUG Servicemms_deal - 获取动态列表
2014-03-11 15:53:59,965 [30] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-11 15:53:59,995 [30] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-11 15:54:01,439 [32] DEBUG Servicemms_deal - 获取新主键
2014-03-11 15:54:01,439 [32] DEBUG Mms - select isnull(max(BillNo),0) from mms_deal
2014-03-11 15:54:01,487 [31] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/deal/edit')
2014-03-11 15:54:01,545 [31] DEBUG Servicemms_deal - 获取实体对象
2014-03-11 15:54:01,545 [31] DEBUG Mms - select mms_deal.* from mms_deal where BillNo='201403110001'
2014-03-11 15:54:01,548 [31] DEBUG Servicemms_deal - 获取上一条下一条数据
2014-03-11 15:54:01,549 [31] DEBUG Servicemms_deal - 获取字段
2014-03-11 15:54:01,549 [31] DEBUG Mms - select top 1 BillNo from mms_deal where ProjectCode='201306030001' order by BillNo
2014-03-11 15:54:01,552 [31] DEBUG Servicemms_deal - 获取字段
2014-03-11 15:54:01,552 [31] DEBUG Mms - select top 1 BillNo from mms_deal where BillNo<'201403110001' and ProjectCode='201306030001' order by BillNo desc
2014-03-11 15:54:01,554 [31] DEBUG Servicemms_deal - 获取字段
2014-03-11 15:54:01,555 [31] DEBUG Mms - select top 1 BillNo from mms_deal where BillNo>'201403110001' and ProjectCode='201306030001' order by BillNo
2014-03-11 15:54:01,592 [31] DEBUG Servicemms_deal - 获取字段
2014-03-11 15:54:01,592 [31] DEBUG Mms - select top 1 BillNo from mms_deal where ProjectCode='201306030001' order by BillNo desc
2014-03-11 15:54:01,601 [31] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:54:01,601 [31] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-11 15:54:01,602 [31] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:54:01,602 [31] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalType'
2014-03-11 15:54:01,602 [31] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:54:01,602 [31] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalWay'
2014-03-11 15:54:01,603 [31] DEBUG Servicesys_code - 获取字段
2014-03-11 15:54:01,603 [31] DEBUG Sys - select top 1 Code from sys_code where CodeType='DisposalType' and IsEnable='1' and IsDefault='1'
2014-03-11 15:54:01,619 [31] DEBUG Servicesys_code - 获取字段
2014-03-11 15:54:01,619 [31] DEBUG Sys - select top 1 Code from sys_code where CodeType='DisposalWay' and IsEnable='1' and IsDefault='1'
2014-03-11 15:54:02,378 [32] DEBUG Servicemms_dealDetail - 获取动态列表
2014-03-11 15:54:02,378 [32] DEBUG Mms - select A.*,B.MerchantsName as ExpendCompanyName from mms_dealDetail A
        left join mms_merchants B on B.MerchantsCode = A.ExpendCompany where BillNo='201403110001' order by A.RowId
2014-03-11 15:54:10,635 [30] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2014-03-11 15:54:10,702 [30] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-11 15:54:10,702 [30] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-11 15:54:11,648 [30] DEBUG Servicemms_repair - 获取动态列表
2014-03-11 15:54:11,648 [30] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-11 15:54:11,693 [30] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-11 15:54:12,630 [30] DEBUG Servicemms_repair - 获取新主键
2014-03-11 15:54:12,630 [30] DEBUG Mms - select isnull(max(BillNo),0) from mms_repair
2014-03-11 15:54:12,688 [30] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/edit')
2014-03-11 15:54:12,696 [30] DEBUG Servicemms_repair - 获取实体对象
2014-03-11 15:54:12,696 [30] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201403110001'
2014-03-11 15:54:12,715 [30] DEBUG Servicemms_repair - 获取上一条下一条数据
2014-03-11 15:54:12,717 [30] DEBUG Servicemms_repair - 获取字段
2014-03-11 15:54:12,717 [30] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo
2014-03-11 15:54:12,727 [30] DEBUG Servicemms_repair - 获取字段
2014-03-11 15:54:12,727 [30] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo<'201403110001' and ProjectCode='201306030001' order by BillNo desc
2014-03-11 15:54:12,753 [30] DEBUG Servicemms_repair - 获取字段
2014-03-11 15:54:12,753 [30] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo>'201403110001' and ProjectCode='201306030001' order by BillNo
2014-03-11 15:54:12,762 [30] DEBUG Servicemms_repair - 获取字段
2014-03-11 15:54:12,762 [30] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo desc
2014-03-11 15:54:12,772 [30] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:54:12,773 [30] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-11 15:54:12,783 [30] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:54:12,783 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-11 15:54:12,827 [30] DEBUG Servicesys_code - 获取动态列表
2014-03-11 15:54:12,827 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-11 15:54:12,828 [30] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-11 15:54:12,828 [30] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-11 15:54:13,529 [30] DEBUG Servicemms_repairDetail - 获取动态列表
2014-03-11 15:54:13,530 [30] DEBUG Mms - select * from mms_repairDetail where BillNo='201403110001' order by RepairNo
2014-03-11 15:54:17,941 [30] DEBUG Servicemms_repairDetail - 获取新主键
2014-03-11 15:54:17,941 [30] DEBUG Mms - select isnull(max(RowId),0) from mms_repairDetail  where 1 = 1 and BillNo='201403110001'
2014-03-11 16:13:16,920 [39] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:13:16,933 [39] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:13:16,937 [39] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:13:16,938 [39] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:13:16,940 [39] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:13:16,941 [39] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:13:17,172 [54] DEBUG Servicesys_parameter - 获取字段
2014-03-11 16:13:17,182 [54] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 16:13:17,351 [54] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 16:13:17,551 [54] DEBUG Servicesys_parameter - 获取字段
2014-03-11 16:13:17,551 [54] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 16:13:19,242 [37] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 16:13:22,499 [37] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-11 16:13:22,515 [37] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:13:22,516 [37] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-11 16:13:23,764 [36] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 16:13:23,764 [36] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-11 16:13:23,775 [36] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-11 16:13:24,208 [54] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 16:13:24,212 [54] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 16:13:24,259 [37] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 16:13:24,284 [37] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 16:13:24,284 [37] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110001'
2014-03-11 16:13:24,294 [37] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 16:13:24,306 [37] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:13:24,307 [37] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno
2014-03-11 16:13:24,319 [37] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:13:24,319 [37] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110001' and Jobno='201403110001' order by Jobno desc
2014-03-11 16:13:24,320 [37] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:13:24,321 [37] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110001' and Jobno='201403110001' order by Jobno
2014-03-11 16:13:24,324 [37] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:13:24,324 [37] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno desc
2014-03-11 16:13:25,142 [36] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 16:13:25,143 [36] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110001' order by A.Jobno
2014-03-11 16:13:29,500 [37] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 16:13:29,502 [37] DEBUG Trade - select isnull(max(SNO),0) from trade_scheduler  where 1 = 1 and Jobno='201403110001'
2014-03-11 16:13:32,685 [36] DEBUG Servicetrade_trailer - 编辑记录
2014-03-11 16:13:32,694 [36] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno=''
2014-03-11 16:13:32,703 [36] DEBUG Trade - insert into trade_trailer([JOBNO],[TR_JOBNOIN],[TR_CONNO],[TR_SEALNO],[TR_ORDERDATE]) values('201403110001','3','3','3','2014/3/11 16:13:24')
2014-03-11 16:13:32,737 [36] DEBUG Trade - select trade_scheduler.* from trade_scheduler where Jobno='' and SNO='1'
2014-03-11 16:13:32,738 [36] DEBUG Trade - insert into trade_scheduler([SNO],[SC_DRIVERCD],[SC_DRIVER],[SC_TRUCKCD],[SC_TRUCKNAME],[SC_FRAMECD],[SC_FRAMENO],[SC_DRIVERTEL],[SC_STARTDATE]) values('1','2'CD,'2','3','','','','','')
2014-03-11 16:13:32,742 [36] ERROR Servicetrade_trailer - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'JOBNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<Edit>b__a(RequestWrapper x) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 66
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 180
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:c0ca67d0-2be6-4f12-8969-ddab804a4910
2014-03-11 16:13:32,806 [36] ERROR /api/trade/trailer/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'JOBNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 70
   在 CallSite.Target(Closure , CallSite , trade_trailerService , Object , RequestWrapper , List`1 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Web.Trade.Controllers.TrailerApiController.Edit(Object data) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Controllers\TrailerController.cs:行号 238
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:c0ca67d0-2be6-4f12-8969-ddab804a4910
2014-03-11 16:22:24,750 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:24,763 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:24,769 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:24,770 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:24,773 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:24,774 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:25,003 [35] DEBUG Servicesys_parameter - 获取字段
2014-03-11 16:22:25,014 [35] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 16:22:25,218 [35] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 16:22:25,432 [35] DEBUG Servicesys_parameter - 获取字段
2014-03-11 16:22:25,432 [35] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 16:22:27,714 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:27,726 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:27,733 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:27,733 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:27,736 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:27,736 [14] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:22:27,948 [31] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 16:22:28,789 [35] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 16:22:54,015 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-11 16:22:55,220 [31] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 16:22:55,228 [31] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-11 16:22:55,238 [31] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-11 16:22:55,693 [26] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 16:22:55,697 [26] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 16:22:55,786 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 16:22:55,794 [26] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 16:22:55,797 [26] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110001'
2014-03-11 16:22:55,802 [26] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 16:22:55,812 [26] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:22:55,814 [26] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno
2014-03-11 16:22:55,851 [26] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:22:55,852 [26] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110001' and Jobno='201403110001' order by Jobno desc
2014-03-11 16:22:55,853 [26] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:22:55,853 [26] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110001' and Jobno='201403110001' order by Jobno
2014-03-11 16:22:55,854 [26] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:22:55,854 [26] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno desc
2014-03-11 16:22:56,561 [26] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 16:22:56,562 [26] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110001' order by A.Jobno
2014-03-11 16:22:59,777 [35] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 16:22:59,779 [35] DEBUG Trade - select isnull(max(SNO),0) from trade_scheduler  where 1 = 1 and Jobno='201403110001'
2014-03-11 16:23:03,282 [26] DEBUG Servicetrade_trailer - 编辑记录
2014-03-11 16:23:03,291 [26] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno=''
2014-03-11 16:23:03,299 [26] DEBUG Trade - insert into trade_trailer([JOBNO],[TR_JOBNOIN],[TR_BLNO],[TR_ORDERDATE]) values('201403110001','2','2','2014/3/11 16:22:55')
2014-03-11 16:23:03,330 [26] DEBUG Trade - select trade_scheduler.* from trade_scheduler where Jobno='' and SNO='1'
2014-03-11 16:23:03,331 [26] DEBUG Trade - insert into trade_scheduler([SNO],[SC_DRIVERCD],[SC_DRIVER],[SC_TRUCKCD],[SC_TRUCKNAME],[SC_FRAMECD],[SC_FRAMENO],[SC_DRIVERTEL],[SC_STARTDATE]) values('1','2'CD,'2','3','4','','','','')
2014-03-11 16:23:03,335 [26] ERROR Servicetrade_trailer - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'JOBNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<Edit>b__a(RequestWrapper x) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 66
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 180
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:8f783756-6056-4195-a7fc-e378f6801100
2014-03-11 16:23:03,363 [26] ERROR /api/trade/trailer/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'JOBNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 70
   在 CallSite.Target(Closure , CallSite , trade_trailerService , Object , RequestWrapper , List`1 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Web.Trade.Controllers.TrailerApiController.Edit(Object data) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Controllers\TrailerController.cs:行号 238
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:8f783756-6056-4195-a7fc-e378f6801100
2014-03-11 16:24:13,141 [28] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2014-03-11 16:24:13,150 [28] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-11 16:24:13,150 [28] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-11 16:24:14,020 [28] DEBUG Servicemms_repair - 获取动态列表
2014-03-11 16:24:14,021 [28] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-11 16:24:14,027 [28] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-11 16:24:17,146 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/edit')
2014-03-11 16:24:17,161 [26] DEBUG Servicemms_repair - 获取实体对象
2014-03-11 16:24:17,161 [26] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201306060001'
2014-03-11 16:24:17,166 [26] DEBUG Servicemms_repair - 获取上一条下一条数据
2014-03-11 16:24:17,168 [26] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:24:17,168 [26] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo
2014-03-11 16:24:17,173 [26] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:24:17,174 [26] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo<'201306060001' and ProjectCode='201306030001' order by BillNo desc
2014-03-11 16:24:17,185 [26] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:24:17,186 [26] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo>'201306060001' and ProjectCode='201306030001' order by BillNo
2014-03-11 16:24:17,251 [26] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:24:17,251 [26] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo desc
2014-03-11 16:24:17,261 [26] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:24:17,261 [26] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-11 16:24:17,264 [26] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:24:17,264 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-11 16:24:17,264 [26] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:24:17,264 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-11 16:24:17,265 [26] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-11 16:24:17,265 [26] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-11 16:24:17,981 [26] DEBUG ServiceModelBase - 获取动态列表
2014-03-11 16:24:17,981 [26] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00502%' order by MerchantsCode
2014-03-11 16:24:18,055 [28] DEBUG Servicemms_repairDetail - 获取动态列表
2014-03-11 16:24:18,111 [28] DEBUG Mms - select * from mms_repairDetail where BillNo='201306060001' order by RepairNo
2014-03-11 16:24:35,385 [26] DEBUG Servicemms_repair - 获取新主键
2014-03-11 16:24:35,386 [26] DEBUG Mms - select isnull(max(BillNo),0) from mms_repair
2014-03-11 16:24:35,438 [33] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/edit')
2014-03-11 16:24:35,445 [33] DEBUG Servicemms_repair - 获取实体对象
2014-03-11 16:24:35,445 [33] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201403110001'
2014-03-11 16:24:35,446 [33] DEBUG Servicemms_repair - 获取上一条下一条数据
2014-03-11 16:24:35,446 [33] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:24:35,446 [33] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo
2014-03-11 16:24:35,446 [33] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:24:35,446 [33] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo<'201403110001' and ProjectCode='201306030001' order by BillNo desc
2014-03-11 16:24:35,447 [33] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:24:35,447 [33] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo>'201403110001' and ProjectCode='201306030001' order by BillNo
2014-03-11 16:24:35,447 [33] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:24:35,447 [33] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo desc
2014-03-11 16:24:35,447 [33] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:24:35,448 [33] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-11 16:24:35,448 [33] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:24:35,448 [33] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-11 16:24:35,448 [33] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:24:35,448 [33] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-11 16:24:35,449 [33] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-11 16:24:35,449 [33] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-11 16:24:36,190 [28] DEBUG Servicemms_repairDetail - 获取动态列表
2014-03-11 16:24:36,190 [28] DEBUG Mms - select * from mms_repairDetail where BillNo='201403110001' order by RepairNo
2014-03-11 16:24:40,851 [28] DEBUG Servicemms_repairDetail - 获取新主键
2014-03-11 16:24:40,852 [28] DEBUG Mms - select isnull(max(RowId),0) from mms_repairDetail  where 1 = 1 and BillNo='201403110001'
2014-03-11 16:24:50,303 [28] DEBUG ServiceModelBase - 获取动态列表
2014-03-11 16:24:50,303 [28] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('分包') order by MerchantsCode
2014-03-11 16:24:50,447 [28] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('分包') ) tb_temp
2014-03-11 16:24:51,642 [33] DEBUG ServiceModelBase - 获取动态列表
2014-03-11 16:24:51,643 [33] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00502%' order by MerchantsCode
2014-03-11 16:24:53,668 [26] DEBUG Servicemms_repair - 编辑记录
2014-03-11 16:24:53,669 [26] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201403110001'
2014-03-11 16:24:53,697 [26] DEBUG Mms - insert into mms_repair([BillNo],[BillDate],[DoPerson],[RepairDate],[RepairUnit],[TotalMoney],[Remark],[ProjectCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('201403110001','2014/3/11 16:24:35','管理员','2014/3/11 16:24:35','FB00502','0','12','201306030001','管理员','2014/3/11 16:24:53','管理员','2014/3/11 16:24:53')
2014-03-11 16:24:53,757 [26] DEBUG Mms - select mms_repairDetail.* from mms_repairDetail where BillNo='201403110001' and RowId='1'
2014-03-11 16:24:53,759 [26] DEBUG Mms - insert into mms_repairDetail([BillNo],[RowId],[RepairNo],[RepairName],[LaborCost],[UnitPrice],[Num],[Money],[RepairReason],[Remark],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('201403110001','1','5','5','0','0','0','0.00','','','管理员','2014/3/11 16:24:53','管理员','2014/3/11 16:24:53')
2014-03-11 16:24:58,348 [33] DEBUG Servicemms_repair - 获取动态列表
2014-03-11 16:24:58,349 [33] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2014-03-11 16:24:58,350 [33] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2014-03-11 16:25:02,012 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/edit')
2014-03-11 16:25:02,052 [26] DEBUG Servicemms_repair - 获取实体对象
2014-03-11 16:25:02,053 [26] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201403110001'
2014-03-11 16:25:02,063 [26] DEBUG Servicemms_repair - 获取上一条下一条数据
2014-03-11 16:25:02,063 [26] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:25:02,063 [26] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo
2014-03-11 16:25:02,064 [26] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:25:02,064 [26] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo<'201403110001' and ProjectCode='201306030001' order by BillNo desc
2014-03-11 16:25:02,065 [26] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:25:02,065 [26] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo>'201403110001' and ProjectCode='201306030001' order by BillNo
2014-03-11 16:25:02,065 [26] DEBUG Servicemms_repair - 获取字段
2014-03-11 16:25:02,065 [26] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo desc
2014-03-11 16:25:02,065 [26] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:25:02,065 [26] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-11 16:25:02,066 [26] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:25:02,066 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-11 16:25:02,066 [26] DEBUG Servicesys_code - 获取动态列表
2014-03-11 16:25:02,066 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-11 16:25:02,066 [26] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-11 16:25:02,066 [26] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-11 16:25:02,545 [33] DEBUG ServiceModelBase - 获取动态列表
2014-03-11 16:25:02,546 [33] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00502%' order by MerchantsCode
2014-03-11 16:25:02,766 [26] DEBUG Servicemms_repairDetail - 获取动态列表
2014-03-11 16:25:02,767 [26] DEBUG Mms - select * from mms_repairDetail where BillNo='201403110001' order by RepairNo
2014-03-11 16:25:58,991 [26] DEBUG Servicetrade_trailer - 编辑记录
2014-03-11 16:25:59,003 [26] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno=''
2014-03-11 16:25:59,004 [26] DEBUG Trade - insert into trade_trailer([JOBNO],[TR_JOBNOIN],[TR_BLNO],[TR_ORDERDATE]) values('201403110001','2','2','2014/3/11 16:22:55')
2014-03-11 16:25:59,030 [26] DEBUG Trade - select trade_scheduler.* from trade_scheduler where Jobno='' and SNO='1'
2014-03-11 16:25:59,031 [26] DEBUG Trade - insert into trade_scheduler([SNO],[SC_DRIVERCD],[SC_DRIVER],[SC_TRUCKCD],[SC_TRUCKNAME],[SC_FRAMECD],[SC_FRAMENO],[SC_DRIVERTEL],[SC_STARTDATE]) values('1','2'CD,'2','3','4','','','','')
2014-03-11 16:25:59,032 [26] ERROR Servicetrade_trailer - 编辑记录失败
System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'JOBNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseInsertBuilder.Execute() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Data\Builders\Insert\BaseInsertBuilder.cs:行号 22
   在 Zephyr.Core.ServiceBase`1.<Edit>b__a(RequestWrapper x) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 66
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 180
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:8f783756-6056-4195-a7fc-e378f6801100
2014-03-11 16:25:59,040 [26] ERROR /api/trade/trailer/edit/ - System.Data.SqlClient.SqlException (0x80131904): 不能将值 NULL 插入列 'JOBNO'，表 'Zephyr.Trade.dbo.trade_scheduler'；列不允许有 Null 值。INSERT 失败。
语句已终止。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 21
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 70
   在 CallSite.Target(Closure , CallSite , trade_trailerService , Object , RequestWrapper , List`1 )
   在 Zephyr.Web.Trade.Controllers.TrailerApiController.Edit(Object data) 位置 f:\lbl\soft\Zephyr.Net\src\Zephyr.Web.Mms\Areas\Trade\Controllers\TrailerController.cs:行号 238
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:8f783756-6056-4195-a7fc-e378f6801100
2014-03-11 16:37:58,598 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:37:58,622 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:37:58,629 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:37:58,633 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:37:58,640 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:37:58,643 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:37:59,704 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-11 16:37:59,716 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-11 16:38:00,224 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 16:38:00,701 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-11 16:38:00,701 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-11 16:38:04,121 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:38:04,140 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:38:04,146 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:38:04,150 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:38:04,156 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:38:04,159 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-11 16:38:04,422 [8] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-11 16:38:05,665 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 16:38:06,175 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-11 16:38:06,812 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-11 16:38:07,565 [9] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 16:38:07,576 [9] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-11 16:38:07,660 [9] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-11 16:38:08,456 [5] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 16:38:08,458 [5] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 16:38:08,653 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 16:38:08,662 [8] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 16:38:08,663 [8] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110001'
2014-03-11 16:38:08,676 [8] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 16:38:08,685 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:08,686 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno
2014-03-11 16:38:08,698 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:08,698 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110001' and Jobno='201403110001' order by Jobno desc
2014-03-11 16:38:08,705 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:08,705 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110001' and Jobno='201403110001' order by Jobno
2014-03-11 16:38:08,713 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:08,714 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110001' order by Jobno desc
2014-03-11 16:38:09,611 [9] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 16:38:09,611 [9] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110001' order by A.Jobno
2014-03-11 16:38:17,537 [5] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 16:38:17,538 [5] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 16:38:17,645 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 16:38:17,671 [8] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 16:38:17,671 [8] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110002'
2014-03-11 16:38:17,679 [8] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 16:38:17,679 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:17,679 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110002' order by Jobno
2014-03-11 16:38:17,710 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:17,711 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110002' and Jobno='201403110002' order by Jobno desc
2014-03-11 16:38:17,740 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:17,740 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110002' and Jobno='201403110002' order by Jobno
2014-03-11 16:38:17,748 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:17,748 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110002' order by Jobno desc
2014-03-11 16:38:18,689 [5] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 16:38:18,690 [5] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110002' order by A.Jobno
2014-03-11 16:38:38,590 [9] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 16:38:38,591 [9] DEBUG Trade - select isnull(max(SNO),0) from trade_scheduler  where 1 = 1 and Jobno='201403110002'
2014-03-11 16:38:47,381 [5] DEBUG Servicetrade_trailer - 获取新主键
2014-03-11 16:38:47,381 [5] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-11 16:38:47,441 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-11 16:38:47,482 [8] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-11 16:38:47,483 [8] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403110003'
2014-03-11 16:38:47,513 [8] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-11 16:38:47,513 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:47,514 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110003' order by Jobno
2014-03-11 16:38:47,522 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:47,522 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403110003' and Jobno='201403110003' order by Jobno desc
2014-03-11 16:38:47,531 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:47,531 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403110003' and Jobno='201403110003' order by Jobno
2014-03-11 16:38:47,540 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-11 16:38:47,540 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403110003' order by Jobno desc
2014-03-11 16:38:48,435 [8] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-11 16:38:48,436 [8] DEBUG Trade - select A.*, B.* from trade_trailer A
        left join trade_scheduler B on B.jobno = A.jobno where A.Jobno='201403110003' order by A.Jobno
2014-03-11 16:40:54,348 [9] DEBUG Servicetrade_scheduler - 获取新主键
2014-03-11 16:40:54,349 [9] DEBUG Trade - select isnull(max(SNO),0) from trade_scheduler  where 1 = 1 and Jobno='201403110003'
