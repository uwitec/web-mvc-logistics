2014-03-06 14:42:01,666 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:02,304 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:02,647 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:02,693 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:02,899 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:02,910 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:03,497 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-06 14:42:03,510 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 14:42:03,687 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-06 14:42:03,687 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-06 14:42:11,783 [9] DEBUG Servicesys_user - 获取实体对象
2014-03-06 14:42:11,784 [9] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-06 14:42:12,035 [9] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-06 14:42:12,280 [9] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/6 14:42:12')
2014-03-06 14:42:12,379 [9] DEBUG Servicemms_project - 获取实体对象
2014-03-06 14:42:12,379 [9] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-06 14:42:12,612 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-06 14:42:12,612 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 14:42:12,761 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 14:42:13,047 [9] DEBUG Servicesys_parameter - 获取字段
2014-03-06 14:42:13,047 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-06 14:42:15,697 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:15,724 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:15,727 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:15,727 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:15,730 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:15,730 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 14:42:15,922 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-06 14:42:17,343 [9] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 14:42:23,343 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-06 14:42:23,398 [5] DEBUG Servicesys_code - 获取动态列表
2014-03-06 14:42:23,407 [5] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-06 14:42:24,820 [5] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-06 14:42:24,820 [5] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-06 14:42:24,979 [5] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-06 14:43:10,521 [10] DEBUG Servicetrade_trailer - 获取新主键
2014-03-06 14:43:10,525 [10] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-06 14:43:10,746 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 14:43:10,763 [12] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 14:43:10,763 [12] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403060001'
2014-03-06 14:43:10,777 [12] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 14:43:10,791 [12] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 14:43:10,792 [12] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno
2014-03-06 14:43:10,793 [12] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 14:43:10,794 [12] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403060001' and Jobno='201403060001' order by Jobno desc
2014-03-06 14:43:10,813 [12] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 14:43:10,813 [12] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403060001' and Jobno='201403060001' order by Jobno
2014-03-06 14:43:10,815 [12] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 14:43:10,815 [12] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno desc
2014-03-06 14:43:34,769 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2014-03-06 14:43:41,320 [10] DEBUG Trade - SELECT Name as TableName FROM sys.tables order by Name
2014-03-06 14:43:41,331 [5] DEBUG Trade - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2014-03-06 14:46:07,961 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2014-03-06 14:46:08,232 [8] DEBUG Servicesys_permission - 获取动态列表
2014-03-06 14:46:08,232 [8] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
2014-03-06 14:49:35,562 [15] DEBUG Servicetrade_trailer - 获取新主键
2014-03-06 14:49:35,567 [15] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-06 14:49:35,610 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 14:49:35,612 [12] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 14:49:35,612 [12] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403060002'
2014-03-06 14:49:35,625 [12] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 14:49:35,625 [12] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 14:49:35,625 [12] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060002' order by Jobno
2014-03-06 14:49:35,627 [12] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 14:49:35,628 [12] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403060002' and Jobno='201403060002' order by Jobno desc
2014-03-06 14:49:35,629 [12] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 14:49:35,629 [12] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403060002' and Jobno='201403060002' order by Jobno
2014-03-06 14:49:35,630 [12] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 14:49:35,630 [12] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060002' order by Jobno desc
2014-03-06 15:10:27,005 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 15:10:27,025 [11] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 15:10:27,029 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 15:10:27,029 [11] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 15:10:27,031 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 15:10:27,031 [11] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 15:10:27,233 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 15:10:27,242 [23] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 15:10:27,251 [23] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='undefined'
2014-03-06 15:10:27,262 [23] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 15:10:27,271 [23] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 15:10:27,272 [23] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='undefined' order by Jobno
2014-03-06 15:10:27,274 [23] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 15:10:27,274 [23] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'undefined' and Jobno='undefined' order by Jobno desc
2014-03-06 15:10:27,276 [23] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 15:10:27,276 [23] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'undefined' and Jobno='undefined' order by Jobno
2014-03-06 15:10:27,277 [23] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 15:10:27,278 [23] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='undefined' order by Jobno desc
2014-03-06 15:10:27,929 [23] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 15:10:30,242 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2014-03-06 15:10:30,266 [22] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-06 15:10:30,267 [22] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-06 15:10:30,387 [22] DEBUG Servicesys_code - 获取动态列表
2014-03-06 15:10:30,387 [22] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-06 15:10:31,538 [21] DEBUG Servicemms_receive - 获取动态列表
2014-03-06 15:10:31,538 [21] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-06 15:10:31,716 [21] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-06 15:10:33,241 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2014-03-06 15:10:33,249 [23] DEBUG Servicemms_receive - 获取实体对象
2014-03-06 15:10:33,250 [23] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020024'
2014-03-06 15:10:33,255 [23] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-03-06 15:10:33,256 [23] DEBUG Servicemms_receive - 获取字段
2014-03-06 15:10:33,256 [23] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-03-06 15:10:33,258 [23] DEBUG Servicemms_receive - 获取字段
2014-03-06 15:10:33,258 [23] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020024' and ProjectCode='201306030001' order by BillNo desc
2014-03-06 15:10:33,261 [23] DEBUG Servicemms_receive - 获取字段
2014-03-06 15:10:33,261 [23] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020024' and ProjectCode='201306030001' order by BillNo
2014-03-06 15:10:33,263 [23] DEBUG Servicemms_receive - 获取字段
2014-03-06 15:10:33,263 [23] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-03-06 15:10:33,274 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-06 15:10:33,274 [23] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-06 15:10:33,275 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-06 15:10:33,275 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-06 15:10:33,276 [23] DEBUG Servicesys_code - 获取动态列表
2014-03-06 15:10:33,276 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-06 15:10:33,277 [23] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-06 15:10:33,277 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-06 15:10:33,278 [23] DEBUG Servicesys_code - 获取字段
2014-03-06 15:10:33,278 [23] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-03-06 15:10:33,279 [23] DEBUG Servicesys_code - 获取字段
2014-03-06 15:10:33,279 [23] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-03-06 15:10:34,092 [23] DEBUG ServiceModelBase - 获取动态列表
2014-03-06 15:10:34,092 [23] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00301%' order by MerchantsCode
2014-03-06 15:10:34,380 [23] DEBUG Servicemms_receive - 获取动态列表
2014-03-06 15:10:34,380 [23] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020024' order by A.MaterialCode
2014-03-06 15:10:42,218 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2014-03-06 15:10:42,220 [22] DEBUG Servicemms_receive - 获取实体对象
2014-03-06 15:10:42,220 [22] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307030001'
2014-03-06 15:10:42,221 [22] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-03-06 15:10:42,221 [22] DEBUG Servicemms_receive - 获取字段
2014-03-06 15:10:42,221 [22] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-03-06 15:10:42,222 [22] DEBUG Servicemms_receive - 获取字段
2014-03-06 15:10:42,222 [22] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307030001' and ProjectCode='201306030001' order by BillNo desc
2014-03-06 15:10:42,224 [22] DEBUG Servicemms_receive - 获取字段
2014-03-06 15:10:42,224 [22] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307030001' and ProjectCode='201306030001' order by BillNo
2014-03-06 15:10:42,225 [22] DEBUG Servicemms_receive - 获取字段
2014-03-06 15:10:42,226 [22] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-03-06 15:10:42,226 [22] DEBUG Servicesys_code - 获取动态列表
2014-03-06 15:10:42,227 [22] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-06 15:10:42,228 [22] DEBUG Servicesys_code - 获取动态列表
2014-03-06 15:10:42,228 [22] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-06 15:10:42,229 [22] DEBUG Servicesys_code - 获取动态列表
2014-03-06 15:10:42,229 [22] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-06 15:10:42,231 [22] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-06 15:10:42,231 [22] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-06 15:10:42,232 [22] DEBUG Servicesys_code - 获取字段
2014-03-06 15:10:42,232 [22] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-03-06 15:10:42,232 [22] DEBUG Servicesys_code - 获取字段
2014-03-06 15:10:42,232 [22] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-03-06 15:10:42,869 [23] DEBUG ServiceModelBase - 获取动态列表
2014-03-06 15:10:42,869 [23] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2014-03-06 15:10:43,211 [22] DEBUG Servicemms_receive - 获取动态列表
2014-03-06 15:10:43,211 [22] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307030001' order by A.MaterialCode
2014-03-06 16:37:06,684 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:37:06,697 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:37:06,709 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:37:06,709 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:37:06,712 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:37:06,712 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:37:06,926 [71] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 16:37:07,063 [71] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 16:37:07,077 [71] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='undefined'
2014-03-06 16:37:07,155 [71] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 16:37:07,171 [71] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:37:07,172 [71] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='undefined' order by Jobno
2014-03-06 16:37:07,176 [71] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:37:07,177 [71] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'undefined' and Jobno='undefined' order by Jobno desc
2014-03-06 16:37:07,179 [71] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:37:07,180 [71] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'undefined' and Jobno='undefined' order by Jobno
2014-03-06 16:37:07,182 [71] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:37:07,182 [71] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='undefined' order by Jobno desc
2014-03-06 16:37:07,888 [71] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 16:37:19,314 [68] DEBUG Servicetrade_trailer - 获取新主键
2014-03-06 16:37:19,315 [68] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-06 16:37:19,437 [69] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 16:37:19,453 [69] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 16:37:19,453 [69] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403060001'
2014-03-06 16:37:19,454 [69] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 16:37:19,454 [69] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:37:19,454 [69] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno
2014-03-06 16:37:19,455 [69] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:37:19,456 [69] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403060001' and Jobno='201403060001' order by Jobno desc
2014-03-06 16:37:19,456 [69] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:37:19,457 [69] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403060001' and Jobno='201403060001' order by Jobno
2014-03-06 16:37:19,457 [69] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:37:19,457 [69] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno desc
2014-03-06 16:40:01,381 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:40:01,491 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:40:01,491 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:40:01,506 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:40:01,506 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:40:01,506 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:40:02,988 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 16:40:03,019 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 16:40:03,753 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 16:40:04,143 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 16:40:04,143 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-06 16:40:05,448 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-06 16:40:09,066 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-06 16:40:09,081 [6] DEBUG Servicesys_code - 获取动态列表
2014-03-06 16:40:09,081 [6] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-06 16:40:10,009 [6] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-06 16:40:10,010 [6] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-06 16:40:10,116 [6] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-06 16:40:10,971 [7] DEBUG Servicetrade_trailer - 获取新主键
2014-03-06 16:40:10,974 [7] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-06 16:40:11,181 [6] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 16:40:11,191 [6] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 16:40:11,192 [6] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403060001'
2014-03-06 16:40:11,206 [6] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 16:40:11,216 [6] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:40:11,216 [6] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno
2014-03-06 16:40:11,227 [6] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:40:11,227 [6] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403060001' and Jobno='201403060001' order by Jobno desc
2014-03-06 16:40:11,235 [6] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:40:11,235 [6] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403060001' and Jobno='201403060001' order by Jobno
2014-03-06 16:40:11,244 [6] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:40:11,244 [6] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno desc
2014-03-06 16:42:17,431 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2014-03-06 16:42:17,471 [9] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-06 16:42:17,472 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-06 16:42:17,485 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-06 16:42:17,485 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-06 16:42:18,571 [7] DEBUG Servicemms_receive - 获取动态列表
2014-03-06 16:42:18,572 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2014-03-06 16:42:18,631 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2014-03-06 16:42:19,873 [9] DEBUG Servicemms_receive - 获取新主键
2014-03-06 16:42:19,873 [9] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2014-03-06 16:42:20,047 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2014-03-06 16:42:20,054 [9] DEBUG Servicemms_receive - 获取实体对象
2014-03-06 16:42:20,055 [9] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201403060001'
2014-03-06 16:42:20,062 [9] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-03-06 16:42:20,064 [9] DEBUG Servicemms_receive - 获取字段
2014-03-06 16:42:20,064 [9] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-03-06 16:42:20,071 [9] DEBUG Servicemms_receive - 获取字段
2014-03-06 16:42:20,071 [9] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201403060001' and ProjectCode='201306030001' order by BillNo desc
2014-03-06 16:42:20,080 [9] DEBUG Servicemms_receive - 获取字段
2014-03-06 16:42:20,080 [9] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201403060001' and ProjectCode='201306030001' order by BillNo
2014-03-06 16:42:20,104 [9] DEBUG Servicemms_receive - 获取字段
2014-03-06 16:42:20,104 [9] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-03-06 16:42:20,241 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-06 16:42:20,242 [9] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2014-03-06 16:42:20,248 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-06 16:42:20,248 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2014-03-06 16:42:20,253 [9] DEBUG Servicesys_code - 获取动态列表
2014-03-06 16:42:20,253 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2014-03-06 16:42:20,258 [9] DEBUG Servicemms_warehouse - 获取动态列表
2014-03-06 16:42:20,258 [9] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2014-03-06 16:42:20,264 [9] DEBUG Servicesys_code - 获取字段
2014-03-06 16:42:20,264 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2014-03-06 16:42:20,269 [9] DEBUG Servicesys_code - 获取字段
2014-03-06 16:42:20,269 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2014-03-06 16:42:21,516 [6] DEBUG Servicemms_receive - 获取动态列表
2014-03-06 16:42:21,516 [6] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201403060001' order by A.MaterialCode
2014-03-06 16:42:27,568 [6] DEBUG ServiceModelBase - 获取动态列表
2014-03-06 16:42:27,569 [6] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2014-03-06 16:42:28,097 [6] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2014-03-06 16:42:29,039 [6] DEBUG ServiceModelBase - 获取动态列表
2014-03-06 16:42:29,039 [6] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00305%' order by MerchantsCode
2014-03-06 16:42:46,214 [7] DEBUG Servicemms_receive - 编辑记录
2014-03-06 16:42:46,265 [7] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201403060001'
2014-03-06 16:42:46,302 [7] DEBUG Mms - insert into mms_receive([BillNo],[BillDate],[DoPerson],[SupplierCode],[ContractCode],[WarehouseCode],[ReceiveDate],[PayKind],[ProjectCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('201403060001','2014/3/6 16:42:20','管理员','CG00305','5','201306030001','2014/3/6 16:42:20','085','201306030001','管理员','2014/3/6 16:42:46','管理员','2014/3/6 16:42:46')
2014-03-06 16:43:05,974 [10] DEBUG Servicemms_receive - 编辑记录
2014-03-06 16:43:05,977 [10] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201403060001'
2014-03-06 16:43:05,990 [10] DEBUG Mms - update mms_receive set [BillDate] = '2014/3/6 16:42:20', [DoPerson] = '管理员', [SupplierCode] = 'CG00305', [ContractCode] = '5', [WarehouseCode] = '201306030001', [ReceiveDate] = '2014/3/6 16:42:20', [PayKind] = '085', [ProjectCode] = '201306030001', [UpdatePerson] = '管理员', [UpdateDate] = '2014/3/6 16:43:05' where [BillNo] = '201403060001'
2014-03-06 16:43:10,328 [6] DEBUG Servicemms_receive - 获取实体对象
2014-03-06 16:43:10,328 [6] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307290001'
2014-03-06 16:43:10,357 [6] DEBUG Servicemms_receive - 获取上一条下一条数据
2014-03-06 16:43:10,357 [6] DEBUG Servicemms_receive - 获取字段
2014-03-06 16:43:10,357 [6] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2014-03-06 16:43:10,365 [6] DEBUG Servicemms_receive - 获取字段
2014-03-06 16:43:10,365 [6] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307290001' and ProjectCode='201306030001' order by BillNo desc
2014-03-06 16:43:10,373 [6] DEBUG Servicemms_receive - 获取字段
2014-03-06 16:43:10,374 [6] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307290001' and ProjectCode='201306030001' order by BillNo
2014-03-06 16:43:10,400 [6] DEBUG Servicemms_receive - 获取字段
2014-03-06 16:43:10,400 [6] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2014-03-06 16:43:10,416 [9] DEBUG Servicemms_receive - 获取动态列表
2014-03-06 16:43:10,434 [9] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307290001' order by A.MaterialCode
2014-03-06 16:43:10,597 [9] DEBUG ServiceModelBase - 获取动态列表
2014-03-06 16:43:10,597 [9] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2014-03-06 16:48:49,060 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:48:49,091 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:48:49,091 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:48:49,091 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:48:49,091 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:48:49,107 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:48:49,747 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 16:48:49,747 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 16:48:49,840 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 16:48:49,840 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2014-03-06 16:50:04,533 [5] DEBUG Servicesys_user - 获取实体对象
2014-03-06 16:50:04,533 [5] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2014-03-06 16:50:04,689 [5] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2014-03-06 16:50:04,814 [5] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','KAJ-PC','localhost','福建省厦门市','2014/3/6 16:50:04')
2014-03-06 16:50:04,908 [5] DEBUG Servicemms_project - 获取实体对象
2014-03-06 16:50:04,908 [5] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2014-03-06 16:50:05,048 [8] DEBUG Servicesys_parameter - 获取字段
2014-03-06 16:50:05,048 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 16:50:05,251 [8] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 16:50:05,516 [8] DEBUG Servicesys_parameter - 获取字段
2014-03-06 16:50:05,516 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-06 16:50:06,468 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-06 16:50:17,038 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-06 16:50:17,056 [8] DEBUG Servicesys_code - 获取动态列表
2014-03-06 16:50:17,056 [8] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-06 16:50:18,764 [5] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-06 16:50:18,764 [5] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-06 16:50:18,811 [5] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-06 16:50:19,858 [5] DEBUG Servicetrade_trailer - 获取新主键
2014-03-06 16:50:19,858 [5] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-06 16:50:19,951 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 16:50:19,969 [7] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 16:50:19,969 [7] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403060001'
2014-03-06 16:50:19,982 [7] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 16:50:19,989 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:50:19,989 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno
2014-03-06 16:50:20,007 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:50:20,007 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403060001' and Jobno='201403060001' order by Jobno desc
2014-03-06 16:50:20,019 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:50:20,019 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403060001' and Jobno='201403060001' order by Jobno
2014-03-06 16:50:20,029 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:50:20,029 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno desc
2014-03-06 16:57:14,169 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:57:14,189 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:57:14,196 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:57:14,199 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:57:14,220 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:57:14,223 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 16:57:14,591 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 16:57:14,602 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 16:57:14,991 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 16:57:15,296 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 16:57:15,296 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-06 16:57:16,160 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-06 16:57:28,406 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-06 16:57:28,418 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-06 16:57:28,419 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-06 16:57:29,737 [7] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-06 16:57:29,737 [7] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-06 16:57:29,782 [7] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-06 16:57:31,270 [5] DEBUG Servicetrade_trailer - 获取新主键
2014-03-06 16:57:31,271 [5] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-06 16:57:31,373 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 16:57:31,401 [7] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 16:57:31,401 [7] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403060001'
2014-03-06 16:57:31,416 [7] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 16:57:31,425 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:57:31,425 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno
2014-03-06 16:57:31,436 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:57:31,437 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403060001' and Jobno='201403060001' order by Jobno desc
2014-03-06 16:57:31,447 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:57:31,447 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403060001' and Jobno='201403060001' order by Jobno
2014-03-06 16:57:31,465 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 16:57:31,465 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno desc
2014-03-06 17:03:25,646 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:03:25,666 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:03:25,672 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:03:25,675 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:03:25,680 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:03:25,683 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:03:25,997 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 17:03:26,010 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 17:03:26,397 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 17:03:26,705 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 17:03:26,706 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-06 17:03:27,629 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-06 17:03:49,314 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-06 17:03:49,354 [8] DEBUG Servicesys_code - 获取动态列表
2014-03-06 17:03:49,355 [8] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-06 17:03:50,677 [8] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-06 17:03:50,677 [8] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-06 17:03:50,721 [8] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-06 17:03:52,292 [8] DEBUG Servicetrade_trailer - 获取新主键
2014-03-06 17:03:52,295 [8] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-06 17:03:52,388 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 17:03:52,429 [7] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 17:03:52,430 [7] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403060001'
2014-03-06 17:03:52,445 [7] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 17:03:52,452 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 17:03:52,452 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno
2014-03-06 17:03:52,465 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 17:03:52,465 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403060001' and Jobno='201403060001' order by Jobno desc
2014-03-06 17:03:52,484 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 17:03:52,484 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403060001' and Jobno='201403060001' order by Jobno
2014-03-06 17:03:52,501 [7] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 17:03:52,501 [7] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno desc
2014-03-06 17:04:24,462 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:04:24,483 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:04:24,504 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:04:24,508 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:04:24,513 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:04:24,516 [1] DEBUG Trade - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2014-03-06 17:04:24,823 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 17:04:24,834 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 17:04:25,240 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 17:04:25,545 [7] DEBUG Servicesys_parameter - 获取字段
2014-03-06 17:04:25,545 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-06 17:04:26,487 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-06 17:04:52,648 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/Index','/Trade/trailer')
2014-03-06 17:04:52,687 [7] DEBUG Servicesys_code - 获取动态列表
2014-03-06 17:04:52,688 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2014-03-06 17:04:54,399 [7] DEBUG Servicetrade_trailer - 获取动态列表
2014-03-06 17:04:54,400 [7] DEBUG Trade - select top 20 * from trade_trailer order by JOBNO
2014-03-06 17:04:54,450 [7] DEBUG Trade - select count(*) from ( select * from trade_trailer ) tb_temp
2014-03-06 17:04:56,130 [5] DEBUG Servicetrade_trailer - 获取新主键
2014-03-06 17:04:56,133 [5] DEBUG Trade - select isnull(max(Jobno),0) from trade_trailer
2014-03-06 17:04:56,249 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Trade/trailer/edit')
2014-03-06 17:04:56,290 [8] DEBUG Servicetrade_trailer - 获取实体对象
2014-03-06 17:04:56,291 [8] DEBUG Trade - select trade_trailer.* from trade_trailer where Jobno='201403060001'
2014-03-06 17:04:56,302 [8] DEBUG Servicetrade_trailer - 获取上一条下一条数据
2014-03-06 17:04:56,313 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 17:04:56,313 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno
2014-03-06 17:04:56,344 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 17:04:56,344 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno<'201403060001' and Jobno='201403060001' order by Jobno desc
2014-03-06 17:04:56,353 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 17:04:56,353 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno>'201403060001' and Jobno='201403060001' order by Jobno
2014-03-06 17:04:56,365 [8] DEBUG Servicetrade_trailer - 获取字段
2014-03-06 17:04:56,366 [8] DEBUG Trade - select top 1 Jobno from trade_trailer where Jobno='201403060001' order by Jobno desc
2014-03-06 17:12:51,996 [19] DEBUG Servicesys_parameter - 获取字段
2014-03-06 17:12:52,007 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2014-03-06 17:12:52,017 [19] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2014-03-06 17:12:52,018 [19] DEBUG Servicesys_parameter - 获取字段
2014-03-06 17:12:52,018 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2014-03-06 17:12:52,534 [18] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2014-03-06 17:12:59,340 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/permission/Index','/Sys/permission')
2014-03-06 17:12:59,774 [18] DEBUG Servicesys_permission - 获取动态列表
2014-03-06 17:12:59,774 [18] DEBUG Sys - select A.*,B.PermissionName as ParentName from sys_permission A left join sys_permission B on B.PermissionCode = A.ParentCode
