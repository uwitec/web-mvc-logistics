@{
    ViewBag.Title = "Trailer";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@section scripts{
<script src="~/Areas/Trade/ViewModels/trade.com.js"></script>
<script src="~/Areas/Trade/ViewModels/trade.viewModel.search.js"></script>
<script type="text/javascript">
    var data = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(Model));
    var viewModel = function(){ 
        var self = this;
        trade.viewModel.search.apply(this,arguments);
        com.formateSupplyType = utils.fnValueToText(data.dataSource.supplyType);
    }
    ko.bindingViewModel(new viewModel(data));
</script>
}
<div class="z-toolbar">
    <a href="#" plain="true" class="easyui-linkbutton"  icon="icon-arrow_refresh"   title="刷新" data-bind="click:refreshClick">刷新</a>
    <a href="#" plain="true" class="easyui-linkbutton"  icon="icon-add"             title="新增" data-bind="click:addClick"    >新增</a>
    <a href="#" plain="true" class="easyui-linkbutton"  icon="icon-edit"            title="编辑" data-bind="click:editClick"   >编辑</a>
    <a href="#" plain="true" class="easyui-linkbutton"  icon="icon-cross"           title="删除" data-bind="click:deleteClick" >删除</a>
    <a href="#" plain="true" class="easyui-linkbutton"  icon="icon-user-accept"     title="审核" data-bind="click:auditClick"  >审核</a>
    <a href="#" plain="true" class="easyui-splitbutton" data-options="menu:'#dropdown',iconCls:'icon-download'"                >导出</a>
</div>

<div id="dropdown" style="width:100px; display:none;">  
    <div data-options="iconCls:'icon-ext-xls'"      suffix="xls"    data-bind="click:downloadClick">Excel2003   </div>  
    <div data-options="iconCls:'icon-page_excel'"   suffix="xlsx"   data-bind="click:downloadClick">Excel2007   </div>  
    <div data-options="iconCls:'icon-ext-doc'"      suffix="doc"    data-bind="click:downloadClick">Word2003    </div>  
</div> 

<div id="condition" class="container_12" style="position:relative;">
    <div class="grid_1 lbl">内部工作号</div>
    <div class="grid_2 val"><input type="text" data-bind="value:form.TR_JOBNOIN" class="z-txt " /></div>
    <div class="grid_1 lbl">提单号</div>
    <div class="grid_2 val"><input type="text" data-bind="value:form.TR_BLNO" class="z-txt " /></div>
    <div class="grid_1 lbl">箱号</div>
    <div class="grid_2 val"><input type="text" data-bind="value:form.TR_CONNO" class="z-txt " /></div>
    
    <div class="clear"></div>
    
    <div class="grid_1 lbl">船名</div>
    <div class="grid_2 val"><input type="text" data-bind="value:form.TR_CARRI" class="z-txt easyui-autocomplete" /></div>
    <div class="grid_1 lbl">航次</div>
    <div class="grid_2 val"><input type="text" data-bind="value:form.TR_CARNO" class="z-txt " /></div>
    <div class="grid_1 lbl">船期</div>
    <div class="grid_2 val"><input type="text" data-bind="value:form.TR_ETSH" class="z-txt easyui-daterange" /></div>

    <div class="clear"></div>

    <div class="prefix_9" style="position:absolute;top:5px;height:0;">  
        <a id="a_search" href="#" class="buttonHuge button-blue" data-bind="click:searchClick" style="margin:0 15px;">查询</a> 
        <a id="a_reset"  href="#" class="buttonHuge button-blue" data-bind="click:clearClick">清空</a>
    </div>
</div>

<table id="gridlist" data-bind="datagrid:grid">
    <thead>  
        <tr>  
            <th field="JOBNO"		sortable="true"	align="left"	width="80" editor="text" >工作号</th>
            <th field="TR_JOBNOIN"		sortable="true"	align="left"	width="80" editor="text" >内部工作号</th>
            <th field="TR_KIND"		sortable="true"	align="left"	width="80" editor="text" >业务类型</th>
            <th field="TR_IEID"		sortable="true"	align="left"	width="80" editor="text" >进口/出口</th>
            <th field="TR_BLNO"		sortable="true"	align="left"	width="80" editor="text" >提单号</th>
            <th field="TR_CONNO"		sortable="true"	align="left"	width="80" editor="text" >箱号</th>
            <th field="TR_SEALNO"		sortable="true"	align="left"	width="80" editor="text" >封铅号</th>
            <th field="TR_CARRI"		sortable="true"	align="left"	width="80" editor="text" >船名</th>
            <th field="TR_CARNO"		sortable="true"	align="left"	width="80" editor="text" >航次</th>
            <th field="TR_ETSH"		sortable="true"	align="left"	width="80" editor="text" formatter="com.formatDate">船期</th>
            <th field="TR_TYPE"		sortable="true"	align="left"	width="80" editor="text" >箱型</th>
            <th field="TR_SPTYPE"		sortable="true"	align="left"	width="80" editor="text" >规格</th>
            <th field="TR_TRAILER"		sortable="true"	align="left"	width="80" editor="text" >拖车公司</th>
            <th field="TR_TRAILDATE"		sortable="true"	align="left"	width="80" editor="text" formatter="com.formatDate">拖箱时间</th>
            <th field="TR_ORDERDATE"		sortable="true"	align="left"	width="80" editor="text" formatter="com.formatDate">接单时间</th>
        </tr>                            
    </thead>      
</table> 