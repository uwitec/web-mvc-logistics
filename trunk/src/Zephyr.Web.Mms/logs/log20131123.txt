2013-11-23 10:28:09,281 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:28:09,313 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:28:09,320 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:28:09,321 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:28:53,957 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:28:53,982 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:28:54,116 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:28:54,116 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 10:28:59,655 [12] DEBUG Servicesys_user - 获取实体对象
2013-11-23 10:28:59,657 [12] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-23 10:29:41,144 [11] DEBUG Servicesys_user - 获取实体对象
2013-11-23 10:29:41,145 [11] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-23 10:29:41,256 [11] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-23 10:29:41,310 [11] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-23 10:29:41')
2013-11-23 10:29:41,385 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:29:41,385 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:29:41,530 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:29:42,565 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:29:42,565 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:29:44,146 [10] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:29:54,963 [9] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:29:54,963 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:29:54,964 [9] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:29:54,964 [9] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 10:30:32,320 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:30:32,320 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:30:32,321 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:30:32,321 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 10:30:56,815 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:30:56,847 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:30:56,854 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:30:56,855 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:08,261 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:08,292 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:08,298 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:08,298 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:19,376 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:33:19,408 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:33:19,531 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:33:19,531 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 10:33:24,582 [31] DEBUG Servicesys_user - 获取实体对象
2013-11-23 10:33:24,585 [31] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-23 10:33:24,683 [31] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-23 10:33:24,741 [31] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-23 10:33:24')
2013-11-23 10:33:24,744 [31] DEBUG Servicemms_project - 获取实体对象
2013-11-23 10:33:24,745 [31] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 10:33:24,786 [24] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:33:24,787 [24] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:33:24,937 [24] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:33:25,948 [24] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:33:25,948 [24] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:33:27,544 [26] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:33:53,656 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:53,688 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:53,695 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:53,696 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:33:58,066 [6] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:33:58,090 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:33:58,320 [6] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:33:59,458 [6] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:33:59,459 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:34:01,234 [20] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:34:07,244 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:34:07,244 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:34:07,313 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:34:07,313 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 10:38:32,762 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:38:32,793 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:38:32,800 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:38:32,801 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:38:40,686 [29] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:38:40,711 [29] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:38:40,837 [29] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:38:40,838 [29] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 10:38:53,719 [29] DEBUG Servicesys_user - 获取实体对象
2013-11-23 10:38:53,721 [29] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-23 10:38:53,810 [29] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-23 10:38:53,869 [29] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-23 10:38:53')
2013-11-23 10:38:53,872 [29] DEBUG Servicemms_project - 获取实体对象
2013-11-23 10:38:53,873 [29] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 10:38:53,911 [16] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:38:53,912 [16] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:38:54,052 [16] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:38:55,051 [16] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:38:55,051 [16] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:38:56,526 [23] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:39:57,379 [29] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/parameter/Index','/Sys/parameter')
2013-11-23 10:43:27,634 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:43:27,667 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:43:27,674 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:43:27,674 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:43:27,957 [6] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:43:27,983 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:43:28,117 [6] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:43:28,117 [6] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 10:43:32,827 [5] DEBUG Servicesys_user - 获取实体对象
2013-11-23 10:43:32,829 [5] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-23 10:43:32,925 [5] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-23 10:43:33,006 [5] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-23 10:43:32')
2013-11-23 10:43:33,013 [5] DEBUG Servicemms_project - 获取实体对象
2013-11-23 10:43:33,014 [5] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 10:43:33,066 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:43:33,067 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:43:33,213 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:43:34,218 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:43:34,219 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:43:35,858 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:43:42,025 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:43:42,026 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:43:42,027 [12] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:43:42,043 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:43:42,043 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:43:42,444 [8] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:44:01,613 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:44:01,614 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:44:01,615 [8] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:44:01,623 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:44:01,624 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:44:02,007 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:44:22,551 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:44:22,551 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:44:22,552 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:44:22,558 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:44:22,558 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:44:22,922 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:44:27,111 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 10:44:28,733 [12] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 10:44:28,739 [12] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 10:44:28,785 [9] DEBUG Servicesys_user - 获取实体列表
2013-11-23 10:44:28,786 [9] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 10:44:28,878 [9] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 10:44:34,177 [6] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 10:44:34,178 [6] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 10:44:39,697 [11] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 10:44:39,697 [11] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='scy'
2013-11-23 10:44:43,629 [12] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 10:44:43,629 [12] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='lhs'
2013-11-23 10:44:51,634 [8] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 10:44:51,635 [8] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 10:44:58,706 [7] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 10:44:58,721 [7] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID=''
2013-11-23 10:44:58,737 [7] DEBUG Sys - insert into sys_userSetting([UserCode],[SettingCode],[SettingName],[SettingValue],[Description]) values('admin','homeTabUrl','','/mms','')
2013-11-23 10:44:59,847 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:44:59,851 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:44:59,852 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:44:59,859 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:44:59,859 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:45:00,350 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:45:01,382 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 10:45:07,729 [7] ERROR /mms - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:45:08,048 [12] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 10:45:08,049 [12] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 10:45:08,094 [13] DEBUG Servicesys_user - 获取实体列表
2013-11-23 10:45:08,095 [13] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 10:45:08,097 [13] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 10:45:19,629 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:45:19,629 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:45:19,630 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:45:19,646 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:45:19,646 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:45:20,013 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:45:22,314 [13] ERROR /mms - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:45:57,419 [23] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:45:57,452 [23] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:45:57,459 [23] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:45:57,460 [23] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:45:57,805 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/role/Index','/Sys/role')
2013-11-23 10:45:57,806 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 10:45:57,863 [12] DEBUG Servicesys_user - 获取动态列表
2013-11-23 10:45:57,959 [12] DEBUG Sys - select UserCode,UserName from sys_user
2013-11-23 10:45:57,960 [12] DEBUG Servicesys_organize - 获取动态列表
2013-11-23 10:45:57,961 [12] DEBUG Sys - select OrganizeCode,OrganizeName from sys_organize
2013-11-23 10:45:58,758 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/organize/Index','/Sys/organize')
2013-11-23 10:45:58,944 [13] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 10:45:59,054 [13] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 10:46:02,876 [9] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 10:46:02,876 [9] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 10:46:02,965 [14] DEBUG Servicesys_user - 获取实体列表
2013-11-23 10:46:02,970 [14] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 10:46:03,065 [14] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 10:46:03,172 [12] DEBUG Servicesys_role - 获取实体列表
2013-11-23 10:46:03,173 [12] DEBUG Sys - select sys_role.* from sys_role order by RoleSeq
2013-11-23 10:46:09,764 [7] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 10:46:09,767 [7] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 10:46:18,248 [10] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 10:46:18,264 [10] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 10:46:18,305 [10] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms/home/index', [Description] = '' where [ID] = '21'
2013-11-23 10:46:19,367 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:46:19,370 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:46:19,526 [13] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:46:20,595 [13] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:46:20,596 [13] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:46:21,657 [21] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:46:22,798 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 10:47:54,513 [22] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:47:54,761 [22] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 10:47:54,762 [22] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 10:47:55,024 [31] DEBUG Servicesys_user - 获取实体列表
2013-11-23 10:47:55,024 [31] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 10:47:55,026 [31] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 10:47:58,800 [22] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:48:14,594 [6] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:49:11,900 [6] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:49:32,364 [34] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:49:36,387 [6] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:52:00,229 [13] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:52:59,236 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:52:59,268 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:52:59,275 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:52:59,276 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:53:02,916 [25] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:53:02,960 [25] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:53:05,025 [25] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:53:10,620 [25] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:53:10,621 [25] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:53:12,306 [24] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:53:32,913 [10] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:54:50,146 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:54:50,178 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:54:50,185 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:54:50,186 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:54:52,238 [21] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:54:52,262 [21] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:54:53,126 [21] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:54:54,902 [21] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:54:54,903 [21] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:54:56,563 [11] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:54:58,761 [25] ERROR /mms/home/index - System.InvalidOperationException: 未找到视图“/mms/home/index”或其母版视图，或没有视图引擎支持搜索的位置。搜索了以下位置: 
/mms/home/index
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 10:58:29,359 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:58:29,391 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:58:29,398 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:58:29,399 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:58:31,361 [38] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:58:31,386 [38] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 10:58:32,291 [38] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 10:58:34,508 [38] DEBUG Servicesys_parameter - 获取字段
2013-11-23 10:58:34,508 [38] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 10:58:40,153 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:58:40,185 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:58:40,193 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:58:40,194 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 10:58:40,555 [41] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 10:58:50,669 [39] ERROR /mms/home/index - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:02:59,086 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:02:59,118 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:02:59,125 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:02:59,126 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:03:01,354 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:03:01,379 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:03:02,101 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:03:03,888 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:03:03,889 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:03:05,465 [27] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:03:11,455 [5] ERROR /mms/home/index - System.InvalidOperationException: 未找到视图“/mms”或其母版视图，或没有视图引擎支持搜索的位置。搜索了以下位置: 
/mms
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:04:05,722 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:04:05,753 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:04:05,760 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:04:05,761 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:04:07,408 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:04:07,430 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:04:08,379 [32] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:04:10,179 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:04:10,180 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:04:11,909 [27] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:04:13,945 [5] ERROR /mms/home/index - System.InvalidOperationException: 未找到视图“~/mms/home”或其母版视图，或没有视图引擎支持搜索的位置。搜索了以下位置: 
~/mms/home
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:04:25,775 [18] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:04:25,788 [18] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:04:25,790 [18] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:04:25,791 [18] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:04:25,792 [18] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:04:29,875 [20] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:04:29,876 [20] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:04:29,952 [20] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:10:41,066 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:10:41,900 [17] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:10:41,909 [17] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:10:41,960 [34] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:10:41,961 [34] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:10:42,020 [34] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:10:45,938 [31] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 11:10:45,939 [31] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 11:10:54,252 [34] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 11:10:54,268 [34] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 11:10:54,291 [34] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '~/mms', [Description] = '' where [ID] = '21'
2013-11-23 11:10:56,915 [26] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:10:56,921 [26] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:10:57,513 [26] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:10:58,240 [26] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:10:58,241 [26] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:10:58,567 [26] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:10:59,394 [33] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:11:00,212 [30] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:11:00,213 [30] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:11:00,262 [17] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:11:00,262 [17] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:11:00,264 [17] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:11:14,169 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:11:14,905 [17] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:11:14,905 [17] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:11:14,991 [7] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:11:14,992 [7] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:11:14,994 [7] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:11:22,641 [17] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 11:11:22,641 [17] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 11:12:51,415 [11] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:12:51,415 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:12:54,701 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:13:23,513 [11] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:13:23,514 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:14:29,912 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:15:08,478 [11] ERROR /mms/ - System.InvalidOperationException: 未找到视图“~/mms/home”或其母版视图，或没有视图引擎支持搜索的位置。搜索了以下位置: 
~/mms/home
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:15:45,206 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:15:45,245 [28] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:15:45,251 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:15:45,252 [28] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:15:56,174 [9] ERROR /mms/ - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:15:57,393 [34] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:15:57,418 [34] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:15:58,378 [34] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:15:59,766 [34] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:15:59,766 [34] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:17:15,554 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:17:15,586 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:17:15,593 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:17:15,594 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:17:17,055 [30] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:17:17,079 [30] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:17:17,954 [30] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:17:19,585 [30] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:17:19,585 [30] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:17:25,641 [17] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:17:32,458 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:17:34,474 [17] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:17:34,479 [17] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:17:34,542 [16] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:17:34,543 [16] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:17:34,624 [16] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:17:38,501 [17] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 11:17:38,503 [17] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 11:17:43,870 [16] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 11:17:43,883 [16] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 11:17:43,905 [16] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms', [Description] = '' where [ID] = '21'
2013-11-23 11:17:45,914 [17] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:17:45,919 [17] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:17:46,637 [17] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:17:47,182 [17] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:17:47,183 [17] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:17:48,471 [20] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:17:49,485 [16] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:17:58,864 [30] ERROR /mms - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute2[T0,T1,TRet](CallSite site, T0 arg0, T1 arg1)
   在 CallSite.Target(Closure , CallSite , Object , String )
   在 Zephyr.Web.Mvc.Views.Home.Index.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Views\Home\Index.cshtml:行号 4
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   在 System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   在 System.Web.WebPages.StartPage.RunPage()
   在 System.Web.WebPages.StartPage.ExecutePageHierarchy()
   在 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   在 RazorGenerator.Mvc.PrecompiledMvcView.Render(ViewContext viewContext, TextWriter writer)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:17:59,310 [20] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:17:59,310 [20] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:17:59,345 [32] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:17:59,345 [32] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:17:59,347 [32] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:19:34,890 [35] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:19:34,922 [35] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:19:34,929 [35] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:19:34,930 [35] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:19:37,204 [11] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:19:37,234 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:19:38,186 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:19:40,500 [11] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:19:40,500 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:19:43,535 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:19:49,208 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:19:51,270 [7] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:19:51,279 [7] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:19:51,354 [11] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:19:51,355 [11] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:19:51,423 [11] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:19:54,824 [7] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 11:19:54,825 [7] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 11:20:06,168 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:20:06,201 [18] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:20:06,209 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:20:06,209 [18] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:20:06,914 [11] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 11:20:06,914 [21] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 11:20:06,914 [8] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 11:20:06,968 [8] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 11:20:06,968 [21] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 11:20:06,972 [11] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 11:20:07,004 [11] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms/desktop', [Description] = '' where [ID] = '21'
2013-11-23 11:20:07,004 [8] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms/desktop', [Description] = '' where [ID] = '21'
2013-11-23 11:20:07,067 [21] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms/desktop', [Description] = '' where [ID] = '21'
2013-11-23 11:20:14,191 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:20:16,636 [12] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:20:16,643 [12] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:20:16,740 [7] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:20:16,741 [7] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:20:16,825 [7] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:20:21,830 [11] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 11:20:21,830 [11] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 11:20:27,154 [12] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 11:20:27,155 [12] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 11:20:27,156 [12] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms/desk', [Description] = '' where [ID] = '21'
2013-11-23 11:20:36,915 [11] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:20:36,917 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:20:37,065 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:20:38,096 [11] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:20:38,096 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:20:39,245 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:21:49,350 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:21:49,382 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:21:49,390 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:21:49,391 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:21:49,733 [14] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:21:49,755 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:21:49,992 [14] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:21:51,156 [14] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:21:51,157 [14] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:21:56,205 [19] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:21:56,240 [19] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:21:56,247 [19] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:21:56,248 [19] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:21:56,582 [26] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:22:02,423 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:22:05,174 [16] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:22:05,205 [16] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:22:05,256 [20] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:22:05,260 [20] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:22:05,347 [20] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:22:11,495 [16] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 11:22:11,498 [16] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 11:22:15,473 [26] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 11:22:15,490 [26] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 11:22:15,528 [26] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms/desktop', [Description] = '' where [ID] = '21'
2013-11-23 11:22:17,591 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:22:17,598 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:22:17,768 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:22:18,851 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:22:18,851 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:22:19,952 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:22:31,413 [24] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/user/Index','/Sys/user')
2013-11-23 11:22:32,180 [32] DEBUG Servicesys_organize - 获取实体列表
2013-11-23 11:22:32,181 [32] DEBUG Sys - select sys_organize.* from sys_organize
2013-11-23 11:22:32,240 [26] DEBUG Servicesys_user - 获取实体列表
2013-11-23 11:22:32,241 [26] DEBUG Sys - select top 20 sys_user.* from sys_user order by UserSeq
2013-11-23 11:22:32,244 [26] DEBUG Sys - select count(*) from ( select sys_user.* from sys_user ) tb_temp
2013-11-23 11:22:36,641 [7] DEBUG Servicesys_userSetting - 获取实体列表
2013-11-23 11:22:36,641 [7] DEBUG Sys - select sys_userSetting.* from sys_userSetting where UserCode='admin'
2013-11-23 11:22:41,765 [16] DEBUG Servicesys_userSetting - 编辑记录
2013-11-23 11:22:41,767 [16] DEBUG Sys - select sys_userSetting.* from sys_userSetting where ID='21'
2013-11-23 11:22:41,768 [16] DEBUG Sys - update sys_userSetting set [UserCode] = 'admin', [SettingCode] = 'homeTabUrl', [SettingName] = '', [SettingValue] = '/mms/home/desktop', [Description] = '' where [ID] = '21'
2013-11-23 11:22:44,347 [24] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:22:44,347 [24] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:22:44,348 [24] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:22:44,368 [24] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:22:44,368 [24] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:22:44,725 [32] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:23:23,769 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:23:23,799 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:23:23,806 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:23:23,806 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:23:24,169 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:23:24,195 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:23:24,439 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:23:25,642 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:23:25,643 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:23:27,359 [15] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:23:33,837 [29] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:23:33,850 [29] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:23:33,852 [29] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:23:33,853 [29] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:23:33,854 [29] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:23:36,941 [24] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:23:36,942 [24] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:23:37,020 [24] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:23:43,381 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 11:23:43,389 [20] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:23:43,390 [20] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:23:43,390 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:23:43,390 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 11:23:43,391 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:23:43,391 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 11:23:44,870 [20] ERROR /mms/send - System.Web.HttpCompileException (0x80004005): g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Views\Send\Index.cshtml(4): error CS0234: 命名空间“Zephyr.Web.Mms.Models”中不存在类型或命名空间名称“sys_roleMenuColumnMapService”(是否缺少程序集引用?)
   在 System.Web.Compilation.AssemblyBuilder.Compile()
   在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:23:48,327 [31] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 11:23:48,331 [31] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:23:48,331 [31] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:23:48,332 [31] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:23:48,332 [31] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 11:23:48,333 [31] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:23:48,333 [31] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 11:23:48,445 [31] ERROR /mms/send - System.Web.HttpCompileException (0x80004005): g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Views\Send\Index.cshtml(4): error CS0234: 命名空间“Zephyr.Web.Mms.Models”中不存在类型或命名空间名称“sys_roleMenuColumnMapService”(是否缺少程序集引用?)
   在 System.Web.Compilation.BuildManager.PostProcessFoundBuildResult(BuildResult result, Boolean keyFromVPP, VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetBuildResultFromCacheInternal(String cacheKey, Boolean keyFromVPP, VirtualPath virtualPath, Int64 hashCode, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultFromCacheInternal(VirtualPath virtualPath, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:23:55,371 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:23:55,374 [5] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:23:55,374 [5] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:23:55,375 [5] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:23:55,375 [5] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:23:57,386 [20] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:23:57,387 [20] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:23:57,389 [20] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:24:02,717 [30] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:24:02,718 [30] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:24:04,380 [16] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:24:04,380 [16] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:24:06,066 [30] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:24:06,067 [30] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:24:06,941 [27] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:24:06,941 [27] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:24:13,159 [30] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:24:13,160 [30] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:24:46,187 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:24:46,223 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:24:46,230 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:24:46,231 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:24:46,830 [30] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:24:46,852 [30] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:24:49,873 [30] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:24:49,874 [30] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:25:22,070 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:25:22,085 [15] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:25:22,086 [15] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:25:22,088 [15] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:25:22,089 [15] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:25:26,997 [5] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:25:26,998 [5] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:25:27,080 [5] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:25:33,082 [32] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:25:33,082 [32] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:25:47,250 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:25:47,253 [7] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:25:47,253 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:25:47,254 [7] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:25:47,254 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:25:52,513 [32] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:25:52,514 [32] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:25:52,516 [32] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:26:17,928 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:26:17,928 [12] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:26:29,045 [24] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:26:29,046 [24] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo='2'
2013-11-23 11:27:44,542 [10] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:27:44,575 [10] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:27:44,582 [10] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:27:44,583 [10] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:27:44,925 [27] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:27:44,946 [27] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:27:45,182 [27] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:27:46,383 [27] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:27:46,384 [27] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:27:48,153 [12] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:27:53,226 [34] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:27:53,241 [34] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:27:53,243 [34] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:27:53,246 [34] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:27:53,246 [34] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:27:56,444 [8] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:27:56,445 [8] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:27:56,524 [8] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:28:04,075 [33] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:28:04,132 [33] ERROR Servicemms_receive - 获取动态列表失败
System.Exception: 未在数据库SqlServer中注册startwithpy！
   在 Zephyr.Core.Condition.ToSql(DbType dbType, Boolean withJoin) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\Condition.cs:行号 42
   在 Zephyr.Core.Condition.ToSql(IDbContext db, Boolean withJoin) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\Condition.cs:行号 35
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass73.<GetSqlWhere>b__72(Condition c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 148
   在 System.Collections.Generic.List`1.ForEach(Action`1 action)
   在 Zephyr.Core.ServiceBase`1.GetSqlWhere(List`1 condtions) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 148
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 32
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 11:28:18,624 [33] ERROR /api/mms/receive/getbillno - System.Exception: 未在数据库SqlServer中注册startwithpy！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.GetBillNo(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 100
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 11:32:18,722 [6] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:32:18,754 [6] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:32:18,761 [6] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:32:18,761 [6] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:32:19,120 [11] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:32:19,145 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:32:19,384 [11] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:32:20,620 [11] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:32:20,621 [11] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:32:22,535 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:32:25,382 [29] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:32:25,393 [29] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:32:25,394 [29] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:32:25,395 [29] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:32:25,396 [29] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:32:28,549 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:32:28,550 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:32:28,627 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:32:34,006 [9] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:32:34,007 [9] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo like '2%' or [dbo].[fun_getPY](BillNo) like N'2%'
2013-11-23 11:32:35,907 [9] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:32:35,907 [9] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo like '20%' or [dbo].[fun_getPY](BillNo) like N'20%'
2013-11-23 11:32:36,139 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:32:36,139 [12] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo like '201%' or [dbo].[fun_getPY](BillNo) like N'201%'
2013-11-23 11:32:36,940 [7] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:32:36,940 [7] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo like '2013%' or [dbo].[fun_getPY](BillNo) like N'2013%'
2013-11-23 11:32:41,418 [29] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:32:41,419 [29] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'b%' or [dbo].[fun_getPY](MerchantsName) like N'b%'
2013-11-23 11:32:43,305 [29] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:32:43,306 [29] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'bj%' or [dbo].[fun_getPY](MerchantsName) like N'bj%'
2013-11-23 11:32:55,919 [7] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:32:55,922 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where BillNo='201306270001'  and E.MerchantsName='%北京乾盛成钢铁贸易公司%'   and datediff(day,'2013-11-23',ReceiveDate) >=0 and datediff(day,'2013-11-23',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:32:55,944 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where BillNo='201306270001'  and E.MerchantsName='%北京乾盛成钢铁贸易公司%'   and datediff(day,'2013-11-23',ReceiveDate) >=0 and datediff(day,'2013-11-23',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:32:56,974 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:32:56,974 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:32:56,977 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:32:59,628 [9] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:32:59,628 [9] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo like '2%' or [dbo].[fun_getPY](BillNo) like N'2%'
2013-11-23 11:33:01,647 [7] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:01,648 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where BillNo='201306270001'       and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:01,660 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where BillNo='201306270001'       and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:03,241 [9] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:03,241 [9] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:03,244 [9] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:05,898 [36] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:33:05,898 [36] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'b%' or [dbo].[fun_getPY](MerchantsName) like N'b%'
2013-11-23 11:33:08,025 [36] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:08,025 [36] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName='%北京乾盛成钢铁贸易公司%'     and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:08,039 [36] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName='%北京乾盛成钢铁贸易公司%'     and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:09,091 [9] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:09,092 [9] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:09,094 [9] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:15,143 [9] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:33:15,143 [9] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'h%' or [dbo].[fun_getPY](MerchantsName) like N'h%'
2013-11-23 11:33:15,393 [11] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:33:15,393 [11] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'hm%' or [dbo].[fun_getPY](MerchantsName) like N'hm%'
2013-11-23 11:33:16,343 [36] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:33:16,343 [36] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'h%' or [dbo].[fun_getPY](MerchantsName) like N'h%'
2013-11-23 11:33:16,832 [12] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:33:16,833 [12] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'k%' or [dbo].[fun_getPY](MerchantsName) like N'k%'
2013-11-23 11:33:17,253 [31] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:33:17,254 [31] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'km%' or [dbo].[fun_getPY](MerchantsName) like N'km%'
2013-11-23 11:33:20,714 [24] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:20,715 [24] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName='%昆明电线一厂%'     and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:20,729 [24] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName='%昆明电线一厂%'     and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:23,109 [24] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:23,109 [24] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:23,112 [24] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:28,456 [7] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:33:28,457 [7] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like '昆明电线一厂%' or [dbo].[fun_getPY](MerchantsName) like N'昆明电线一厂%'
2013-11-23 11:33:30,188 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:30,188 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName='%昆明电线一厂%'     and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:30,189 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName='%昆明电线一厂%'     and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:31,289 [30] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:31,289 [30] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:31,293 [30] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:38,255 [7] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:38,255 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where ContractCode='%圆钢采购合同%' and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:38,267 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where ContractCode='%圆钢采购合同%' and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:39,372 [7] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:39,373 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:39,375 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:45,209 [22] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:45,210 [22] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:45,214 [22] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:50,616 [8] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:50,616 [8] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:50,619 [8] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:58,535 [8] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:58,536 [8] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2013-11-23',ReceiveDate) >=0 and datediff(day,'2013-11-23',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:58,550 [8] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2013-11-23',ReceiveDate) >=0 and datediff(day,'2013-11-23',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:33:59,663 [24] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:33:59,664 [24] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:33:59,666 [24] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:34:48,817 [11] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:34:48,818 [11] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like '圆钢采购合同%' or [dbo].[fun_getPY](MerchantsName) like N'圆钢采购合同%'
2013-11-23 11:34:49,384 [11] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:34:49,384 [11] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like '圆钢采购合同%' or [dbo].[fun_getPY](MerchantsName) like N'圆钢采购合同%'
2013-11-23 11:34:50,626 [11] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:34:50,627 [11] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'k%' or [dbo].[fun_getPY](MerchantsName) like N'k%'
2013-11-23 11:34:50,853 [26] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:34:50,854 [26] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'km%' or [dbo].[fun_getPY](MerchantsName) like N'km%'
2013-11-23 11:37:35,960 [9] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:38:51,710 [9] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName='%昆明电线一厂%'     and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:38:52,773 [9] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName='%昆明电线一厂%'     and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:40:30,169 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:40:31,262 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:40:31,270 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:40:31,271 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:40:31,659 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:40:31,682 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:40:31,914 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:40:33,163 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:40:33,163 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:40:34,677 [17] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:40:37,005 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:40:37,176 [20] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:40:37,178 [20] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:40:37,180 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:40:37,226 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:40:43,540 [41] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:40:43,541 [41] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:40:43,606 [41] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:40:51,840 [9] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:40:51,841 [9] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo like '2%' or [dbo].[fun_getPY](BillNo) like N'2%'
2013-11-23 11:40:59,000 [21] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:40:59,003 [21] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where BillNo='201306270001'       and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:40:59,006 [21] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where BillNo='201306270001'       and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:41:01,816 [11] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:41:01,817 [11] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:41:01,819 [11] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:41:04,315 [20] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 11:41:04,316 [20] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'k%' or [dbo].[fun_getPY](MerchantsName) like N'k%'
2013-11-23 11:41:07,506 [20] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:41:07,506 [20] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName like '%昆明电线一厂%'     and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:41:07,522 [20] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where E.MerchantsName like '%昆明电线一厂%'     and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:41:09,479 [20] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:41:09,479 [20] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:41:09,482 [20] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:41:14,465 [21] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:41:14,466 [21] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where ContractCode like '%圆钢采%' and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:41:14,480 [21] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where ContractCode like '%圆钢采%' and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:41:15,545 [27] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:41:15,545 [27] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:41:15,547 [27] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:41:20,836 [15] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:41:20,836 [15] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:41:20,838 [15] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:43:19,490 [39] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:43:19,516 [39] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:43:19,521 [39] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:43:19,521 [39] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:43:19,860 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:43:19,885 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:43:20,113 [32] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:43:21,331 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:43:21,332 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:43:23,096 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:43:25,332 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:43:25,348 [11] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:43:25,350 [11] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:43:25,351 [11] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:43:25,352 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:43:28,536 [26] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:43:28,537 [26] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:43:28,609 [26] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:43:36,418 [7] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:43:36,419 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030001'    and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:43:36,431 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030001'    and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:43:41,296 [14] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:43:41,297 [14] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'    and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:43:41,312 [14] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'    and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:43:48,450 [26] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:43:48,452 [26] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2013-11-16 ',ReceiveDate) >=0 and datediff(day,'2013-11-16 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:43:48,467 [26] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2013-11-16 ',ReceiveDate) >=0 and datediff(day,'2013-11-16 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:43:52,282 [37] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:43:52,283 [37] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2013-10-01 ',ReceiveDate) >=0 and datediff(day,'2013-10-01 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:43:52,299 [37] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2013-10-01 ',ReceiveDate) >=0 and datediff(day,'2013-10-01 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:44:01,906 [37] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:44:01,907 [37] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2012-11-06 ',ReceiveDate) >=0 and datediff(day,'2012-11-06 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:44:01,922 [37] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2012-11-06 ',ReceiveDate) >=0 and datediff(day,'2012-11-06 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:44:12,516 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:44:12,517 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2011-12-06 ',ReceiveDate) >=0 and datediff(day,'2011-12-06 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:44:12,527 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2011-12-06 ',ReceiveDate) >=0 and datediff(day,'2011-12-06 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:44:13,668 [37] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:44:13,669 [37] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2011-12-06 ',ReceiveDate) >=0 and datediff(day,'2011-12-06 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:44:13,671 [37] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.WarehouseCode='201306030002'  and datediff(day,'2011-12-06 ',ReceiveDate) >=0 and datediff(day,'2011-12-06 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:44:32,456 [21] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:44:43,918 [21] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2011-12-06 ',ReceiveDate) >=0 and datediff(day,'2011-12-06 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:44:48,091 [21] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2011-12-06 ',ReceiveDate) >=0 and datediff(day,'2011-12-06 ',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:45:57,627 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:45:58,562 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:45:59,747 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:45:59,748 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:46:00,135 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:46:00,160 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:46:00,399 [32] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:46:01,511 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:46:01,511 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:46:03,026 [38] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:46:05,654 [14] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:46:05,667 [14] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:46:05,669 [14] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:46:05,670 [14] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:46:05,671 [14] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:46:11,645 [38] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:46:11,646 [38] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:46:11,717 [38] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:46:21,756 [31] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:46:21,759 [31] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2013-10-01 ',ReceiveDate) >=0 and datediff(day,' 2013-10-31',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:46:21,781 [31] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2013-10-01 ',ReceiveDate) >=0 and datediff(day,' 2013-10-31',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:46:24,578 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:46:24,579 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2012-10-01 ',ReceiveDate) >=0 and datediff(day,' 2013-10-31',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:46:24,590 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2012-10-01 ',ReceiveDate) >=0 and datediff(day,' 2013-10-31',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:46:34,741 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:46:34,742 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2013-06-27 ',ReceiveDate) >=0 and datediff(day,' 2013-10-31',ReceiveDate) <=0  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:46:34,758 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where datediff(day,'2013-06-27 ',ReceiveDate) >=0 and datediff(day,' 2013-10-31',ReceiveDate) <=0  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:46:50,415 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 11:46:50,425 [12] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 11:46:50,428 [12] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 11:46:50,436 [12] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 11:46:50,455 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:46:50,455 [12] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 11:46:50,458 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:46:50,458 [12] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:46:50,461 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:46:50,462 [12] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 11:46:50,464 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:46:50,465 [12] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:46:50,718 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:46:50,718 [12] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 11:46:50,719 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:46:50,720 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:46:50,720 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:46:50,720 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 11:46:50,721 [12] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:46:50,722 [12] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:46:50,723 [12] DEBUG Servicesys_code - 获取字段
2013-11-23 11:46:50,723 [12] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:46:50,726 [12] DEBUG Servicesys_code - 获取字段
2013-11-23 11:46:50,726 [12] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:46:57,309 [38] ERROR /plugins/getlookupdata - System.IO.DirectoryNotFoundException: 未能找到路径“G:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Views\Shared\Xml\merchants.xml”的一部分。
   在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
   在 System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   在 System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)
   在 System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   在 System.Xml.XmlTextReaderImpl.FinishInitUriString()
   在 System.Xml.XmlTextReaderImpl..ctor(String uriStr, XmlReaderSettings settings, XmlParserContext context, XmlResolver uriResolver)
   在 System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)
   在 System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)
   在 System.Xml.Linq.XElement.Load(String uri, LoadOptions options)
   在 System.Xml.Linq.XElement.Load(String uri)
   在 Zephyr.Core.RequestWrapper.LoadXmlFile(String url) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapper.cs:行号 79
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 29
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:46:58,680 [11] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:46:58,680 [11] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 11:47:05,999 [21] ERROR /plugins/getlookupdata - System.IO.DirectoryNotFoundException: 未能找到路径“G:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Views\Shared\Xml\merchants.xml”的一部分。
   在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
   在 System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   在 System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)
   在 System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   在 System.Xml.XmlTextReaderImpl.FinishInitUriString()
   在 System.Xml.XmlTextReaderImpl..ctor(String uriStr, XmlReaderSettings settings, XmlParserContext context, XmlResolver uriResolver)
   在 System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)
   在 System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)
   在 System.Xml.Linq.XElement.Load(String uri, LoadOptions options)
   在 System.Xml.Linq.XElement.Load(String uri)
   在 Zephyr.Core.RequestWrapper.LoadXmlFile(String url) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapper.cs:行号 79
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 29
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:47:17,506 [33] DEBUG Servicemms_receive - 获取新主键
2013-11-23 11:47:17,511 [33] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2013-11-23 11:47:17,718 [27] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 11:47:17,721 [27] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 11:47:17,721 [27] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201311230001'
2013-11-23 11:47:17,722 [27] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 11:47:17,722 [27] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:47:17,723 [27] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 11:47:17,723 [27] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:47:17,723 [27] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201311230001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:47:17,725 [27] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:47:17,726 [27] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201311230001' and ProjectCode='201306030001' order by BillNo
2013-11-23 11:47:17,727 [27] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:47:17,728 [27] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:47:17,728 [27] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:47:17,729 [27] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 11:47:17,729 [27] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:47:17,730 [27] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:47:17,730 [27] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:47:17,731 [27] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 11:47:17,731 [27] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:47:17,732 [27] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:47:17,732 [27] DEBUG Servicesys_code - 获取字段
2013-11-23 11:47:17,732 [27] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:47:17,733 [27] DEBUG Servicesys_code - 获取字段
2013-11-23 11:47:17,733 [27] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:47:22,003 [32] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:47:22,003 [32] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 11:47:35,861 [33] DEBUG Servicemms_receive - 删除记录
2013-11-23 11:47:35,876 [33] DEBUG Mms - delete from mms_receive where [BillNo] = '201307210005'
2013-11-23 11:47:36,160 [33] ERROR Servicemms_receive - 删除记录失败
System.Exception: 数据已经被引用，更新失败，请先删除引用数据并重试！
   在 Zephyr.Core.Db.<Context>b__1(ErrorEventArgs e) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Core\Db.cs:行号 164
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 105
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\Execute.cs:行号 9
   在 Zephyr.Data.BaseDeleteBuilder.Execute() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Delete\BaseDeleteBuilder.cs:行号 18
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass36.<Delete>b__35() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseDelete.cs:行号 33
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 11:47:38,461 [33] ERROR /api/mms/receive/201307210005 - System.Exception: 数据已经被引用，更新失败，请先删除引用数据并重试！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Delete(ParamDelete param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseDelete.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.Delete(String id) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 193
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 11:47:47,495 [16] DEBUG Mms - update mms_receive set [ApproveState] = 'passed', [ApproveRemark] = '1', [ApprovePerson] = '管理员', [ApproveDate] = '2013-11-23 11:47:47' where [BillNo] = '201307210005'
2013-11-23 11:47:47,513 [16] DEBUG Mms - 
select A.*,B.WarehouseCode,B.ProjectCode 
from mms_receiveDetail A 
left join mms_receive B on B.BillNo = A.BillNo 
where A.BillNo='201307210005'
2013-11-23 11:47:47,744 [16] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101020203'
2013-11-23 11:47:47,759 [16] DEBUG Mms - update mms_warehouseStock set [Unit] = '根', [Num] = '1.00', [UnitPrice] = '0.00', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 11:47:47', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 11:47:47', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101020203'
2013-11-23 11:47:47,781 [16] DEBUG Mms - insert into mms_warehouseStock([WarehouseCode],[MaterialCode],[Unit],[Num],[UnitPrice],[Money],[WarnStockDown],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate],[Remark]) values('201306030002','0101020203','根','1.00','0.00','0.0000','','管理员','2013-11-23 11:47:47','管理员','2013-11-23 11:47:47','')
2013-11-23 11:47:47,887 [16] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101020203'
2013-11-23 11:47:47,893 [16] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0', [UpperNum] = '0', [Num] = '1.00', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 11:47:47', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 11:47:47', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101020203'
2013-11-23 11:47:47,899 [16] DEBUG Mms - insert into mms_materialWarnning([ProjectCode],[MaterialCode],[LowerNum],[UpperNum],[Num],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate],[Remark]) values('201306030001','0101020203','0','0','1.00','管理员','2013-11-23 11:47:47','管理员','2013-11-23 11:47:47','')
2013-11-23 11:47:48,156 [16] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101020203'
2013-11-23 11:47:48,162 [16] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307210005','4','0101020203','201306030002','1.00','0.00','0.0000','1.00','0.00','','','管理员','2013-11-23 11:47:48','管理员','2013-11-23 11:47:48')
2013-11-23 11:48:05,956 [11] ERROR /home/download - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   在 Zephyr.Utils.EachHelper.EachListRow(Object list, Action`2 handle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Utils\Reflection\EachHelper.cs:行号 23
   在 Zephyr.Core.Exporter.Export(IExport export) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 163
   在 Zephyr.Core.Exporter.Export(String type) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 107
   在 Zephyr.Core.Exporter.Instance() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 60
   在 Zephyr.Web.Mvc.Controllers.HomeController.Download() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\HomeController.cs:行号 35
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.<>c__DisplayClass1.<WrapVoidAction>b__0(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:50:06,671 [38] ERROR /home/download - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object )
   在 Zephyr.Utils.EachHelper.EachListRow(Object list, Action`2 handle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Utils\Reflection\EachHelper.cs:行号 23
   在 Zephyr.Core.Exporter.Export(IExport export) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 163
   在 Zephyr.Core.Exporter.Export(String type) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 107
   在 Zephyr.Core.Exporter.Instance() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 60
   在 Zephyr.Web.Mvc.Controllers.HomeController.Download() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\HomeController.cs:行号 35
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.<>c__DisplayClass1.<WrapVoidAction>b__0(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:52:07,869 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:52:07,900 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:52:07,907 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:52:07,907 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:52:08,302 [22] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:52:08,326 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:52:08,548 [22] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:52:09,734 [22] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:52:09,735 [22] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:52:11,597 [22] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:52:16,536 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:52:16,546 [15] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:52:16,548 [15] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:52:16,549 [15] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:52:16,550 [15] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:52:19,515 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:52:19,516 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:52:19,581 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:52:44,835 [5] ERROR /home/download - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   在 Zephyr.Utils.EachHelper.EachListRow(Object list, Action`2 handle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Utils\Reflection\EachHelper.cs:行号 23
   在 Zephyr.Core.Exporter.Export(IExport export) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 163
   在 Zephyr.Core.Exporter.Export(String type) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 107
   在 Zephyr.Core.Exporter.Instance() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Exporter\Exporter.cs:行号 60
   在 Zephyr.Web.Mvc.Controllers.HomeController.Download() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\HomeController.cs:行号 35
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.<>c__DisplayClass1.<WrapVoidAction>b__0(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:53:05,996 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:53:06,028 [25] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:53:06,035 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:53:06,035 [25] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:53:06,469 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:53:06,493 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:53:06,679 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:53:07,825 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:53:07,825 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:53:09,454 [16] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:53:12,087 [37] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:53:12,101 [37] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:53:12,103 [37] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:53:12,104 [37] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:53:12,105 [37] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:53:15,406 [33] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:53:15,407 [33] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:53:15,473 [33] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:53:27,962 [16] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:53:27,963 [16] DEBUG Mms - select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:53:40,371 [16] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:53:40,371 [16] DEBUG Mms - select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:53:48,794 [26] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:53:48,795 [26] DEBUG Mms - select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:54:31,710 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 11:54:31,719 [12] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 11:54:31,721 [12] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-23 11:54:31,728 [12] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 11:54:31,753 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:54:31,754 [12] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 11:54:31,756 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:54:31,757 [12] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:54:31,760 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:54:31,761 [12] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-23 11:54:31,765 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:54:31,765 [12] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:54:32,021 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:54:32,022 [12] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 11:54:32,023 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:54:32,023 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:54:32,023 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:54:32,024 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 11:54:32,024 [12] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:54:32,025 [12] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:54:32,026 [12] DEBUG Servicesys_code - 获取字段
2013-11-23 11:54:32,026 [12] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:54:32,027 [12] DEBUG Servicesys_code - 获取字段
2013-11-23 11:54:32,027 [12] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:54:47,154 [37] ERROR /plugins/getlookupdata - System.IO.DirectoryNotFoundException: 未能找到路径“G:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Views\Shared\Xml\merchants.xml”的一部分。
   在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
   在 System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   在 System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)
   在 System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   在 System.Xml.XmlTextReaderImpl.FinishInitUriString()
   在 System.Xml.XmlTextReaderImpl..ctor(String uriStr, XmlReaderSettings settings, XmlParserContext context, XmlResolver uriResolver)
   在 System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)
   在 System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)
   在 System.Xml.Linq.XElement.Load(String uri, LoadOptions options)
   在 System.Xml.Linq.XElement.Load(String uri)
   在 Zephyr.Core.RequestWrapper.LoadXmlFile(String url) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapper.cs:行号 79
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 29
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 11:54:48,648 [26] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:54:48,649 [26] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 11:58:06,004 [40] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:58:06,036 [40] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:58:06,044 [40] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:58:06,044 [40] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:58:06,470 [30] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:58:06,491 [30] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:58:06,685 [30] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:58:07,867 [30] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:58:07,868 [30] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:58:12,059 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:58:12,093 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:58:12,100 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:58:12,101 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 11:58:12,490 [20] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 11:58:17,010 [30] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:58:17,026 [30] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:58:17,047 [30] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:58:17,048 [30] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:58:17,049 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:58:19,982 [36] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:58:19,983 [36] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:58:20,067 [36] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:58:26,357 [30] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 11:58:26,365 [30] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 11:58:26,368 [30] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 11:58:26,382 [30] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 11:58:26,403 [30] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:58:26,406 [30] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 11:58:26,409 [30] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:58:26,409 [30] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:58:26,412 [30] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:58:26,413 [30] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 11:58:26,416 [30] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:58:26,417 [30] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:58:26,635 [30] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:58:26,636 [30] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 11:58:26,637 [30] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:58:26,637 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:58:26,637 [30] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:58:26,638 [30] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 11:58:26,638 [30] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:58:26,639 [30] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:58:26,640 [30] DEBUG Servicesys_code - 获取字段
2013-11-23 11:58:26,640 [30] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:58:26,640 [30] DEBUG Servicesys_code - 获取字段
2013-11-23 11:58:26,641 [30] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:58:29,601 [30] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 11:58:29,602 [30] DEBUG Mms - select MerchantsCode   as   value,MerchantsName   as   text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (CG00303) order by MerchantsCode
2013-11-23 11:58:29,788 [30] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:3e6f2e1e-7395-48da-9b4d-dc6012bed5ba
2013-11-23 11:58:36,502 [30] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:3e6f2e1e-7395-48da-9b4d-dc6012bed5ba
2013-11-23 11:58:37,500 [14] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:58:37,500 [14] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 11:58:42,938 [38] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 11:58:42,941 [38] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 11:58:42,941 [38] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 11:58:42,942 [38] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 11:58:42,942 [38] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:58:42,942 [38] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 11:58:42,943 [38] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:58:42,943 [38] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:58:42,943 [38] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:58:42,944 [38] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 11:58:42,944 [38] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:58:42,944 [38] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:58:42,945 [38] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:58:42,945 [38] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 11:58:42,946 [38] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:58:42,946 [38] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:58:42,946 [38] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:58:42,947 [38] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 11:58:42,947 [38] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:58:42,948 [38] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:58:42,948 [38] DEBUG Servicesys_code - 获取字段
2013-11-23 11:58:42,948 [38] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:58:42,949 [38] DEBUG Servicesys_code - 获取字段
2013-11-23 11:58:42,949 [38] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:58:45,817 [32] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 11:58:45,817 [32] DEBUG Mms - select MerchantsCode   as   value,MerchantsName   as   text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (CG00303) order by MerchantsCode
2013-11-23 11:58:45,969 [32] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:3e6f2e1e-7395-48da-9b4d-dc6012bed5ba
2013-11-23 11:58:48,416 [32] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:3e6f2e1e-7395-48da-9b4d-dc6012bed5ba
2013-11-23 11:58:49,663 [38] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:58:49,664 [38] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 11:59:13,359 [22] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 11:59:13,363 [22] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 11:59:13,363 [22] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 11:59:13,364 [22] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 11:59:13,364 [22] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:59:13,364 [22] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 11:59:13,364 [22] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:59:13,365 [22] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:59:13,365 [22] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:59:13,365 [22] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 11:59:13,366 [22] DEBUG Servicemms_receive - 获取字段
2013-11-23 11:59:13,366 [22] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 11:59:13,367 [22] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:59:13,367 [22] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 11:59:13,368 [22] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:59:13,368 [22] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:59:13,368 [22] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:59:13,369 [22] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 11:59:13,369 [22] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:59:13,369 [22] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:59:13,370 [22] DEBUG Servicesys_code - 获取字段
2013-11-23 11:59:13,370 [22] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:59:13,371 [22] DEBUG Servicesys_code - 获取字段
2013-11-23 11:59:13,371 [22] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 11:59:16,175 [32] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 11:59:16,175 [32] DEBUG Mms - select MerchantsCode   as   value,MerchantsName   as   text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (CG00303) order by MerchantsCode
2013-11-23 11:59:16,352 [32] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:3e6f2e1e-7395-48da-9b4d-dc6012bed5ba
2013-11-23 11:59:19,654 [32] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:3e6f2e1e-7395-48da-9b4d-dc6012bed5ba
2013-11-23 11:59:20,734 [32] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:59:20,735 [32] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 11:59:40,636 [38] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 11:59:40,639 [38] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 11:59:41,745 [38] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 11:59:41,746 [38] DEBUG Servicesys_code - 获取动态列表
2013-11-23 11:59:42,091 [38] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 11:59:44,054 [17] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 11:59:46,973 [17] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 11:59:46,975 [17] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 11:59:51,595 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:59:53,616 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 11:59:55,619 [8] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 11:59:56,671 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-23 11:59:56,672 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 11:59:59,381 [26] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 12:00:00,553 [16] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 12:00:00,556 [16] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 12:00:00,556 [16] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 12:00:00,556 [16] DEBUG Servicesys_code - 获取动态列表
2013-11-23 12:00:00,557 [16] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 12:00:02,891 [16] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 12:00:02,891 [16] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 12:00:02,893 [16] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 12:00:18,654 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 12:00:18,657 [12] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 12:00:20,045 [12] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 12:00:20,046 [12] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 12:00:20,046 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 12:00:20,650 [12] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 12:00:20,650 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 12:00:21,070 [12] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 12:00:21,070 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 12:00:21,317 [12] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 12:00:21,318 [12] DEBUG Servicemms_receive - 获取字段
2013-11-23 12:00:21,691 [12] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 12:00:21,692 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 12:00:22,389 [12] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 12:00:22,390 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 12:00:24,182 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 12:00:24,183 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 12:00:25,072 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 12:00:25,073 [12] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 12:00:26,632 [12] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 12:00:26,632 [12] DEBUG Servicesys_code - 获取字段
2013-11-23 12:00:27,790 [12] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 12:00:27,790 [12] DEBUG Servicesys_code - 获取字段
2013-11-23 12:00:28,677 [12] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 12:00:31,197 [31] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 12:00:42,055 [31] DEBUG Mms - select MerchantsCode   as   value,MerchantsName   as   text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (CG00303) order by MerchantsCode
2013-11-23 12:00:42,265 [31] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:3e6f2e1e-7395-48da-9b4d-dc6012bed5ba
2013-11-23 12:00:49,578 [31] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:3e6f2e1e-7395-48da-9b4d-dc6012bed5ba
2013-11-23 12:00:50,815 [12] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 12:06:18,319 [12] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 14:06:27,639 [305] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:06:27,645 [305] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (CG00303) order by MerchantsCode
2013-11-23 14:06:27,817 [305] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:06:29,219 [305] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:06:29,310 [302] DEBUG Mms - update mms_receive set [ApproveState] = 'reject', [ApproveRemark] = '', [ApprovePerson] = '管理员', [ApproveDate] = '2013-11-23 14:06:29' where [BillNo] = '201307020014'
2013-11-23 14:06:29,325 [302] DEBUG Mms - 
select A.*,B.WarehouseCode,B.ProjectCode 
from mms_receiveDetail A 
left join mms_receive B on B.BillNo = A.BillNo 
where A.BillNo='201307020014'
2013-11-23 14:06:29,543 [302] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='0101010102'
2013-11-23 14:06:29,559 [302] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '23.00', [UnitPrice] = '27.565217391304347826086956522', [Money] = '634.0000', [WarnStockDown] = '', [CreatePerson] = '颜荣华', [CreateDate] = '2013-06-04 10:07:13', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [WarehouseCode] = '201306030001' and [MaterialCode] = '0101010102'
2013-11-23 14:06:29,665 [302] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010102'
2013-11-23 14:06:29,672 [302] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '22.00', [CreatePerson] = '颜荣华', [CreateDate] = '2013-06-05 17:58:00', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010102'
2013-11-23 14:06:29,910 [302] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='0101010102'
2013-11-23 14:06:29,920 [302] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','17','0101010102','201306030001','-1.00','222.00','-222.0000','23.00','27.57','','','管理员','2013-11-23 14:06:29','管理员','2013-11-23 14:06:29')
2013-11-23 14:06:29,921 [302] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='0101010104'
2013-11-23 14:06:29,922 [302] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '3.00', [UnitPrice] = '116.00', [Money] = '348.0000', [WarnStockDown] = '', [CreatePerson] = '颜荣华', [CreateDate] = '2013-06-04 17:57:05', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [WarehouseCode] = '201306030001' and [MaterialCode] = '0101010104'
2013-11-23 14:06:29,929 [302] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010104'
2013-11-23 14:06:29,930 [302] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '-57.00', [CreatePerson] = '颜荣华', [CreateDate] = '2013-06-05 17:58:00', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010104'
2013-11-23 14:06:29,931 [302] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='0101010104'
2013-11-23 14:06:29,932 [302] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','18','0101010104','201306030001','-1.00','333.00','-333.0000','3.00','116.00','','','管理员','2013-11-23 14:06:29','管理员','2013-11-23 14:06:29')
2013-11-23 14:06:29,933 [302] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='0101010107'
2013-11-23 14:06:29,934 [302] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '3.00', [UnitPrice] = '29.333333333333333333333333333', [Money] = '88.0000', [WarnStockDown] = '', [CreatePerson] = '访客', [CreateDate] = '2013-07-20 23:46:18', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [WarehouseCode] = '201306030001' and [MaterialCode] = '0101010107'
2013-11-23 14:06:29,940 [302] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010107'
2013-11-23 14:06:29,942 [302] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '4.00', [CreatePerson] = '访客', [CreateDate] = '2013-07-02 8:02:05', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010107'
2013-11-23 14:06:29,947 [302] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='0101010107'
2013-11-23 14:06:29,948 [302] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','19','0101010107','201306030001','-1.00','88.00','-88.0000','3.00','29.33','','','管理员','2013-11-23 14:06:29','管理员','2013-11-23 14:06:29')
2013-11-23 14:06:29,949 [302] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='010101050201'
2013-11-23 14:06:29,950 [302] DEBUG Mms - update mms_warehouseStock set [Unit] = '个', [Num] = '1.00', [UnitPrice] = '0.00', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '刘会胜', [CreateDate] = '2013-09-18 16:13:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [WarehouseCode] = '201306030001' and [MaterialCode] = '010101050201'
2013-11-23 14:06:29,957 [302] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='010101050201'
2013-11-23 14:06:29,958 [302] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '1.00', [CreatePerson] = '刘会胜', [CreateDate] = '2013-09-18 16:13:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '010101050201'
2013-11-23 14:06:29,964 [302] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='010101050201'
2013-11-23 14:06:29,965 [302] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','20','010101050201','201306030001','-1.00','0.00','0.0000','1.00','0.00','','','管理员','2013-11-23 14:06:29','管理员','2013-11-23 14:06:29')
2013-11-23 14:06:29,966 [302] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='010101050204'
2013-11-23 14:06:29,967 [302] DEBUG Mms - update mms_warehouseStock set [Unit] = '个', [Num] = '1.00', [UnitPrice] = '12.00', [Money] = '12.0000', [WarnStockDown] = '', [CreatePerson] = '刘会胜', [CreateDate] = '2013-09-18 16:13:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [WarehouseCode] = '201306030001' and [MaterialCode] = '010101050204'
2013-11-23 14:06:29,974 [302] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='010101050204'
2013-11-23 14:06:29,975 [302] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '1.00', [CreatePerson] = '刘会胜', [CreateDate] = '2013-09-18 16:13:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:06:29', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '010101050204'
2013-11-23 14:06:29,976 [302] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030001' and MaterialCode='010101050204'
2013-11-23 14:06:29,977 [302] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','21','010101050204','201306030001','-1.00','12.00','-12.0000','1.00','12.00','','','管理员','2013-11-23 14:06:29','管理员','2013-11-23 14:06:29')
2013-11-23 14:09:27,153 [291] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:13:36,685 [291] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:13:57,579 [291] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:14:15,963 [291] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:14:15,964 [291] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (CG00302) order by MerchantsCode
2013-11-23 14:14:16,158 [291] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00302' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:14:26,294 [291] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00302' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:14:33,418 [282] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:14:33,418 [282] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:14:33,420 [282] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:14:34,679 [278] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:14:34,679 [278] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (CG00305) order by MerchantsCode
2013-11-23 14:14:34,886 [278] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00305' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:14:36,715 [278] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00305' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:15:00,092 [286] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:15:00,093 [286] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:15:00,095 [286] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:15:01,913 [281] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:15:01,913 [281] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (CG00303) order by MerchantsCode
2013-11-23 14:15:02,096 [281] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:15:04,094 [281] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'CG00303' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:15:13,841 [289] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:15:13,841 [289] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:15:13,845 [289] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:15:31,939 [289] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:15:31,939 [289] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:15:31,942 [289] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:17:01,266 [286] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:17:01,267 [286] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where value in (DL0012) order by MerchantsCode
2013-11-23 14:17:01,498 [286] ERROR ServiceModelBase - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'DL0012' 无效。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:17:02,878 [286] ERROR /plugins/getlookupdata - System.Data.SqlClient.SqlException (0x80131904): 列名 'value' 无效。
列名 'DL0012' 无效。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 38
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
ClientConnectionId:8f70b78d-496d-414f-99b7-92b447a96bbc
2013-11-23 14:17:28,908 [23] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:17:28,940 [23] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:17:28,947 [23] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:17:28,948 [23] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:17:29,366 [280] DEBUG Servicesys_parameter - 获取字段
2013-11-23 14:17:29,391 [280] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 14:17:29,623 [280] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 14:17:30,779 [280] DEBUG Servicesys_parameter - 获取字段
2013-11-23 14:17:30,779 [280] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 14:17:32,676 [283] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 14:17:40,420 [293] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 14:17:40,432 [293] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:17:40,433 [293] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:17:40,435 [293] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:17:40,435 [293] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:17:43,460 [279] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:17:43,461 [279] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 14:17:43,532 [279] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 14:17:48,771 [281] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 14:17:48,783 [281] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:17:48,786 [281] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-23 14:17:48,792 [281] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:17:48,812 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:17:48,812 [281] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:17:48,814 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:17:48,814 [281] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:17:48,816 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:17:48,817 [281] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:17:48,818 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:17:48,819 [281] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:17:49,069 [281] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:17:49,069 [281] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 14:17:49,070 [281] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:17:49,070 [281] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:17:49,071 [281] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:17:49,071 [281] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 14:17:49,072 [281] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:17:49,072 [281] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:17:49,074 [281] DEBUG Servicesys_code - 获取字段
2013-11-23 14:17:49,074 [281] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:17:49,075 [281] DEBUG Servicesys_code - 获取字段
2013-11-23 14:17:49,075 [281] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:20:06,867 [281] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:20:06,868 [281] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode order by MerchantsCode
2013-11-23 14:20:29,552 [291] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:20:29,553 [291] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 14:20:40,844 [291] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:20:40,845 [291] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:20:40,847 [291] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:20:51,064 [291] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:20:51,065 [291] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:20:51,068 [291] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:20:54,541 [282] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:20:54,541 [282] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode order by MerchantsCode
2013-11-23 14:21:05,765 [281] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:21:05,765 [281] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:21:05,787 [281] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:21:19,888 [291] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:21:19,888 [291] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:21:19,891 [291] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:21:29,690 [293] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:21:29,691 [293] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:21:29,694 [293] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:21:42,664 [281] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:21:42,665 [281] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:21:42,667 [281] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:23:07,112 [280] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:23:07,113 [280] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:23:07,115 [280] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:23:56,481 [294] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:23:56,482 [294] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%'  and B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:23:56,487 [294] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%'  and B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:24:06,838 [294] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:24:06,839 [294] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:24:06,842 [294] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:24:11,315 [290] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:24:11,316 [290] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsName like '%北京市%' and B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:24:11,324 [290] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsName like '%北京市%' and B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:24:17,330 [290] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:24:17,331 [290] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:24:17,335 [290] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:25:58,316 [290] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:26:05,565 [290] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:26:05,570 [290] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:27:04,850 [278] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 14:27:04,853 [278] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:27:04,853 [278] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-23 14:27:04,854 [278] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:27:04,854 [278] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:27:04,854 [278] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:27:04,855 [278] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:27:04,855 [278] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:27:04,855 [278] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:27:04,856 [278] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:27:04,856 [278] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:27:04,856 [278] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:27:04,857 [278] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:27:04,857 [278] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 14:27:04,858 [278] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:27:04,858 [278] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:27:04,858 [278] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:27:04,859 [278] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 14:27:04,859 [278] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:27:04,859 [278] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:27:04,860 [278] DEBUG Servicesys_code - 获取字段
2013-11-23 14:27:04,860 [278] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:27:04,860 [278] DEBUG Servicesys_code - 获取字段
2013-11-23 14:27:04,861 [278] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:27:14,113 [297] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:27:14,115 [297] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
2013-11-23 14:27:22,598 [281] DEBUG Servicemms_receive - 编辑记录
2013-11-23 14:27:22,693 [281] ERROR Servicemms_receive - 编辑记录失败
System.Exception: 配置中缺少column节点！
   在 Zephyr.Core.RequestWrapper.BuildCondition(ConditionBuilder builder, JToken c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperUtil.cs:行号 41
   在 Zephyr.Core.RequestWrapper.<>c__DisplayClassf.<>c__DisplayClass11.<ToParamUpdate>b__e(ConditionBuilder builder) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.ParamUpdate.Where(Action`1 builder) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\ParamUpdate.cs:行号 57
   在 Zephyr.Core.RequestWrapper.<>c__DisplayClassf.<ToParamUpdate>b__d(JToken c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.RequestWrapper.EachWhere(Action`1 Handler) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperUtil.cs:行号 90
   在 Zephyr.Core.RequestWrapper.ToParamUpdate() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 14:27:25,197 [281] ERROR /api/mms/receive/edit/ - System.Exception: 配置中缺少column节点！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 72
   在 CallSite.Target(Closure , CallSite , mms_receiveService , Object , RequestWrapper , List`1 )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute4[T0,T1,T2,T3,TRet](CallSite site, T0 arg0, T1 arg1, T2 arg2, T3 arg3)
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.Edit(Object data) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 231
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 14:27:30,013 [298] DEBUG Servicemms_receive - 编辑记录
2013-11-23 14:27:30,066 [298] ERROR Servicemms_receive - 编辑记录失败
System.Exception: 配置中缺少column节点！
   在 Zephyr.Core.RequestWrapper.BuildCondition(ConditionBuilder builder, JToken c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperUtil.cs:行号 41
   在 Zephyr.Core.RequestWrapper.<>c__DisplayClassf.<>c__DisplayClass11.<ToParamUpdate>b__e(ConditionBuilder builder) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.ParamUpdate.Where(Action`1 builder) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\ParamUpdate.cs:行号 57
   在 Zephyr.Core.RequestWrapper.<>c__DisplayClassf.<ToParamUpdate>b__d(JToken c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.RequestWrapper.EachWhere(Action`1 Handler) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperUtil.cs:行号 90
   在 Zephyr.Core.RequestWrapper.ToParamUpdate() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 14:27:32,033 [298] ERROR /api/mms/receive/edit/ - System.Exception: 配置中缺少column节点！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 72
   在 CallSite.Target(Closure , CallSite , mms_receiveService , Object , RequestWrapper , List`1 )
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.Edit(Object data) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 231
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 14:27:58,896 [294] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:27:58,897 [294] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:27:58,898 [294] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:28:00,185 [279] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:28:00,186 [279] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00302%' order by MerchantsCode
2013-11-23 14:28:02,358 [290] DEBUG Servicemms_receive - 编辑记录
2013-11-23 14:28:02,415 [290] ERROR Servicemms_receive - 编辑记录失败
System.Exception: 配置中缺少column节点！
   在 Zephyr.Core.RequestWrapper.BuildCondition(ConditionBuilder builder, JToken c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperUtil.cs:行号 41
   在 Zephyr.Core.RequestWrapper.<>c__DisplayClassf.<>c__DisplayClass11.<ToParamUpdate>b__e(ConditionBuilder builder) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.ParamUpdate.Where(Action`1 builder) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\ParamUpdate.cs:行号 57
   在 Zephyr.Core.RequestWrapper.<>c__DisplayClassf.<ToParamUpdate>b__d(JToken c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.RequestWrapper.EachWhere(Action`1 Handler) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperUtil.cs:行号 90
   在 Zephyr.Core.RequestWrapper.ToParamUpdate() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapperConvert.cs:行号 46
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClassf.<Edit>b__b() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 89
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 14:28:03,776 [290] ERROR /api/mms/receive/edit/ - System.Exception: 配置中缺少column节点！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.Edit(JObject data, RequestWrapper formWrapper, List`1 tabsWrapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseEdit.cs:行号 72
   在 CallSite.Target(Closure , CallSite , mms_receiveService , Object , RequestWrapper , List`1 )
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.Edit(Object data) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 231
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 14:32:49,750 [19] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:32:49,781 [19] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:32:49,789 [19] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:32:49,789 [19] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:32:50,133 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 14:32:50,156 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 14:32:50,398 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 14:32:51,618 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 14:32:51,618 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 14:32:53,476 [20] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 14:32:59,429 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 14:32:59,440 [20] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:32:59,442 [20] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:32:59,443 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:32:59,444 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:33:02,576 [294] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:02,577 [294] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 14:33:02,656 [294] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 14:33:10,202 [295] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:10,203 [295] DEBUG Mms - select top 10 BillNo from mms_receive where BillNo like '2%' or [dbo].[fun_getPY](BillNo) like N'2%'
2013-11-23 14:33:12,952 [278] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:12,953 [278] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where BillNo='201306270001'       and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 14:33:12,954 [278] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where BillNo='201306270001'       and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 14:33:13,978 [294] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:13,978 [294] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 14:33:13,981 [294] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 14:33:17,792 [282] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 14:33:17,801 [282] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:33:17,803 [282] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:33:17,809 [282] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:33:17,827 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:17,828 [282] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:17,830 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:17,830 [282] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:17,832 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:17,832 [282] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:17,834 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:17,835 [282] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:18,099 [282] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:33:18,100 [282] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 14:33:18,101 [282] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:33:18,101 [282] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:33:18,102 [282] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:33:18,102 [282] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 14:33:18,102 [282] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:33:18,103 [282] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:33:18,104 [282] DEBUG Servicesys_code - 获取字段
2013-11-23 14:33:18,105 [282] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:33:18,106 [282] DEBUG Servicesys_code - 获取字段
2013-11-23 14:33:18,106 [282] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:33:21,206 [294] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:33:21,207 [294] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 14:33:22,664 [294] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:22,665 [294] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 14:33:29,816 [290] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:33:29,817 [290] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:33:29,819 [290] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:33:33,194 [280] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:33:33,195 [280] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' and MerchantsName like '%北京市新世纪东方建筑材料有限公司%' and B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 14:33:33,201 [280] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' and MerchantsName like '%北京市新世纪东方建筑材料有限公司%' and B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 14:33:42,054 [282] DEBUG Servicemms_receive - 编辑记录
2013-11-23 14:33:42,075 [282] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:33:42,094 [282] DEBUG Mms - update mms_receive set [WarehouseCode] = '201306030001', [OriginalNum] = '123', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:33:42' where [BillNo] = '201307020002'
2013-11-23 14:33:47,505 [278] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:33:47,509 [278] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201306270001'
2013-11-23 14:33:47,510 [278] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:33:47,510 [278] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:47,511 [278] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:47,511 [278] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:47,511 [278] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201306270001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:47,513 [278] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:47,513 [278] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201306270001' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:47,515 [278] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:47,516 [278] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:47,907 [300] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:33:47,908 [300] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'DL0012%' order by MerchantsCode
2013-11-23 14:33:48,602 [286] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:48,603 [286] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201306270001' order by A.MaterialCode
2013-11-23 14:33:50,990 [282] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:33:50,990 [297] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:50,990 [282] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:33:50,990 [297] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 14:33:50,991 [282] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:33:50,991 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:50,991 [282] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:51,004 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:51,004 [282] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:51,005 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:51,005 [282] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:51,005 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:51,006 [282] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:52,685 [280] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:33:52,686 [280] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 14:33:52,687 [280] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:33:52,687 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:52,687 [280] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:52,688 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:52,688 [280] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:52,688 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:52,689 [280] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:52,689 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:52,689 [280] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:53,699 [282] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:53,699 [282] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 14:33:54,722 [286] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:33:54,723 [286] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-23 14:33:54,724 [286] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:33:54,724 [286] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:54,724 [286] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:54,725 [286] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:54,725 [286] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:54,725 [286] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:54,726 [286] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:54,726 [286] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:54,726 [286] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:55,737 [300] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:55,737 [300] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-23 14:33:56,617 [280] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:33:56,617 [280] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-23 14:33:56,618 [280] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:33:56,619 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:56,619 [280] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:56,619 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:56,619 [280] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:56,621 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:56,621 [280] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:56,623 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:56,623 [280] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:56,977 [290] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:33:56,978 [290] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2013-11-23 14:33:57,719 [297] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:57,720 [297] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-23 14:33:58,510 [300] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:33:58,510 [300] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020024'
2013-11-23 14:33:58,511 [300] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:33:58,512 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:58,512 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:58,512 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:58,512 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020024' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:58,515 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:58,515 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020024' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:33:58,517 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:33:58,518 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:33:58,850 [297] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:33:58,851 [297] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00301%' order by MerchantsCode
2013-11-23 14:33:59,558 [300] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:33:59,559 [300] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020024' order by A.MaterialCode
2013-11-23 14:34:03,046 [280] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 14:34:03,048 [280] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:34:03,049 [280] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:34:03,050 [280] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:34:03,050 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:03,050 [280] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:03,050 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:03,051 [280] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:03,051 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:03,051 [280] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:03,052 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:03,052 [280] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:03,052 [280] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:34:03,053 [280] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 14:34:03,053 [280] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:34:03,054 [280] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:34:03,054 [280] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:34:03,054 [280] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 14:34:03,055 [280] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:34:03,055 [280] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:34:03,056 [280] DEBUG Servicesys_code - 获取字段
2013-11-23 14:34:03,056 [280] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:34:03,056 [280] DEBUG Servicesys_code - 获取字段
2013-11-23 14:34:03,057 [280] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:34:07,472 [294] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:34:07,472 [294] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 14:34:09,833 [294] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:34:09,834 [294] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 14:34:09,834 [294] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:34:09,835 [294] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:09,835 [294] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:09,835 [294] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:09,835 [294] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:09,836 [294] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:09,836 [294] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:09,836 [294] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:09,836 [294] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:10,822 [286] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:34:10,823 [286] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 14:34:12,361 [295] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:34:12,361 [295] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-23 14:34:12,361 [295] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:34:12,362 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:12,362 [295] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:12,362 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:12,362 [295] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:12,363 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:12,363 [295] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:12,363 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:12,363 [295] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:12,586 [20] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:34:12,587 [20] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-23 14:34:15,299 [294] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:34:15,299 [294] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-23 14:34:15,300 [294] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:34:15,300 [294] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:15,301 [294] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:15,301 [294] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:15,301 [294] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:15,302 [294] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:15,302 [294] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:15,302 [294] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:15,303 [294] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:16,337 [280] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:34:16,338 [280] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-23 14:34:17,609 [295] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:34:17,609 [295] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020024'
2013-11-23 14:34:17,610 [295] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:34:17,610 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:17,610 [295] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:17,611 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:17,611 [295] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020024' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:17,611 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:17,612 [295] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020024' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:17,612 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:17,612 [295] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:18,588 [282] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:34:18,589 [282] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020024' order by A.MaterialCode
2013-11-23 14:34:21,984 [295] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:34:21,984 [295] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020032'
2013-11-23 14:34:21,986 [295] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:34:21,986 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:21,986 [295] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:21,987 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:21,987 [295] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020032' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:21,989 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:21,989 [295] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020032' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:21,991 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:21,991 [295] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:23,376 [282] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:34:23,377 [282] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020032' order by A.MaterialCode
2013-11-23 14:34:24,343 [20] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:34:24,344 [20] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020036'
2013-11-23 14:34:24,345 [20] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:34:24,345 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:24,345 [20] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:24,346 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:24,346 [20] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020036' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:24,347 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:24,348 [20] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020036' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:24,349 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:24,350 [20] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:25,309 [280] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:34:25,310 [280] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020036' order by A.MaterialCode
2013-11-23 14:34:26,463 [280] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:34:26,463 [280] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307030001'
2013-11-23 14:34:26,464 [280] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:34:26,464 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:26,465 [280] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:26,465 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:26,465 [280] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307030001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:26,467 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:26,467 [280] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307030001' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:34:26,469 [280] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:34:26,469 [280] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:34:27,918 [278] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:34:27,918 [278] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307030001' order by A.MaterialCode
2013-11-23 14:38:23,080 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:38:23,112 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:38:23,119 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:38:23,120 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 14:38:23,501 [302] DEBUG Servicesys_parameter - 获取字段
2013-11-23 14:38:23,521 [302] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 14:38:23,742 [302] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 14:38:24,909 [302] DEBUG Servicesys_parameter - 获取字段
2013-11-23 14:38:24,910 [302] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 14:38:26,611 [289] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 14:38:50,061 [300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 14:38:50,074 [300] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:38:50,076 [300] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:38:50,078 [300] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:38:50,078 [300] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:38:54,548 [278] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:38:54,549 [278] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 14:38:54,617 [278] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 14:39:06,277 [300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 14:39:06,288 [300] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:39:06,290 [300] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 14:39:06,297 [300] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:39:06,318 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:06,319 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:06,321 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:06,321 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:06,323 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:06,324 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:06,326 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:06,326 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:06,582 [300] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:39:06,583 [300] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 14:39:06,583 [300] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:39:06,584 [300] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:39:06,584 [300] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:39:06,585 [300] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 14:39:06,585 [300] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:39:06,586 [300] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:39:06,587 [300] DEBUG Servicesys_code - 获取字段
2013-11-23 14:39:06,588 [300] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:39:06,588 [300] DEBUG Servicesys_code - 获取字段
2013-11-23 14:39:06,589 [300] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:39:09,730 [289] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:39:09,731 [289] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 14:39:11,246 [302] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:39:11,247 [302] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 14:39:34,564 [289] DEBUG Servicemms_receive - 编辑记录
2013-11-23 14:39:37,346 [300] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:39:37,346 [300] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:39:37,347 [300] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:39:37,347 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:37,348 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:37,348 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:37,348 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:37,349 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:37,349 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:37,349 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:37,350 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:37,611 [20] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:39:37,612 [20] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 14:39:39,278 [282] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:39:39,278 [282] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 14:39:39,279 [282] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:39:39,279 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:39,280 [282] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:39,280 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:39,280 [282] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:39,281 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:39,281 [282] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:39,282 [282] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:39,282 [282] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:40,295 [300] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:39:40,295 [300] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 14:39:47,087 [300] DEBUG Servicemms_receive - 编辑记录
2013-11-23 14:39:47,090 [300] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 14:39:47,106 [300] DEBUG Mms - update mms_receive set [WarehouseCode] = '201306030002', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:39:47' where [BillNo] = '201307020014'
2013-11-23 14:39:49,668 [300] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:39:49,673 [300] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:39:49,674 [300] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:39:49,674 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:49,674 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:49,675 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:49,675 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:49,675 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:49,676 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:49,676 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:49,676 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:50,713 [290] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:39:50,713 [290] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 14:39:51,781 [295] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:39:51,781 [295] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 14:39:51,782 [295] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:39:51,782 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:51,782 [295] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:51,783 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:51,783 [295] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:51,783 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:51,784 [295] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:39:51,784 [295] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:39:51,784 [295] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:39:52,766 [290] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:39:52,767 [290] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 14:40:15,837 [302] DEBUG Servicemms_receive - 编辑记录
2013-11-23 14:40:36,559 [302] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 14:40:36,560 [302] DEBUG Mms - update mms_receive set [OriginalNum] = '2221', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:40:36' where [BillNo] = '201307020014'
2013-11-23 14:45:55,666 [278] DEBUG Servicesys_parameter - 获取字段
2013-11-23 14:45:55,670 [278] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 14:45:55,671 [278] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 14:45:55,701 [278] DEBUG Servicesys_parameter - 获取字段
2013-11-23 14:45:55,702 [278] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 14:45:56,377 [281] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 14:46:06,997 [302] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 14:46:06,999 [302] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:46:07,000 [302] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:46:07,000 [302] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:46:07,001 [302] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:46:09,109 [278] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:46:09,110 [278] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 14:46:09,112 [278] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 14:46:13,901 [279] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 14:46:13,904 [279] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:46:13,904 [279] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:46:13,905 [279] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:46:13,905 [279] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:46:13,905 [279] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:46:13,906 [279] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:46:13,906 [279] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:46:13,907 [279] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:46:13,907 [279] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:46:13,907 [279] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:46:13,908 [279] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:46:13,908 [279] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:46:13,909 [279] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 14:46:13,909 [279] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:46:13,910 [279] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:46:13,910 [279] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:46:13,910 [279] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 14:46:13,911 [279] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:46:13,912 [279] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:46:13,912 [279] DEBUG Servicesys_code - 获取字段
2013-11-23 14:46:13,912 [279] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:46:13,913 [279] DEBUG Servicesys_code - 获取字段
2013-11-23 14:46:13,913 [279] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:46:16,952 [281] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:46:16,952 [281] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 14:46:18,424 [281] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:46:18,424 [281] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 14:47:52,134 [300] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 14:47:52,136 [300] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:47:52,136 [300] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:47:52,137 [300] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:47:52,137 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:47:52,138 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:47:52,138 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:47:52,138 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:47:52,139 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:47:52,139 [300] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:47:52,139 [300] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:47:52,140 [300] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:47:52,140 [300] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:47:52,140 [300] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 14:47:52,141 [300] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:47:52,141 [300] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 14:47:52,142 [300] DEBUG Servicesys_code - 获取动态列表
2013-11-23 14:47:52,142 [300] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 14:47:52,142 [300] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 14:47:52,143 [300] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 14:47:52,143 [300] DEBUG Servicesys_code - 获取字段
2013-11-23 14:47:52,144 [300] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:47:52,144 [300] DEBUG Servicesys_code - 获取字段
2013-11-23 14:47:52,144 [300] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 14:47:55,331 [301] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:47:55,331 [301] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 14:47:56,902 [281] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:47:56,903 [281] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 14:48:05,813 [298] DEBUG Servicemms_receive - 编辑记录
2013-11-23 14:48:13,340 [298] DEBUG Mms - select mms_receiveDetail.* from mms_receiveDetail where BillNo='201307020002' and RowId='2'
2013-11-23 14:48:13,343 [298] DEBUG Mms - update mms_receiveDetail set [MaterialCode] = '0101010107', [Unit] = '吨', [CheckNum] = '2', [Num] = '1', [UnitPrice] = '0', [PrePay] = '0', [Money] = '0', [Remark] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 14:48:13' where [BillNo] = '201307020002' and [RowId] = '2'
2013-11-23 14:48:16,015 [20] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:48:16,015 [20] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201306270001'
2013-11-23 14:48:16,016 [20] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:48:16,016 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:48:16,017 [20] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:48:16,017 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:48:16,017 [20] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201306270001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:48:16,018 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:48:16,018 [20] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201306270001' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:48:16,019 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:48:16,019 [20] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:48:16,270 [298] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:48:16,271 [298] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201306270001' order by A.MaterialCode
2013-11-23 14:48:16,429 [279] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 14:48:16,429 [279] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'DL0012%' order by MerchantsCode
2013-11-23 14:48:17,662 [287] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 14:48:17,662 [287] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 14:48:17,663 [287] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 14:48:17,663 [287] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:48:17,664 [287] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 14:48:17,664 [287] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:48:17,664 [287] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:48:17,665 [287] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:48:17,665 [287] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 14:48:17,665 [287] DEBUG Servicemms_receive - 获取字段
2013-11-23 14:48:17,665 [287] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 14:48:17,897 [289] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 14:48:17,898 [289] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 15:00:03,154 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:00:03,185 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:00:03,193 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:00:03,193 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:00:03,588 [274] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:00:03,609 [274] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 15:00:03,832 [274] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 15:00:04,998 [274] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:00:04,998 [274] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 15:00:06,615 [294] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 15:00:12,747 [296] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 15:00:12,761 [296] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:00:12,763 [296] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:00:12,764 [296] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:00:12,765 [296] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:00:15,654 [291] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:00:15,655 [291] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 15:00:15,720 [291] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 15:00:28,840 [280] DEBUG Servicemms_receive - 删除记录
2013-11-23 15:00:39,691 [280] DEBUG Mms - delete from mms_receiveDetail where [BillNo] = '201307210005'
2013-11-23 15:00:40,793 [280] DEBUG Mms - delete from mms_receive where [BillNo] = '201307210005'
2013-11-23 15:00:41,259 [297] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:00:41,264 [297] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 15:00:41,267 [297] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 15:00:48,421 [297] DEBUG Servicemms_receive - 获取新主键
2013-11-23 15:00:48,424 [297] DEBUG Mms - select isnull(max(BillNo),0) from mms_receive
2013-11-23 15:00:48,570 [292] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 15:00:48,578 [292] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:00:48,580 [292] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201311230001'
2013-11-23 15:00:48,582 [292] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:00:48,601 [292] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:00:48,601 [292] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:00:48,603 [292] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:00:48,604 [292] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201311230001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:00:48,605 [292] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:00:48,605 [292] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201311230001' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:00:48,607 [292] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:00:48,607 [292] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:00:48,867 [292] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:00:48,867 [292] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 15:00:48,868 [292] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:00:48,868 [292] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:00:48,869 [292] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:00:48,869 [292] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 15:00:48,870 [292] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:00:48,870 [292] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:00:48,872 [292] DEBUG Servicesys_code - 获取字段
2013-11-23 15:00:48,872 [292] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:00:48,873 [292] DEBUG Servicesys_code - 获取字段
2013-11-23 15:00:48,873 [292] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:00:53,403 [280] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:00:53,403 [280] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201311230001' order by A.MaterialCode
2013-11-23 15:00:56,620 [299] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:00:56,620 [299] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 15:00:56,663 [299] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 15:00:57,540 [297] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:00:57,541 [297] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 15:01:06,558 [296] DEBUG Servicemms_receive - 编辑记录
2013-11-23 15:01:06,578 [296] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201311230001'
2013-11-23 15:01:06,595 [296] DEBUG Mms - insert into mms_receive([BillNo],[BillDate],[DoPerson],[SupplierCode],[WarehouseCode],[ReceiveDate],[PayKind],[ProjectCode],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('201311230001','2013-11-23 15:00:48','管理员','CG00303','201306030002','2013-11-23 15:00:48','085','201306030001','管理员','2013-11-23 15:01:06','管理员','2013-11-23 15:01:06')
2013-11-23 15:01:54,741 [282] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:01:54,742 [282] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType
2013-11-23 15:01:54,813 [296] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:01:54,853 [296] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:01:56,896 [296] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:02:02,288 [297] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:02:02,338 [297] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:02:25,280 [297] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:02:27,336 [297] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:02:27,386 [297] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:02:29,252 [297] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:06:57,825 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:06:57,857 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:06:57,864 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:06:57,865 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:06:58,200 [285] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:06:58,221 [285] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 15:06:58,454 [285] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 15:06:59,624 [285] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:06:59,624 [285] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 15:07:01,383 [285] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 15:07:11,200 [280] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 15:07:11,215 [280] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:07:11,218 [280] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:07:11,220 [280] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:07:11,221 [280] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:07:14,304 [297] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:07:14,305 [297] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 15:07:14,362 [297] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 15:07:19,558 [277] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 15:07:19,566 [277] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:07:19,569 [277] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 15:07:19,575 [277] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:07:19,594 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:07:19,594 [277] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:07:19,596 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:07:19,596 [277] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:07:19,598 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:07:19,598 [277] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:07:19,600 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:07:19,600 [277] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:07:19,862 [277] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:07:19,863 [277] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 15:07:19,864 [277] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:07:19,864 [277] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:07:19,865 [277] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:07:19,865 [277] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 15:07:19,865 [277] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:07:19,866 [277] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:07:19,867 [277] DEBUG Servicesys_code - 获取字段
2013-11-23 15:07:19,868 [277] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:07:19,868 [277] DEBUG Servicesys_code - 获取字段
2013-11-23 15:07:19,869 [277] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:07:22,773 [296] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:07:22,773 [296] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 15:07:24,301 [274] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:07:24,301 [274] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 15:07:29,944 [282] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:07:29,945 [282] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 15:07:29,947 [282] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 15:07:31,799 [282] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:07:31,799 [282] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' and MerchantsName like '%北京市新世纪东方建筑材料有限公司%' and B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 15:07:31,800 [282] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' and MerchantsName like '%北京市新世纪东方建筑材料有限公司%' and B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 15:07:33,465 [277] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:07:33,466 [277] DEBUG Mms - select top 20 MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') order by MerchantsCode
2013-11-23 15:07:33,468 [277] DEBUG Mms - select count(*) from ( select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where B.MerchantsProperty in ('采购') ) tb_temp
2013-11-23 15:07:38,666 [285] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:07:38,667 [285] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType
2013-11-23 15:07:38,763 [282] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:07:38,809 [282] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:07:42,645 [282] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:22:48,505 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:22:48,536 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:22:48,544 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:22:48,544 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:22:48,888 [260] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:22:48,912 [260] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 15:22:49,144 [260] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 15:22:50,335 [260] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:22:50,335 [260] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 15:22:52,006 [260] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 15:22:55,932 [259] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 15:22:55,945 [259] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:22:55,946 [259] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:22:55,948 [259] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:22:55,949 [259] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:22:59,038 [278] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:22:59,039 [278] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 15:22:59,117 [278] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 15:23:07,639 [268] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 15:23:07,647 [268] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:23:07,650 [268] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 15:23:07,656 [268] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:23:07,674 [268] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:23:07,674 [268] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:23:07,676 [268] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:23:07,677 [268] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:23:07,679 [268] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:23:07,679 [268] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:23:07,681 [268] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:23:07,681 [268] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:23:07,936 [268] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:23:07,937 [268] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 15:23:07,938 [268] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:23:07,938 [268] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:23:07,939 [268] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:23:07,939 [268] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 15:23:07,940 [268] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:23:07,940 [268] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:23:07,941 [268] DEBUG Servicesys_code - 获取字段
2013-11-23 15:23:07,942 [268] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:23:07,943 [268] DEBUG Servicesys_code - 获取字段
2013-11-23 15:23:07,943 [268] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:23:10,952 [264] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:23:10,953 [264] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 15:23:12,479 [281] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:23:12,480 [281] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 15:23:16,470 [260] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:23:16,470 [260] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:23:16,564 [261] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:23:16,624 [261] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:23:24,431 [261] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:23:44,178 [283] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:23:44,179 [283] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:23:44,232 [281] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:23:44,282 [281] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:23:50,377 [281] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:24:57,907 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:24:57,939 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:24:57,946 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:24:57,947 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:24:58,328 [265] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:24:58,352 [265] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 15:24:58,563 [265] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 15:24:59,752 [265] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:24:59,752 [265] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 15:25:01,484 [269] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 15:25:08,914 [269] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 15:25:08,928 [269] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:25:08,930 [269] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:25:08,931 [269] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:25:08,932 [269] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:25:12,150 [268] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:25:12,151 [268] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 15:25:12,221 [268] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 15:25:18,719 [266] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 15:25:18,727 [266] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:25:18,729 [266] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 15:25:18,736 [266] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:25:18,756 [266] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:25:18,756 [266] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:25:18,758 [266] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:25:18,759 [266] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:25:18,760 [266] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:25:18,761 [266] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:25:18,762 [266] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:25:18,763 [266] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:25:19,017 [266] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:25:19,017 [266] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 15:25:19,018 [266] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:25:19,018 [266] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:25:19,019 [266] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:25:19,019 [266] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 15:25:19,020 [266] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:25:19,020 [266] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:25:19,022 [266] DEBUG Servicesys_code - 获取字段
2013-11-23 15:25:19,022 [266] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:25:19,023 [266] DEBUG Servicesys_code - 获取字段
2013-11-23 15:25:19,023 [266] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:25:22,057 [268] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:25:22,058 [268] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 15:25:23,521 [266] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:25:23,522 [266] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 15:25:30,756 [269] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:25:32,377 [269] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:25:51,538 [265] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:25:51,539 [265] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:25:51,582 [269] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:26:43,986 [281] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:26:43,986 [281] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:27:16,837 [269] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:27:16,892 [269] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:27:18,760 [269] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:28:38,563 [273] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:28:38,563 [273] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:28:39,662 [271] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:28:39,715 [271] ERROR Servicemms_material - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:28:41,208 [271] ERROR /api/mms/home/GetMaterial - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.HomeApiController.GetMaterial(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\HomeController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 15:30:38,476 [268] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:30:38,511 [268] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:30:38,518 [268] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:30:38,519 [268] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:30:38,929 [270] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:30:38,954 [270] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 15:30:39,191 [270] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 15:30:40,400 [270] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:30:40,401 [270] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 15:30:42,314 [270] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 15:30:48,004 [262] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 15:30:48,016 [262] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:30:48,017 [262] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:30:48,019 [262] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:30:48,019 [262] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:30:52,908 [272] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:30:52,909 [272] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 15:30:52,978 [272] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 15:30:58,655 [271] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 15:30:58,662 [271] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:30:58,665 [271] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020002'
2013-11-23 15:30:58,671 [271] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:30:58,688 [271] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:30:58,689 [271] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:30:58,690 [271] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:30:58,691 [271] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:30:58,693 [271] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:30:58,693 [271] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020002' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:30:58,694 [271] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:30:58,695 [271] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:30:58,944 [271] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:30:58,944 [271] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 15:30:58,945 [271] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:30:58,945 [271] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:30:58,946 [271] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:30:58,946 [271] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 15:30:58,947 [271] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:30:58,948 [271] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:30:58,949 [271] DEBUG Servicesys_code - 获取字段
2013-11-23 15:30:58,950 [271] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:30:58,950 [271] DEBUG Servicesys_code - 获取字段
2013-11-23 15:30:58,950 [271] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:31:01,928 [270] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:31:01,929 [270] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 15:31:03,428 [295] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:31:03,429 [295] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020002' order by A.MaterialCode
2013-11-23 15:31:07,389 [271] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:31:07,389 [271] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:31:07,467 [262] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:31:07,468 [262] DEBUG Mms - select top 10 A.* from mms_material A order by A.MaterialCode
2013-11-23 15:31:07,504 [262] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:31:10,987 [295] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:31:10,988 [295] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 11 and 20
2013-11-23 15:31:10,992 [295] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:31:13,045 [286] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:31:13,045 [286] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 21 and 30
2013-11-23 15:31:13,049 [286] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:31:13,500 [272] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:31:13,501 [272] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 31 and 40
2013-11-23 15:31:13,506 [272] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:31:17,724 [260] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:31:17,725 [260] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A where MaterialCode like '010101050104%'
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 31 and 40
2013-11-23 15:31:17,729 [260] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialCode like '010101050104%' ) tb_temp
2013-11-23 15:31:21,080 [270] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:31:21,080 [270] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A where MaterialCode like '01010105010%'
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 31 and 40
2013-11-23 15:31:21,085 [270] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialCode like '01010105010%' ) tb_temp
2013-11-23 15:31:22,073 [262] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:31:22,073 [262] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 31 and 40
2013-11-23 15:31:22,074 [262] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:31:47,443 [286] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:18,579 [286] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A where MaterialCode like '010101050105%'
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 31 and 40
2013-11-23 15:32:20,513 [286] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialCode like '010101050105%' ) tb_temp
2013-11-23 15:32:24,756 [273] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:24,757 [273] DEBUG Mms - select top 10 A.* from mms_material A where MaterialCode like '010101050105%' order by A.MaterialCode
2013-11-23 15:32:24,759 [273] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialCode like '010101050105%' ) tb_temp
2013-11-23 15:32:27,217 [273] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:27,217 [273] DEBUG Mms - select top 10 A.* from mms_material A where MaterialCode like '010101050105%' order by A.MaterialCode
2013-11-23 15:32:27,218 [273] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialCode like '010101050105%' ) tb_temp
2013-11-23 15:32:28,056 [259] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:28,057 [259] DEBUG Mms - select top 10 A.* from mms_material A where MaterialCode like '010101050105%' order by A.MaterialCode
2013-11-23 15:32:28,058 [259] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialCode like '010101050105%' ) tb_temp
2013-11-23 15:32:37,261 [259] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:37,261 [259] DEBUG Mms - select top 10 A.* from mms_material A where MaterialName like '%筒%' order by A.MaterialCode
2013-11-23 15:32:37,264 [259] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialName like '%筒%' ) tb_temp
2013-11-23 15:32:39,786 [273] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:39,787 [273] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A where MaterialName like '%筒%'
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 11 and 20
2013-11-23 15:32:39,792 [273] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialName like '%筒%' ) tb_temp
2013-11-23 15:32:40,391 [259] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:40,392 [259] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A where MaterialName like '%筒%'
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 21 and 30
2013-11-23 15:32:40,399 [259] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialName like '%筒%' ) tb_temp
2013-11-23 15:32:41,992 [273] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:41,992 [273] DEBUG Mms - select top 10 A.* from mms_material A where MaterialName like '%筒%' order by A.MaterialCode
2013-11-23 15:32:41,994 [273] DEBUG Mms - select count(*) from ( select A.* from mms_material A where MaterialName like '%筒%' ) tb_temp
2013-11-23 15:32:45,973 [277] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:32:45,973 [277] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:32:46,057 [273] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:32:46,058 [273] DEBUG Mms - select top 10 A.* from mms_material A order by A.MaterialCode
2013-11-23 15:32:46,059 [273] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:32:52,029 [277] DEBUG Servicemms_receiveDetail - 获取新主键
2013-11-23 15:32:52,033 [277] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1  and and BillNo='201307020002'
2013-11-23 15:32:52,267 [277] ERROR Servicemms_receiveDetail - 获取新主键失败
System.Data.SqlClient.SqlException (0x80131904): 关键字 'and' 附近有语法错误。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Core.NewKey.maxplus(IDbContext db, String table, String field, ParamQuery pQuery) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Core\NewKey.cs:行号 43
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass31.<GetNewKey>b__30() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 121
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:4d47eb5c-eee9-41f3-af2c-213a46781346
2013-11-23 15:32:55,467 [277] ERROR /api/mms/receive/getnewrowid/3 - System.Data.SqlClient.SqlException (0x80131904): 关键字 'and' 附近有语法错误。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetNewKey(String field, String rule, Int32 qty, ParamQuery pQuery) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 104
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.GetNewRowId(Int32 id, String BillNo) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 114
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:4d47eb5c-eee9-41f3-af2c-213a46781346
2013-11-23 15:33:42,495 [269] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:33:42,496 [269] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:33:42,572 [266] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:33:42,572 [266] DEBUG Mms - select top 10 A.* from mms_material A order by A.MaterialCode
2013-11-23 15:33:42,573 [266] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:33:47,410 [273] DEBUG Servicemms_receiveDetail - 获取新主键
2013-11-23 15:34:14,753 [273] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1  and and BillNo='201307020002'
2013-11-23 15:34:18,964 [273] ERROR Servicemms_receiveDetail - 获取新主键失败
System.Data.SqlClient.SqlException (0x80131904): 关键字 'and' 附近有语法错误。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Core.NewKey.maxplus(IDbContext db, String table, String field, ParamQuery pQuery) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Core\NewKey.cs:行号 43
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass31.<GetNewKey>b__30() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 121
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:4d47eb5c-eee9-41f3-af2c-213a46781346
2013-11-23 15:34:21,112 [273] ERROR /api/mms/receive/getnewrowid/2 - System.Data.SqlClient.SqlException (0x80131904): 关键字 'and' 附近有语法错误。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetNewKey(String field, String rule, Int32 qty, ParamQuery pQuery) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 104
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.GetNewRowId(Int32 id, String BillNo) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 114
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:4d47eb5c-eee9-41f3-af2c-213a46781346
2013-11-23 15:34:33,704 [259] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:34:37,141 [259] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:34:37,213 [269] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:34:37,713 [269] DEBUG Mms - select top 10 A.* from mms_material A order by A.MaterialCode
2013-11-23 15:34:38,248 [269] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:34:44,822 [273] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:34:46,109 [273] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 11 and 20
2013-11-23 15:34:47,562 [273] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:34:51,623 [266] DEBUG Servicemms_receiveDetail - 获取新主键
2013-11-23 15:35:05,431 [266] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1  and and BillNo='201307020002'
2013-11-23 15:35:05,613 [266] ERROR Servicemms_receiveDetail - 获取新主键失败
System.Data.SqlClient.SqlException (0x80131904): 关键字 'and' 附近有语法错误。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Core.NewKey.maxplus(IDbContext db, String table, String field, ParamQuery pQuery) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Core\NewKey.cs:行号 43
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass31.<GetNewKey>b__30() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 121
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:4d47eb5c-eee9-41f3-af2c-213a46781346
2013-11-23 15:35:06,744 [266] ERROR /api/mms/receive/getnewrowid/2 - System.Data.SqlClient.SqlException (0x80131904): 关键字 'and' 附近有语法错误。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetNewKey(String field, String rule, Int32 qty, ParamQuery pQuery) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 104
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.GetNewRowId(Int32 id, String BillNo) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 114
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:4d47eb5c-eee9-41f3-af2c-213a46781346
2013-11-23 15:36:50,283 [270] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:36:52,029 [270] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:36:52,106 [287] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:36:54,735 [287] DEBUG Mms - select top 10 A.* from mms_material A order by A.MaterialCode
2013-11-23 15:36:54,736 [287] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:37:00,344 [287] DEBUG Servicemms_receiveDetail - 获取新主键
2013-11-23 15:37:20,323 [287] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1  and and BillNo='201307020002'
2013-11-23 15:37:20,325 [287] ERROR Servicemms_receiveDetail - 获取新主键失败
System.Data.SqlClient.SqlException (0x80131904): 关键字 'and' 附近有语法错误。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QuerySingle[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QuerySingle.cs:行号 12
   在 Zephyr.Core.NewKey.maxplus(IDbContext db, String table, String field, ParamQuery pQuery) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Core\NewKey.cs:行号 43
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass31.<GetNewKey>b__30() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 121
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:4d47eb5c-eee9-41f3-af2c-213a46781346
2013-11-23 15:37:20,336 [287] ERROR /api/mms/receive/getnewrowid/2 - System.Data.SqlClient.SqlException (0x80131904): 关键字 'and' 附近有语法错误。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetNewKey(String field, String rule, Int32 qty, ParamQuery pQuery) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBase.cs:行号 104
   在 Zephyr.Web.Mms.Controllers.ReceiveApiController.GetNewRowId(Int32 id, String BillNo) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReceiveController.cs:行号 114
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:4d47eb5c-eee9-41f3-af2c-213a46781346
2013-11-23 15:37:43,347 [268] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:37:43,378 [268] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:37:43,385 [268] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:37:43,386 [268] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:37:43,732 [281] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:37:43,754 [281] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 15:37:43,980 [281] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 15:37:45,163 [281] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:37:45,164 [281] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 15:37:46,691 [287] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 15:38:01,484 [272] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 15:38:01,497 [272] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:38:01,498 [272] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:38:01,500 [272] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:38:01,501 [272] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:38:04,680 [287] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:38:04,681 [287] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 15:38:04,747 [287] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 15:38:10,468 [281] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 15:38:10,476 [281] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:38:10,478 [281] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 15:38:10,483 [281] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:38:10,501 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:10,502 [281] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:38:10,503 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:10,504 [281] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:38:10,506 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:10,507 [281] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:38:10,508 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:10,509 [281] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:38:10,773 [281] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:38:10,773 [281] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 15:38:10,774 [281] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:38:10,775 [281] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:38:10,775 [281] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:38:10,776 [281] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 15:38:10,776 [281] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:38:10,777 [281] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:38:10,778 [281] DEBUG Servicesys_code - 获取字段
2013-11-23 15:38:10,779 [281] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:38:10,779 [281] DEBUG Servicesys_code - 获取字段
2013-11-23 15:38:10,780 [281] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:38:13,817 [260] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:38:13,818 [260] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 15:38:15,322 [272] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:38:15,322 [272] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 15:38:20,945 [281] DEBUG Servicemms_receive - 编辑记录
2013-11-23 15:38:20,963 [281] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 15:38:20,981 [281] DEBUG Mms - update mms_receive set [OriginalNum] = '2221abc', [ProjectCode] = '201306030001', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:38:20' where [BillNo] = '201307020014'
2013-11-23 15:38:26,018 [272] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 15:38:26,023 [272] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 15:38:26,113 [260] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:38:26,115 [260] DEBUG Mms - select top 10 A.* from mms_material A order by A.MaterialCode
2013-11-23 15:38:26,168 [260] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:38:29,776 [20] DEBUG Servicemms_material - 获取动态列表
2013-11-23 15:38:29,777 [20] DEBUG Mms - with PagedPersons as
								(
									select top 100 percent A.*, row_number() over (order by A.MaterialCode) as FLUENTDATA_ROWNUMBER
									 from mms_material A
								)
								select *
								from PagedPersons
								where fluentdata_RowNumber between 11 and 20
2013-11-23 15:38:29,778 [20] DEBUG Mms - select count(*) from ( select A.* from mms_material A ) tb_temp
2013-11-23 15:38:32,233 [271] DEBUG Servicemms_receiveDetail - 获取新主键
2013-11-23 15:38:34,101 [271] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1 and BillNo='201307020014'
2013-11-23 15:38:35,047 [271] DEBUG Mms - select isnull(max(RowId),0) from mms_receiveDetail  where 1 = 1 and BillNo='201307020014'
2013-11-23 15:38:43,115 [262] DEBUG Servicemms_receive - 编辑记录
2013-11-23 15:38:43,116 [262] DEBUG Mms - select mms_receiveDetail.* from mms_receiveDetail where BillNo='201307020014' and RowId='22'
2013-11-23 15:38:43,128 [262] DEBUG Mms - insert into mms_receiveDetail([BillNo],[RowId],[MaterialCode],[Unit],[CheckNum],[Num],[UnitPrice],[PrePay],[Money],[Remark],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('201307020014','22','0101010301','吨','3','1','0','0','0','','管理员','2013-11-23 15:38:43','管理员','2013-11-23 15:38:43')
2013-11-23 15:38:43,131 [262] DEBUG Mms - select mms_receiveDetail.* from mms_receiveDetail where BillNo='201307020014' and RowId='23'
2013-11-23 15:38:43,133 [262] DEBUG Mms - insert into mms_receiveDetail([BillNo],[RowId],[MaterialCode],[Unit],[CheckNum],[Num],[UnitPrice],[PrePay],[Money],[Remark],[UpdatePerson],[UpdateDate],[CreatePerson],[CreateDate]) values('201307020014','23','0101010205','吨','2','1','0','0','0','','管理员','2013-11-23 15:38:43','管理员','2013-11-23 15:38:43')
2013-11-23 15:38:56,611 [262] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:38:56,612 [262] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-23 15:38:56,613 [262] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:38:56,613 [262] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:56,613 [262] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:38:56,613 [262] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:56,614 [262] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:38:56,614 [262] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:56,614 [262] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:38:56,615 [262] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:56,615 [262] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:38:56,895 [281] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:38:56,896 [281] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-23 15:38:58,597 [262] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:38:58,598 [262] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-23 15:38:58,598 [262] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:38:58,598 [262] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:58,599 [262] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:38:58,599 [262] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:58,599 [262] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:38:58,600 [262] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:58,600 [262] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:38:58,600 [262] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:38:58,600 [262] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:38:58,946 [287] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:38:58,947 [287] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2013-11-23 15:38:59,656 [260] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:38:59,656 [260] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-23 15:39:00,957 [260] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:39:00,957 [260] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-23 15:39:00,958 [260] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:39:00,958 [260] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:39:00,959 [260] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:39:00,959 [260] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:39:00,959 [260] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:39:00,960 [260] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:39:00,960 [260] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:39:00,960 [260] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:39:00,961 [260] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:39:01,931 [262] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:39:01,931 [262] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-23 15:39:02,770 [20] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:39:02,770 [20] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 15:39:02,771 [20] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:39:02,771 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:39:02,772 [20] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:39:02,772 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:39:02,772 [20] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:39:02,773 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:39:02,773 [20] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:39:02,773 [20] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:39:02,774 [20] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:39:03,779 [262] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:39:03,780 [262] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 15:42:12,380 [268] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:42:12,415 [268] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:42:12,422 [268] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:42:12,422 [268] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:42:12,809 [277] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:42:12,831 [277] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 15:42:13,067 [277] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 15:42:14,261 [277] DEBUG Servicesys_parameter - 获取字段
2013-11-23 15:42:14,262 [277] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 15:42:16,049 [277] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 15:42:18,355 [295] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 15:42:18,366 [295] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:42:18,368 [295] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:42:18,369 [295] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:42:18,370 [295] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:42:21,775 [277] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:42:21,776 [277] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 15:42:21,846 [277] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 15:42:26,810 [277] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 15:42:26,818 [277] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:42:26,820 [277] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 15:42:26,827 [277] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:42:26,846 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:42:26,846 [277] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:42:26,848 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:42:26,849 [277] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:42:26,850 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:42:26,851 [277] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:42:26,852 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:42:26,853 [277] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:42:27,122 [277] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:42:27,122 [277] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 15:42:27,123 [277] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:42:27,123 [277] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:42:27,124 [277] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:42:27,124 [277] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 15:42:27,125 [277] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:42:27,125 [277] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:42:27,127 [277] DEBUG Servicesys_code - 获取字段
2013-11-23 15:42:27,127 [277] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:42:27,128 [277] DEBUG Servicesys_code - 获取字段
2013-11-23 15:42:27,128 [277] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:42:30,156 [277] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:42:30,157 [277] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 15:42:31,636 [298] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:42:31,636 [298] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 15:42:51,821 [265] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/edit')
2013-11-23 15:42:51,824 [265] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:42:51,825 [265] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020014'
2013-11-23 15:42:51,825 [265] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:42:51,826 [265] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:42:51,826 [265] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:42:51,826 [265] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:42:51,827 [265] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020014' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:42:51,827 [265] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:42:51,828 [265] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020014' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:42:51,828 [265] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:42:51,828 [265] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:42:51,829 [265] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:42:51,829 [265] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 15:42:51,830 [265] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:42:51,830 [265] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 15:42:51,831 [265] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:42:51,831 [265] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 15:42:51,832 [265] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:42:51,832 [265] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:42:51,833 [265] DEBUG Servicesys_code - 获取字段
2013-11-23 15:42:51,833 [265] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:42:51,834 [265] DEBUG Servicesys_code - 获取字段
2013-11-23 15:42:51,834 [265] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 15:42:56,221 [273] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:42:56,221 [273] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020014' order by A.MaterialCode
2013-11-23 15:43:00,466 [273] DEBUG Mms - update mms_receive set [ApproveState] = 'passed', [ApproveRemark] = '', [ApprovePerson] = '管理员', [ApproveDate] = '2013-11-23 15:43:00' where [BillNo] = '201307020014'
2013-11-23 15:43:00,477 [273] DEBUG Mms - 
select A.*,B.WarehouseCode,B.ProjectCode 
from mms_receiveDetail A 
left join mms_receive B on B.BillNo = A.BillNo 
where A.BillNo='201307020014'
2013-11-23 15:43:00,690 [273] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010102'
2013-11-23 15:43:00,706 [273] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '0.00', [UnitPrice] = '222.0000', [Money] = '222.0000', [WarnStockDown] = '', [CreatePerson] = '访客', [CreateDate] = '2013-07-02 15:22:52', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:00', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010102'
2013-11-23 15:43:00,813 [273] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010102'
2013-11-23 15:43:00,819 [273] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '23.00', [CreatePerson] = '颜荣华', [CreateDate] = '2013-06-05 17:58:00', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:00', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010102'
2013-11-23 15:43:01,070 [273] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010102'
2013-11-23 15:43:01,081 [273] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','17','0101010102','201306030002','1.00','222.00','222.0000','0.00','222.00','','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01')
2013-11-23 15:43:01,084 [273] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010104'
2013-11-23 15:43:01,085 [273] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '-59.00', [UnitPrice] = '14.694915254237288135593220339', [Money] = '-867.0000', [WarnStockDown] = '', [CreatePerson] = '刘会胜', [CreateDate] = '2013-07-13 22:22:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010104'
2013-11-23 15:43:01,086 [273] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010104'
2013-11-23 15:43:01,088 [273] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '-56.00', [CreatePerson] = '颜荣华', [CreateDate] = '2013-06-05 17:58:00', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010104'
2013-11-23 15:43:01,089 [273] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010104'
2013-11-23 15:43:01,090 [273] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','18','0101010104','201306030002','1.00','333.00','333.0000','-59.00','14.69','','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01')
2013-11-23 15:43:01,091 [273] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010107'
2013-11-23 15:43:01,092 [273] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '2.00', [UnitPrice] = '44.00', [Money] = '88.0000', [WarnStockDown] = '', [CreatePerson] = '访客', [CreateDate] = '2013-07-02 8:02:05', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010107'
2013-11-23 15:43:01,098 [273] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010107'
2013-11-23 15:43:01,100 [273] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '5.00', [CreatePerson] = '访客', [CreateDate] = '2013-07-02 8:02:05', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010107'
2013-11-23 15:43:01,101 [273] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010107'
2013-11-23 15:43:01,102 [273] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','19','0101010107','201306030002','1.00','88.00','88.0000','2.00','44.00','','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01')
2013-11-23 15:43:01,102 [273] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='010101050201'
2013-11-23 15:43:01,104 [273] DEBUG Mms - update mms_warehouseStock set [Unit] = '个', [Num] = '1.00', [UnitPrice] = '0.00', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 15:43:01', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '010101050201'
2013-11-23 15:43:01,105 [273] DEBUG Mms - insert into mms_warehouseStock([WarehouseCode],[MaterialCode],[Unit],[Num],[UnitPrice],[Money],[WarnStockDown],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate],[Remark]) values('201306030002','010101050201','个','1.00','0.00','0.0000','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01','')
2013-11-23 15:43:01,108 [273] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='010101050201'
2013-11-23 15:43:01,109 [273] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '2.00', [CreatePerson] = '刘会胜', [CreateDate] = '2013-09-18 16:13:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '010101050201'
2013-11-23 15:43:01,110 [273] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='010101050201'
2013-11-23 15:43:01,111 [273] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','20','010101050201','201306030002','1.00','0.00','0.0000','1.00','0.00','','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01')
2013-11-23 15:43:01,112 [273] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='010101050204'
2013-11-23 15:43:01,113 [273] DEBUG Mms - update mms_warehouseStock set [Unit] = '个', [Num] = '1.00', [UnitPrice] = '12.00', [Money] = '12.0000', [WarnStockDown] = '', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 15:43:01', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '010101050204'
2013-11-23 15:43:01,114 [273] DEBUG Mms - insert into mms_warehouseStock([WarehouseCode],[MaterialCode],[Unit],[Num],[UnitPrice],[Money],[WarnStockDown],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate],[Remark]) values('201306030002','010101050204','个','1.00','12.00','12.0000','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01','')
2013-11-23 15:43:01,117 [273] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='010101050204'
2013-11-23 15:43:01,118 [273] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '2.00', [CreatePerson] = '刘会胜', [CreateDate] = '2013-09-18 16:13:08', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '010101050204'
2013-11-23 15:43:01,119 [273] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='010101050204'
2013-11-23 15:43:01,120 [273] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','21','010101050204','201306030002','1.00','12.00','12.0000','1.00','12.00','','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01')
2013-11-23 15:43:01,121 [273] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010301'
2013-11-23 15:43:01,122 [273] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '1.00', [UnitPrice] = '0.00', [Money] = '0.0000', [WarnStockDown] = '', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 15:43:01', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010301'
2013-11-23 15:43:01,123 [273] DEBUG Mms - insert into mms_warehouseStock([WarehouseCode],[MaterialCode],[Unit],[Num],[UnitPrice],[Money],[WarnStockDown],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate],[Remark]) values('201306030002','0101010301','吨','1.00','0.00','0.0000','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01','')
2013-11-23 15:43:01,124 [273] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010301'
2013-11-23 15:43:01,125 [273] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0', [UpperNum] = '0', [Num] = '1.00', [CreatePerson] = '管理员', [CreateDate] = '2013-11-23 15:43:01', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010301'
2013-11-23 15:43:01,126 [273] DEBUG Mms - insert into mms_materialWarnning([ProjectCode],[MaterialCode],[LowerNum],[UpperNum],[Num],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate],[Remark]) values('201306030001','0101010301','0','0','1.00','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01','')
2013-11-23 15:43:01,127 [273] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010301'
2013-11-23 15:43:01,128 [273] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','22','0101010301','201306030002','1.00','0.00','0.0000','1.00','0.00','','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01')
2013-11-23 15:43:01,129 [273] DEBUG Mms - select * from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010205'
2013-11-23 15:43:01,130 [273] DEBUG Mms - update mms_warehouseStock set [Unit] = '吨', [Num] = '3.00', [UnitPrice] = '2.6666666666666666666666666667', [Money] = '8.0000', [WarnStockDown] = '', [CreatePerson] = '访客', [CreateDate] = '2013-07-12 11:09:48', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [WarehouseCode] = '201306030002' and [MaterialCode] = '0101010205'
2013-11-23 15:43:01,137 [273] DEBUG Mms - select * from mms_materialWarnning where ProjectCode='201306030001' and MaterialCode='0101010205'
2013-11-23 15:43:01,138 [273] DEBUG Mms - update mms_materialWarnning set [LowerNum] = '0.00', [UpperNum] = '0.00', [Num] = '14.00', [CreatePerson] = '访客', [CreateDate] = '2013-07-12 11:09:48', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 15:43:01', [Remark] = '' where [ProjectCode] = '201306030001' and [MaterialCode] = '0101010205'
2013-11-23 15:43:01,144 [273] DEBUG Mms - select Num,UnitPrice from mms_warehouseStock where WarehouseCode='201306030002' and MaterialCode='0101010205'
2013-11-23 15:43:01,145 [273] DEBUG Mms - insert into mms_warehouseStockHistory([SrcBillType],[SrcBillNo],[SrcRowId],[MaterialCode],[WarehouseCode],[Num],[UnitPrice],[Money],[StockNum],[StockUnitPrice],[StockMoney],[Remark],[CreatePerson],[CreateDate],[UpdatePerson],[UpdateDate]) values('receive','201307020014','23','0101010205','201306030002','1.00','0.00','0.0000','3.00','2.67','','','管理员','2013-11-23 15:43:01','管理员','2013-11-23 15:43:01')
2013-11-23 15:43:58,668 [265] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-11-23 15:43:59,424 [273] DEBUG Servicesys_menu - 获取动态列表
2013-11-23 15:43:59,425 [273] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-11-23 15:44:14,062 [269] DEBUG Servicesys_menu - 编辑记录
2013-11-23 15:44:14,075 [269] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='1019'
2013-11-23 15:44:14,079 [269] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '1019';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '1019';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '1019';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '1019';
2013-11-23 15:44:14,094 [269] DEBUG Sys - delete from sys_menu where [MenuCode] = '1019'
2013-11-23 15:44:14,113 [269] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0101'
2013-11-23 15:44:14,114 [269] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0101';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0101';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0101';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0101';
2013-11-23 15:44:14,115 [269] DEBUG Sys - delete from sys_menu where [MenuCode] = '0101'
2013-11-23 15:44:14,829 [277] DEBUG Servicesys_menu - 获取动态列表
2013-11-23 15:44:14,832 [277] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-11-23 15:44:27,699 [269] DEBUG Servicesys_menu - 编辑记录
2013-11-23 15:44:27,700 [269] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='9930'
2013-11-23 15:44:27,701 [269] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '9930';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '9930';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '9930';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '9930';
2013-11-23 15:44:27,702 [269] DEBUG Sys - delete from sys_menu where [MenuCode] = '9930'
2013-11-23 15:44:28,535 [264] DEBUG Servicesys_menu - 获取动态列表
2013-11-23 15:44:28,535 [264] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-11-23 15:45:04,424 [283] DEBUG Servicesys_menu - 编辑记录
2013-11-23 15:45:04,425 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0304'
2013-11-23 15:45:04,426 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0304';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0304';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0304';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0304';
2013-11-23 15:45:04,427 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0304'
2013-11-23 15:45:04,428 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0303'
2013-11-23 15:45:04,429 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0303';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0303';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0303';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0303';
2013-11-23 15:45:04,430 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0303'
2013-11-23 15:45:04,432 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0302'
2013-11-23 15:45:04,432 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0302';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0302';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0302';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0302';
2013-11-23 15:45:04,433 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0302'
2013-11-23 15:45:04,435 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0301'
2013-11-23 15:45:04,435 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0301';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0301';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0301';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0301';
2013-11-23 15:45:04,437 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0301'
2013-11-23 15:45:04,438 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='03'
2013-11-23 15:45:04,439 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '03';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '03';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '03';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '03';
2013-11-23 15:45:04,446 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '03'
2013-11-23 15:45:04,457 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0102'
2013-11-23 15:45:04,458 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0102';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0102';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0102';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0102';
2013-11-23 15:45:04,459 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0102'
2013-11-23 15:45:04,460 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0103'
2013-11-23 15:45:04,461 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0103';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0103';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0103';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0103';
2013-11-23 15:45:04,462 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0103'
2013-11-23 15:45:04,463 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0106'
2013-11-23 15:45:04,464 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0106';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0106';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0106';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0106';
2013-11-23 15:45:04,465 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0106'
2013-11-23 15:45:04,466 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0104'
2013-11-23 15:45:04,467 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0104';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0104';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0104';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0104';
2013-11-23 15:45:04,467 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0104'
2013-11-23 15:45:04,468 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='0107'
2013-11-23 15:45:04,469 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '0107';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '0107';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '0107';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '0107';
2013-11-23 15:45:04,470 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '0107'
2013-11-23 15:45:04,471 [283] DEBUG Sys - select sys_menu.* from sys_menu where MenuCode='01'
2013-11-23 15:45:04,472 [283] DEBUG Sys - 
-- 删除角色字段Map
delete from sys_roleMenuColumnMap where menucode = '01';

-- 删除角色按钮Map
delete from sys_roleMenuButtonMap where menucode = '01';

-- 删除角色菜单Map
delete from sys_roleMenuMap       where menucode = '01';

-- 删除菜单按钮Map
delete from sys_menuButtonMap     where menucode = '01';
2013-11-23 15:45:04,473 [283] DEBUG Sys - delete from sys_menu where [MenuCode] = '01'
2013-11-23 15:45:05,093 [265] DEBUG Servicesys_menu - 获取动态列表
2013-11-23 15:45:05,093 [265] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-11-23 15:45:26,506 [277] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:45:26,512 [277] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020016'
2013-11-23 15:45:26,513 [277] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:45:26,513 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:45:26,513 [277] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:45:26,514 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:45:26,514 [277] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020016' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:45:26,514 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:45:26,515 [277] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020016' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:45:26,515 [277] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:45:26,516 [277] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:45:26,798 [264] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:45:26,799 [264] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020016' order by A.MaterialCode
2013-11-23 15:45:31,080 [281] DEBUG Servicemms_receive - 获取实体对象
2013-11-23 15:45:31,081 [281] DEBUG Mms - select mms_receive.* from mms_receive where BillNo='201307020022'
2013-11-23 15:45:31,082 [281] DEBUG Servicemms_receive - 获取上一条下一条数据
2013-11-23 15:45:31,082 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:45:31,082 [281] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo
2013-11-23 15:45:31,082 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:45:31,083 [281] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo<'201307020022' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:45:31,083 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:45:31,083 [281] DEBUG Mms - select top 1 BillNo from mms_receive where BillNo>'201307020022' and ProjectCode='201306030001' order by BillNo
2013-11-23 15:45:31,084 [281] DEBUG Servicemms_receive - 获取字段
2013-11-23 15:45:31,084 [281] DEBUG Mms - select top 1 BillNo from mms_receive where ProjectCode='201306030001' order by BillNo desc
2013-11-23 15:45:31,330 [259] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 15:45:31,330 [259] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_receiveDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020022' order by A.MaterialCode
2013-11-23 15:45:31,458 [279] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 15:45:31,459 [279] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00304%' order by MerchantsCode
2013-11-23 15:45:57,642 [279] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 15:45:57,646 [279] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:45:57,646 [279] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:45:57,647 [279] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:45:57,647 [279] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 15:45:57,648 [279] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:45:57,648 [279] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 15:45:58,998 [279] ERROR /mms/send - System.Web.HttpCompileException (0x80004005): g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Views\Send\Index.cshtml(4): error CS0234: 命名空间“Zephyr.Web.Mms.Models”中不存在类型或命名空间名称“sys_roleMenuColumnMapService”(是否缺少程序集引用?)
   在 System.Web.Compilation.AssemblyBuilder.Compile()
   在 System.Web.Compilation.BuildProvidersCompiler.PerformBuild()
   在 System.Web.Compilation.BuildManager.CompileWebFile(VirtualPath virtualPath)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultInternal(VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVPathBuildResultWithNoAssert(HttpContext context, VirtualPath virtualPath, Boolean noBuild, Boolean allowCrossApp, Boolean allowBuildInPrecompile, Boolean throwIfNotFound, Boolean ensureIsUpToDate)
   在 System.Web.Compilation.BuildManager.GetVirtualPathObjectFactory(VirtualPath virtualPath, HttpContext context, Boolean allowCrossApp, Boolean throwIfNotFound)
   在 System.Web.Compilation.BuildManager.GetObjectFactory(String virtualPath, Boolean throwIfNotFound)
   在 System.Web.Mvc.BuildManagerWrapper.System.Web.Mvc.IBuildManager.FileExists(String virtualPath)
   在 System.Web.Mvc.BuildManagerViewEngine.FileExists(ControllerContext controllerContext, String virtualPath)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.<>c__DisplayClass4.<GetPathFromGeneralName>b__0(String path)
   在 System.Web.WebPages.DefaultDisplayMode.GetDisplayInfo(HttpContextBase httpContext, String virtualPath, Func`2 virtualPathExists)
   在 System.Web.WebPages.DisplayModeProvider.<>c__DisplayClassb.<GetDisplayInfoForVirtualPath>b__8(IDisplayMode mode)
   在 System.Linq.Enumerable.WhereSelectListIterator`2.MoveNext()
   在 System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source, Func`2 predicate)
   在 System.Web.WebPages.DisplayModeProvider.GetDisplayInfoForVirtualPath(String virtualPath, HttpContextBase httpContext, Func`2 virtualPathExists, IDisplayMode currentDisplayMode, Boolean requireConsistentDisplayMode)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPathFromGeneralName(ControllerContext controllerContext, List`1 locations, String name, String controllerName, String areaName, String cacheKey, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.GetPath(ControllerContext controllerContext, String[] locations, String[] areaLocations, String locationsPropertyName, String name, String controllerName, String cacheKeyPrefix, Boolean useCache, String[]& searchedLocations)
   在 System.Web.Mvc.VirtualPathProviderViewEngine.FindView(ControllerContext controllerContext, String viewName, String masterName, Boolean useCache)
   在 System.Web.Mvc.ViewEngineCollection.<>c__DisplayClassc.<FindView>b__b(IViewEngine e)
   在 System.Web.Mvc.ViewEngineCollection.Find(Func`2 lookup, Boolean trackSearchedPaths)
   在 System.Web.Mvc.ViewEngineCollection.FindView(ControllerContext controllerContext, String viewName, String masterName)
   在 System.Web.Mvc.ViewResult.FindView(ControllerContext context)
   在 System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
   在 System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionResultWithFilters(ControllerContext controllerContext, IList`1 filters, ActionResult actionResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 15:47:06,337 [19] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:47:06,370 [19] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:47:06,378 [19] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:47:06,378 [19] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 15:47:06,750 [289] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 15:47:06,774 [289] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 15:47:06,797 [289] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 15:47:06,798 [289] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:47:06,799 [289] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 15:47:06,800 [289] DEBUG Servicesys_code - 获取动态列表
2013-11-23 15:47:06,800 [289] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 15:47:07,765 [289] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 15:47:07,771 [289] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 15:47:07,818 [289] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 15:47:07,820 [289] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 15:47:11,642 [279] DEBUG Servicemms_send - 获取动态列表
2013-11-23 15:47:11,716 [279] ERROR Servicemms_send - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 15:47:14,586 [279] ERROR /api/mms/send - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.SendApiController.Get(RequestWrapper query) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 124
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:24:04,222 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:24:04,255 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:24:04,262 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:24:04,263 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:24:04,632 [235] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:24:04,655 [235] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:24:04,884 [235] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:24:06,083 [235] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:24:06,084 [235] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:24:07,802 [235] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:24:12,040 [240] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 16:24:12,053 [240] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:24:12,054 [240] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:24:12,056 [240] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:24:12,056 [240] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 16:24:15,099 [251] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 16:24:15,100 [251] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:24:15,176 [251] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:24:21,300 [256] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:24:21,301 [256] DEBUG Mms - select top 20 ProjectName as text,ProjectCode as value from mms_project order by ProjectCode
2013-11-23 16:24:21,349 [256] DEBUG Mms - select count(*) from ( select ProjectName as text,ProjectCode as value from mms_project ) tb_temp
2013-11-23 16:24:24,831 [256] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:24:24,831 [256] DEBUG Mms - select top 20 ProjectName as text,ProjectCode as value from mms_project order by ProjectCode
2013-11-23 16:24:24,832 [256] DEBUG Mms - select count(*) from ( select ProjectName as text,ProjectCode as value from mms_project ) tb_temp
2013-11-23 16:24:27,534 [251] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:24:27,537 [251] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:24:27,538 [251] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:24:27,538 [251] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:24:27,539 [251] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:24:27,539 [251] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:24:27,539 [251] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:24:28,890 [251] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:24:28,892 [251] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:24:28,895 [251] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:24:28,896 [251] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:24:30,813 [242] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:24:30,814 [242] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:24:30,877 [242] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:24:36,463 [235] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:24:36,463 [235] DEBUG Mms - select top 10 BillNo from mms_send where BillNo='2'
2013-11-23 16:24:38,449 [235] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:24:38,449 [235] DEBUG Mms - select top 10 BillNo from mms_send where BillNo='2'
2013-11-23 16:24:39,378 [242] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:24:39,379 [242] DEBUG Mms - select top 10 BillNo from mms_send where BillNo='2'
2013-11-23 16:24:46,153 [235] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:24:46,154 [235] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'b%' or [dbo].[fun_getPY](MerchantsName) like N'b%'
2013-11-23 16:24:46,745 [242] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:24:46,745 [242] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'bj%' or [dbo].[fun_getPY](MerchantsName) like N'bj%'
2013-11-23 16:24:50,264 [235] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:24:50,265 [235] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where E.MerchantsName='北京乾盛成钢铁贸易公司'  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:24:50,280 [235] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where E.MerchantsName='北京乾盛成钢铁贸易公司'  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:24:51,231 [252] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:24:51,231 [252] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:24:51,234 [252] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:24:54,580 [249] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:24:54,580 [249] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'j%' or [dbo].[fun_getPY](MerchantsName) like N'j%'
2013-11-23 16:24:58,713 [249] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:24:58,714 [249] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where E.MerchantsName='江苏华能建设工程集团有限公司asdfsadfsadf'  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:24:58,732 [249] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where E.MerchantsName='江苏华能建设工程集团有限公司asdfsadfsadf'  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:25:00,741 [245] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:25:00,742 [245] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:25:00,744 [245] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:25:05,368 [249] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:25:05,369 [249] DEBUG Mms - select top 10 DoPerson from mms_send where DoPerson like 'l%' or [dbo].[fun_getPY](DoPerson) like N'l%'
2013-11-23 16:25:07,641 [240] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:25:07,642 [240] DEBUG Mms - select top 10 DoPerson from mms_send where DoPerson like 'f%' or [dbo].[fun_getPY](DoPerson) like N'f%'
2013-11-23 16:25:08,044 [249] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:25:08,045 [249] DEBUG Mms - select top 10 DoPerson from mms_send where DoPerson like 'fk%' or [dbo].[fun_getPY](DoPerson) like N'fk%'
2013-11-23 16:25:11,138 [252] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:25:11,139 [252] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where DoPerson like '%访客%'    and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:25:11,152 [252] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where DoPerson like '%访客%'    and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:25:18,639 [273] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 16:25:18,642 [273] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:25:18,642 [273] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:25:18,643 [273] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:25:18,643 [273] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 16:25:20,730 [242] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 16:25:20,731 [242] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:25:20,733 [242] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:27:43,707 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:27:43,741 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:27:43,748 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:27:43,749 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:27:44,141 [250] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:27:44,162 [250] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:27:44,388 [250] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:27:45,589 [250] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:27:45,590 [250] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:27:47,096 [244] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:27:49,896 [246] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:27:49,910 [246] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:27:49,912 [246] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode=''
2013-11-23 16:27:49,913 [246] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:27:49,914 [246] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:27:49,914 [246] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:27:49,915 [246] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:27:50,816 [246] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:27:50,818 [246] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:27:50,821 [246] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:27:50,822 [246] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:27:53,066 [260] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:27:53,067 [260] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:27:53,153 [260] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:27:55,785 [238] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:27:55,787 [238] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:27:55,788 [238] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode=''
2013-11-23 16:27:55,788 [238] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:27:55,789 [238] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:27:55,789 [238] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:27:55,790 [238] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:27:55,803 [238] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:27:55,804 [238] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:27:55,805 [238] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:27:55,806 [238] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:27:57,634 [244] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:27:57,634 [244] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:27:57,635 [244] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:28:07,455 [241] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:28:07,455 [241] DEBUG Mms - select top 20 ProjectName as text,ProjectCode as value from mms_project order by ProjectCode
2013-11-23 16:28:07,497 [241] DEBUG Mms - select count(*) from ( select ProjectName as text,ProjectCode as value from mms_project ) tb_temp
2013-11-23 16:28:11,036 [253] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:28:11,036 [253] DEBUG Mms - select top 10 distinct DoPerson from mms_send where DoPerson like 'l%' or [dbo].[fun_getPY](DoPerson) like N'l%'
2013-11-23 16:28:11,252 [253] ERROR Servicemms_send - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 关键字 'distinct' 附近有语法错误。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:1d7bd9b2-61f5-47ce-b805-c62331611831
2013-11-23 16:28:13,759 [253] ERROR /api/mms/send/getdoperson - System.Data.SqlClient.SqlException (0x80131904): 关键字 'distinct' 附近有语法错误。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 95
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:1d7bd9b2-61f5-47ce-b805-c62331611831
2013-11-23 16:28:13,778 [250] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:28:13,779 [250] DEBUG Mms - select top 10 distinct DoPerson from mms_send where DoPerson like 'f%' or [dbo].[fun_getPY](DoPerson) like N'f%'
2013-11-23 16:28:13,982 [250] ERROR Servicemms_send - 获取动态列表失败
System.Data.SqlClient.SqlException (0x80131904): 关键字 'distinct' 附近有语法错误。
   在 Zephyr.Data.ExecuteQueryHandler.HandleQueryException(Exception exception) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 107
   在 Zephyr.Data.ExecuteQueryHandler.ExecuteQuery(Boolean useReader, Action action) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\Handlers\ExecuteQueryHandler.cs:行号 28
   在 Zephyr.Data.DbCommand.QueryMany[TEntity,TList](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 14
   在 Zephyr.Data.DbCommand.QueryMany[TEntity](Action`2 customMapper) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Command\PartialClasses\QueryMany.cs:行号 36
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
ClientConnectionId:1d7bd9b2-61f5-47ce-b805-c62331611831
2013-11-23 16:28:15,577 [250] ERROR /api/mms/send/getdoperson - System.Data.SqlClient.SqlException (0x80131904): 关键字 'distinct' 附近有语法错误。
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 95
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
ClientConnectionId:1d7bd9b2-61f5-47ce-b805-c62331611831
2013-11-23 16:28:37,940 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:28:37,972 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:28:37,979 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:28:37,980 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:28:38,356 [253] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:28:38,375 [253] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:28:38,586 [253] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:28:39,790 [253] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:28:39,790 [253] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:28:41,543 [253] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:28:44,774 [239] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:28:44,785 [239] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:28:44,786 [239] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode=''
2013-11-23 16:28:44,787 [239] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:28:44,787 [239] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:28:44,788 [239] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:28:44,789 [239] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:28:45,621 [239] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:28:45,623 [239] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:28:45,626 [239] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:28:45,627 [239] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:28:47,855 [244] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:28:47,856 [244] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:28:47,935 [244] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:29:18,028 [253] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:29:18,029 [253] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:29:18,030 [253] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:29:20,797 [253] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:29:20,798 [253] DEBUG Mms - select top 20 ProjectName as text,ProjectCode as value from mms_project order by ProjectCode
2013-11-23 16:29:20,834 [253] DEBUG Mms - select count(*) from ( select ProjectName as text,ProjectCode as value from mms_project ) tb_temp
2013-11-23 16:29:33,710 [241] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:29:33,710 [241] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030002' order by A.BillNo
2013-11-23 16:29:33,723 [241] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030002' ) tb_temp
2013-11-23 16:29:36,310 [254] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:29:36,311 [254] DEBUG Mms - select top 20 ProjectName as text,ProjectCode as value from mms_project order by ProjectCode
2013-11-23 16:29:36,311 [254] DEBUG Mms - select count(*) from ( select ProjectName as text,ProjectCode as value from mms_project ) tb_temp
2013-11-23 16:29:39,167 [254] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:29:39,168 [254] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:29:39,170 [254] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:31:49,539 [239] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:31:49,540 [239] DEBUG Mms - select top 10 BillNo from mms_send where BillNo='2'
2013-11-23 16:32:10,996 [247] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:32:10,996 [247] DEBUG Mms - select top 10 BillNo from mms_send where BillNo='2'
2013-11-23 16:32:12,227 [241] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:32:12,227 [241] DEBUG Mms - select top 10 BillNo from mms_send where BillNo='a'
2013-11-23 16:32:13,202 [252] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:32:13,203 [252] DEBUG Mms - select top 10 BillNo from mms_send where BillNo='2'
2013-11-23 16:32:13,552 [276] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:32:13,553 [276] DEBUG Mms - select top 10 BillNo from mms_send where BillNo='2'
2013-11-23 16:33:20,851 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:33:20,883 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:33:20,891 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:33:20,891 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:33:21,246 [247] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:33:21,266 [247] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:33:21,481 [247] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:33:22,680 [247] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:33:22,681 [247] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:33:24,404 [247] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:33:28,874 [247] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:33:28,886 [247] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:33:28,888 [247] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode=''
2013-11-23 16:33:28,889 [247] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:33:28,890 [247] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:33:28,890 [247] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:33:28,891 [247] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:33:29,743 [247] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:33:29,745 [247] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:33:29,748 [247] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:33:29,749 [247] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:33:31,930 [247] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:33:31,931 [247] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:33:32,004 [247] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:33:36,470 [249] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:33:36,471 [249] DEBUG Mms - select top 20 ProjectName as text,ProjectCode as value from mms_project order by ProjectCode
2013-11-23 16:33:36,512 [249] DEBUG Mms - select count(*) from ( select ProjectName as text,ProjectCode as value from mms_project ) tb_temp
2013-11-23 16:33:39,938 [244] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:33:39,993 [244] ERROR Servicemms_send - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:33:42,035 [233] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:33:42,083 [233] ERROR Servicemms_send - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:33:45,014 [239] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:33:45,046 [244] ERROR /api/mms/send/getdoperson - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 98
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:33:45,047 [233] ERROR /api/mms/send/getdoperson - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 98
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:33:45,084 [239] ERROR Servicemms_send - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:33:46,680 [239] ERROR /api/mms/send/getdoperson - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 98
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:33:49,139 [276] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:33:49,140 [276] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:33:49,142 [276] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:34:00,158 [246] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:34:00,204 [246] ERROR Servicemms_send - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:34:04,051 [246] ERROR /api/mms/send/getdoperson - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 98
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:34:04,254 [244] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:34:04,307 [244] ERROR Servicemms_send - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:34:06,471 [244] ERROR /api/mms/send/getdoperson - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 98
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:34:09,222 [233] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:34:09,264 [233] ERROR Servicemms_send - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:34:29,379 [233] ERROR /api/mms/send/getdoperson - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 98
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:34:50,570 [239] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:34:50,571 [239] ERROR Servicemms_send - 获取动态列表失败
Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Data.SelectBuilder`1.GetPreparedDbCommand() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 21
   在 Zephyr.Data.SelectBuilder`1.QueryManyDynamic() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Data\Builders\Select\SelectBuilder.cs:行号 150
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:34:50,590 [239] ERROR /api/mms/send/getdoperson - Zephyr.Data.FluentDataException: Order by must defined when using Paging.
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Web.Mms.Controllers.SendApiController.GetDoPerson(String q) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\SendController.cs:行号 98
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:35:10,028 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:35:10,060 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:35:10,066 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:35:10,067 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:35:10,455 [239] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:35:10,477 [239] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:35:10,711 [239] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:35:11,955 [239] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:35:11,956 [239] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:35:13,603 [232] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:35:17,218 [252] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:35:17,229 [252] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:35:17,230 [252] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode=''
2013-11-23 16:35:17,231 [252] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:35:17,232 [252] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:35:17,232 [252] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:35:17,233 [252] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:35:18,088 [252] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:35:18,090 [252] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:35:18,093 [252] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:35:18,094 [252] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:35:20,458 [276] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:35:20,459 [276] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:35:20,537 [276] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:35:24,284 [252] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:35:24,285 [252] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:35:24,286 [252] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:35:26,432 [247] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:35:26,433 [247] DEBUG Mms - select top 20 ProjectName as text,ProjectCode as value from mms_project order by ProjectCode
2013-11-23 16:35:26,484 [247] DEBUG Mms - select count(*) from ( select ProjectName as text,ProjectCode as value from mms_project ) tb_temp
2013-11-23 16:35:28,663 [247] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:35:28,663 [247] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:35:28,666 [247] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:35:47,092 [247] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:35:47,093 [247] DEBUG Mms - select distinct top 10  DoPerson from mms_send where DoPerson like 'f%' or [dbo].[fun_getPY](DoPerson) like N'f%' order by DoPerson
2013-11-23 16:35:51,084 [254] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:35:51,085 [254] DEBUG Mms - select distinct top 10  DoPerson from mms_send where DoPerson like 'f%' or [dbo].[fun_getPY](DoPerson) like N'f%' order by DoPerson
2013-11-23 16:35:53,485 [247] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:35:53,485 [247] DEBUG Mms - select distinct top 10  DoPerson from mms_send where DoPerson like 'fk%' or [dbo].[fun_getPY](DoPerson) like N'fk%' order by DoPerson
2013-11-23 16:35:54,161 [239] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:35:54,161 [239] DEBUG Mms - select distinct top 10  DoPerson from mms_send where DoPerson like 'f%' or [dbo].[fun_getPY](DoPerson) like N'f%' order by DoPerson
2013-11-23 16:36:54,053 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:36:54,084 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:36:54,092 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:36:54,092 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:36:54,445 [241] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:36:54,472 [241] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:36:54,713 [241] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:36:55,913 [241] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:36:55,913 [241] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:36:57,553 [241] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:37:00,906 [249] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:37:00,919 [249] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:37:00,921 [249] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode=''
2013-11-23 16:37:00,922 [249] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:37:00,923 [249] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:37:00,924 [249] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:37:00,924 [249] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:37:01,808 [249] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:37:01,809 [249] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:37:01,812 [249] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:37:01,814 [249] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:37:04,052 [241] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:37:04,053 [241] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:37:04,126 [241] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:37:06,231 [250] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:37:06,232 [250] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' order by A.BillNo
2013-11-23 16:37:06,233 [250] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='' ) tb_temp
2013-11-23 16:38:30,102 [252] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:38:30,103 [252] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:38:30,104 [252] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:38:30,120 [252] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:38:30,121 [252] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:38:30,696 [241] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:38:33,136 [234] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:38:44,110 [234] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:38:44,110 [234] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode=''
2013-11-23 16:38:44,112 [234] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:38:44,112 [234] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:38:44,113 [234] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:38:44,113 [234] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:38:44,131 [234] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:38:44,132 [234] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:38:44,133 [234] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:38:44,134 [234] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:40:18,530 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:40:18,562 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:40:18,569 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:40:18,570 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:40:18,940 [246] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:40:18,960 [246] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:40:19,175 [246] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:40:33,763 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:40:33,797 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:40:33,804 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:40:33,805 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:40:34,289 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:40:34,315 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:40:34,543 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:40:35,735 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:40:35,736 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:40:37,314 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:40:43,836 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:40:43,848 [11] DEBUG Servicemms_project - 获取实体对象
2013-11-23 16:40:43,850 [11] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 16:40:43,862 [11] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:40:43,865 [11] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:40:43,866 [11] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:40:43,867 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:40:43,867 [11] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:40:43,868 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:40:44,699 [11] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:40:44,700 [11] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:40:44,704 [11] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:40:44,705 [11] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:40:46,957 [7] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:40:46,958 [7] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:40:47,028 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:40:51,524 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/edit')
2013-11-23 16:40:51,535 [11] DEBUG Servicemms_send - 获取实体对象
2013-11-23 16:40:51,535 [11] DEBUG Mms - select mms_send.* from mms_send where BillNo='201307230011'
2013-11-23 16:40:51,541 [11] DEBUG Servicemms_send - 获取上一条下一条数据
2013-11-23 16:40:51,552 [11] DEBUG Servicemms_send - 获取字段
2013-11-23 16:40:51,553 [11] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo
2013-11-23 16:40:51,555 [11] DEBUG Servicemms_send - 获取字段
2013-11-23 16:40:51,555 [11] DEBUG Mms - select top 1 BillNo from mms_send where BillNo<'201307230011' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:40:51,557 [11] DEBUG Servicemms_send - 获取字段
2013-11-23 16:40:51,557 [11] DEBUG Mms - select top 1 BillNo from mms_send where BillNo>'201307230011' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:40:51,560 [11] DEBUG Servicemms_send - 获取字段
2013-11-23 16:40:51,560 [11] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:40:51,732 [11] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:40:51,732 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:40:51,733 [11] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:40:51,734 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:40:51,735 [11] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:40:51,735 [11] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:40:51,736 [11] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:40:51,736 [11] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:40:51,737 [11] DEBUG Servicesys_code - 获取字段
2013-11-23 16:40:51,738 [11] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2013-11-23 16:40:54,907 [11] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:40:54,908 [11] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00501%' order by MerchantsCode
2013-11-23 16:40:56,424 [10] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:40:56,425 [10] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_sendDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307230011' order by A.MaterialCode
2013-11-23 16:41:01,011 [6] DEBUG Servicemms_send - 编辑记录
2013-11-23 16:41:01,028 [6] DEBUG Mms - select mms_send.* from mms_send where BillNo='201307230011'
2013-11-23 16:41:01,045 [6] DEBUG Mms - update mms_send set [WarehouseCode] = '201306030002', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:41:01' where [BillNo] = '201307230011'
2013-11-23 16:41:06,791 [10] DEBUG Servicemms_send - 编辑记录
2013-11-23 16:41:06,797 [10] DEBUG Mms - select mms_send.* from mms_send where BillNo='201307230011'
2013-11-23 16:41:06,799 [10] DEBUG Mms - update mms_send set [TotalMoney] = '31', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:41:06' where [BillNo] = '201307230011'
2013-11-23 16:41:06,803 [10] DEBUG Mms - select mms_sendDetail.* from mms_sendDetail where BillNo='201307230011' and RowId='4'
2013-11-23 16:41:06,806 [10] DEBUG Mms - update mms_sendDetail set [MaterialCode] = '12', [Unit] = '3', [UnitPrice] = '3', [Num] = '2', [Money] = '6.00', [Remark] = '', [SrcBillType] = '', [SrcBillNo] = '', [SrcRowId] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:41:06' where [BillNo] = '201307230011' and [RowId] = '4'
2013-11-23 16:41:06,813 [10] DEBUG Mms - select mms_sendDetail.* from mms_sendDetail where BillNo='201307230011' and RowId='2'
2013-11-23 16:41:06,815 [10] DEBUG Mms - update mms_sendDetail set [MaterialCode] = '12', [Unit] = '3', [UnitPrice] = '4', [Num] = '5', [Money] = '20.00', [Remark] = '', [SrcBillType] = '', [SrcBillNo] = '', [SrcRowId] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:41:06' where [BillNo] = '201307230011' and [RowId] = '2'
2013-11-23 16:41:08,266 [10] DEBUG Servicemms_send - 获取实体对象
2013-11-23 16:41:08,266 [10] DEBUG Mms - select mms_send.* from mms_send where BillNo='201307110001'
2013-11-23 16:41:08,268 [10] DEBUG Servicemms_send - 获取上一条下一条数据
2013-11-23 16:41:08,268 [10] DEBUG Servicemms_send - 获取字段
2013-11-23 16:41:08,268 [10] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo
2013-11-23 16:41:08,269 [10] DEBUG Servicemms_send - 获取字段
2013-11-23 16:41:08,269 [10] DEBUG Mms - select top 1 BillNo from mms_send where BillNo<'201307110001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:41:08,271 [10] DEBUG Servicemms_send - 获取字段
2013-11-23 16:41:08,271 [10] DEBUG Mms - select top 1 BillNo from mms_send where BillNo>'201307110001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:41:08,274 [10] DEBUG Servicemms_send - 获取字段
2013-11-23 16:41:08,274 [10] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:41:08,539 [6] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:41:08,539 [6] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_sendDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307110001' order by A.MaterialCode
2013-11-23 16:41:08,695 [9] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:41:08,695 [9] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00505%' order by MerchantsCode
2013-11-23 16:41:08,782 [6] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:41:08,782 [6] DEBUG Mms - select BuildPartCode as value,BuildPartName as text,ParentCode as pid from mms_buildPart where ProjectCode='' order by BuildPartCode
2013-11-23 16:41:09,068 [11] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:41:09,069 [11] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00505%' order by MerchantsCode
2013-11-23 16:41:09,256 [8] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:41:09,256 [8] DEBUG Mms - select BuildPartCode as value,BuildPartName as text,ParentCode as pid from mms_buildPart where ProjectCode='' order by BuildPartCode
2013-11-23 16:41:10,447 [7] DEBUG Servicemms_send - 获取实体对象
2013-11-23 16:41:10,447 [7] DEBUG Mms - select mms_send.* from mms_send where BillNo='201307230011'
2013-11-23 16:41:10,448 [7] DEBUG Servicemms_send - 获取上一条下一条数据
2013-11-23 16:41:10,448 [7] DEBUG Servicemms_send - 获取字段
2013-11-23 16:41:10,449 [7] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo
2013-11-23 16:41:10,449 [7] DEBUG Servicemms_send - 获取字段
2013-11-23 16:41:10,449 [7] DEBUG Mms - select top 1 BillNo from mms_send where BillNo<'201307230011' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:41:10,450 [7] DEBUG Servicemms_send - 获取字段
2013-11-23 16:41:10,450 [7] DEBUG Mms - select top 1 BillNo from mms_send where BillNo>'201307230011' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:41:10,451 [7] DEBUG Servicemms_send - 获取字段
2013-11-23 16:41:10,451 [7] DEBUG Mms - select top 1 BillNo from mms_send where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:41:10,675 [12] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:41:10,676 [12] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_sendDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307230011' order by A.MaterialCode
2013-11-23 16:41:24,148 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/direct/Index','/Mms/direct')
2013-11-23 16:41:24,158 [13] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:41:24,159 [13] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:41:24,159 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:41:24,159 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 16:41:26,769 [9] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:41:26,770 [9] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:41:26,846 [9] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:41:29,259 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/send/Index','/Mms/send')
2013-11-23 16:41:29,263 [12] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:41:29,263 [12] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:41:29,263 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:41:29,264 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:41:29,264 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:41:29,265 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:41:29,308 [12] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:41:29,309 [12] DEBUG Sys - 
select *
from sys_roleMenuColumnMap 
where MenuCode = '1001'
and RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
2013-11-23 16:41:29,310 [12] DEBUG Sys - select MenuCode from sys_menu where URL = '/mms/send'
2013-11-23 16:41:29,311 [12] DEBUG Sys - 
select A.*
from sys_button A
inner join sys_roleMenuButtonMap B on B.MenuCode = '1001' and B.ButtonCode = A.ButtonCode
where RoleCode in (
select RoleCode
from sys_userRoleMap
where userCode = 'admin'
union
select A.RoleCode
from sys_organizeRoleMap A
inner join sys_userOrganizeMap B on B.OrganizeCode = A.OrganizeCode
where B.UserCode = 'admin'
)
order by ButtonSeq
2013-11-23 16:41:31,227 [5] DEBUG Servicemms_send - 获取动态列表
2013-11-23 16:41:31,227 [5] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:41:31,230 [5] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as PickUnitName from mms_send A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants E on E.MerchantsCode=A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:41:47,594 [13] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/direct/Index','/Mms/direct')
2013-11-23 16:41:47,596 [13] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:41:47,596 [13] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:41:47,597 [13] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:41:47,597 [13] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 16:41:49,429 [12] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:41:49,430 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:41:49,431 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:41:52,974 [12] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:41:52,975 [12] DEBUG Mms - select top 10 BillNo from mms_direct where BillNo like '2%' or [dbo].[fun_getPY](BillNo) like N'2%'
2013-11-23 16:41:55,091 [12] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:41:55,092 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where BillNo='201307220010'       and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:41:55,100 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where BillNo='201307220010'       and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:41:56,551 [9] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:41:56,551 [9] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:41:56,553 [9] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:42:00,232 [11] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:42:00,232 [11] DEBUG Mms - select top 10 BillNo from mms_direct where BillNo like '2%' or [dbo].[fun_getPY](BillNo) like N'2%'
2013-11-23 16:42:01,265 [13] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:42:01,265 [13] DEBUG Mms - select top 10 BillNo from mms_direct where BillNo like '20%' or [dbo].[fun_getPY](BillNo) like N'20%'
2013-11-23 16:42:06,729 [9] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:42:06,730 [9] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where BillNo='201307220021'       and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:42:06,738 [9] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where BillNo='201307220021'       and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:42:08,385 [13] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:42:08,386 [13] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:42:08,388 [13] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:42:17,728 [13] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:42:17,729 [13] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'b%' or [dbo].[fun_getPY](MerchantsName) like N'b%'
2013-11-23 16:42:18,167 [12] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:42:18,168 [12] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'bj%' or [dbo].[fun_getPY](MerchantsName) like N'bj%'
2013-11-23 16:42:18,898 [5] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:42:18,898 [5] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'bjx%' or [dbo].[fun_getPY](MerchantsName) like N'bjx%'
2013-11-23 16:42:19,799 [13] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:42:19,800 [13] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'bj%' or [dbo].[fun_getPY](MerchantsName) like N'bj%'
2013-11-23 16:42:20,803 [6] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:42:20,803 [6] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'bjs%' or [dbo].[fun_getPY](MerchantsName) like N'bjs%'
2013-11-23 16:42:21,505 [12] DEBUG Servicemms_merchants - 获取动态列表
2013-11-23 16:42:21,505 [12] DEBUG Mms - select top 10 MerchantsName from mms_merchants where MerchantsName like 'bjsx%' or [dbo].[fun_getPY](MerchantsName) like N'bjsx%'
2013-11-23 16:42:24,379 [10] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:42:24,380 [10] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where D.MerchantsName like '%北京市新世纪东方建筑材料有限公司%'     and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:42:24,414 [10] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where D.MerchantsName like '%北京市新世纪东方建筑材料有限公司%'     and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:42:25,541 [10] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:42:25,542 [10] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:42:25,543 [10] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName,D.MerchantsName as SupplierName,E.MerchantsName as PickUnitName from mms_direct A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_merchants     D on D.MerchantsCode    = A.SupplierCode
        left join mms_merchants     E on E.MerchantsCode    = A.PickUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:42:27,021 [9] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/direct/edit')
2013-11-23 16:42:27,038 [9] DEBUG Servicemms_direct - 获取实体对象
2013-11-23 16:42:27,039 [9] DEBUG Mms - select mms_direct.* from mms_direct where BillNo='201307230005'
2013-11-23 16:42:27,046 [9] DEBUG Servicemms_direct - 获取上一条下一条数据
2013-11-23 16:42:27,047 [9] DEBUG Servicemms_direct - 获取字段
2013-11-23 16:42:27,048 [9] DEBUG Mms - select top 1 BillNo from mms_direct where ProjectCode='201306030001' order by BillNo
2013-11-23 16:42:27,051 [9] DEBUG Servicemms_direct - 获取字段
2013-11-23 16:42:27,051 [9] DEBUG Mms - select top 1 BillNo from mms_direct where BillNo<'201307230005' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:42:27,055 [9] DEBUG Servicemms_direct - 获取字段
2013-11-23 16:42:27,056 [9] DEBUG Mms - select top 1 BillNo from mms_direct where BillNo>'201307230005' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:42:27,059 [9] DEBUG Servicemms_direct - 获取字段
2013-11-23 16:42:27,060 [9] DEBUG Mms - select top 1 BillNo from mms_direct where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:42:27,302 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:42:27,303 [9] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:42:27,304 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:42:27,304 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 16:42:27,304 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:42:27,305 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 16:42:27,305 [9] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:42:27,306 [9] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:42:27,307 [9] DEBUG Servicesys_code - 获取字段
2013-11-23 16:42:27,307 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 16:42:27,307 [9] DEBUG Servicesys_code - 获取字段
2013-11-23 16:42:27,308 [9] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 16:42:39,618 [6] ERROR /plugins/getlookupdata - System.IO.DirectoryNotFoundException: 未能找到路径“G:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Views\Shared\Xml\merchants.xml”的一部分。
   在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
   在 System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   在 System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)
   在 System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   在 System.Xml.XmlTextReaderImpl.FinishInitUriString()
   在 System.Xml.XmlTextReaderImpl..ctor(String uriStr, XmlReaderSettings settings, XmlParserContext context, XmlResolver uriResolver)
   在 System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)
   在 System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)
   在 System.Xml.Linq.XElement.Load(String uri, LoadOptions options)
   在 System.Xml.Linq.XElement.Load(String uri)
   在 Zephyr.Core.RequestWrapper.LoadXmlFile(String url) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapper.cs:行号 79
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 30
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 16:42:42,750 [9] ERROR /plugins/getlookupdata - System.IO.DirectoryNotFoundException: 未能找到路径“G:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Views\Shared\Xml\merchants.xml”的一部分。
   在 System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   在 System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath, Boolean checkHost)
   在 System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize)
   在 System.Xml.XmlDownloadManager.GetStream(Uri uri, ICredentials credentials, IWebProxy proxy, RequestCachePolicy cachePolicy)
   在 System.Xml.XmlUrlResolver.GetEntity(Uri absoluteUri, String role, Type ofObjectToReturn)
   在 System.Xml.XmlTextReaderImpl.FinishInitUriString()
   在 System.Xml.XmlTextReaderImpl..ctor(String uriStr, XmlReaderSettings settings, XmlParserContext context, XmlResolver uriResolver)
   在 System.Xml.XmlReaderSettings.CreateReader(String inputUri, XmlParserContext inputContext)
   在 System.Xml.XmlReader.Create(String inputUri, XmlReaderSettings settings, XmlParserContext inputContext)
   在 System.Xml.Linq.XElement.Load(String uri, LoadOptions options)
   在 System.Xml.Linq.XElement.Load(String uri)
   在 Zephyr.Core.RequestWrapper.LoadXmlFile(String url) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapper.cs:行号 79
   在 Zephyr.Web.Mvc.Controllers.PluginsController.GetLookupData(String index) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Web.Mvc\Controllers\PluginsController.cs:行号 30
   在 lambda_method(Closure , ControllerBase , Object[] )
   在 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   在 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   在 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass42.<BeginInvokeSynchronousActionMethod>b__41()
   在 System.Web.Mvc.Async.AsyncResultWrapper.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethod(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<>c__DisplayClass39.<BeginInvokeActionMethodWithFilters>b__33()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass4f.<InvokeActionMethodFilterAsynchronously>b__49()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass37.<BeginInvokeActionMethodWithFilters>b__36(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncResultWrapper.WrappedAsyncResult`1.End()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.EndInvokeActionMethodWithFilters(IAsyncResult asyncResult)
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<>c__DisplayClass2a.<BeginInvokeAction>b__20()
   在 System.Web.Mvc.Async.AsyncControllerActionInvoker.<>c__DisplayClass25.<BeginInvokeAction>b__22(IAsyncResult asyncResult)
2013-11-23 16:42:43,984 [13] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:42:43,985 [13] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_directDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307230005' order by A.MaterialCode
2013-11-23 16:43:57,549 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/direct/edit')
2013-11-23 16:43:57,552 [26] DEBUG Servicemms_direct - 获取实体对象
2013-11-23 16:43:57,552 [26] DEBUG Mms - select mms_direct.* from mms_direct where BillNo='201307230005'
2013-11-23 16:43:57,553 [26] DEBUG Servicemms_direct - 获取上一条下一条数据
2013-11-23 16:43:57,553 [26] DEBUG Servicemms_direct - 获取字段
2013-11-23 16:43:57,554 [26] DEBUG Mms - select top 1 BillNo from mms_direct where ProjectCode='201306030001' order by BillNo
2013-11-23 16:43:57,554 [26] DEBUG Servicemms_direct - 获取字段
2013-11-23 16:43:57,554 [26] DEBUG Mms - select top 1 BillNo from mms_direct where BillNo<'201307230005' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:43:57,555 [26] DEBUG Servicemms_direct - 获取字段
2013-11-23 16:43:57,555 [26] DEBUG Mms - select top 1 BillNo from mms_direct where BillNo>'201307230005' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:43:57,556 [26] DEBUG Servicemms_direct - 获取字段
2013-11-23 16:43:57,556 [26] DEBUG Mms - select top 1 BillNo from mms_direct where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:43:57,557 [26] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:43:57,557 [26] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:43:57,558 [26] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:43:57,558 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 16:43:57,559 [26] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:43:57,559 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 16:43:57,560 [26] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:43:57,560 [26] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:43:57,561 [26] DEBUG Servicesys_code - 获取字段
2013-11-23 16:43:57,561 [26] DEBUG Sys - select top 1 Code from sys_code where CodeType='SupplyType' and IsEnable='1' and IsDefault='1'
2013-11-23 16:43:57,562 [26] DEBUG Servicesys_code - 获取字段
2013-11-23 16:43:57,562 [26] DEBUG Sys - select top 1 Code from sys_code where CodeType='PayType' and IsEnable='1' and IsDefault='1'
2013-11-23 16:44:03,888 [18] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:44:03,889 [18] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00301%' order by MerchantsCode
2013-11-23 16:44:05,427 [26] DEBUG Servicemms_direct - 获取动态列表
2013-11-23 16:44:05,428 [26] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_directDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307230005' order by A.MaterialCode
2013-11-23 16:44:14,712 [26] DEBUG Servicemms_direct - 编辑记录
2013-11-23 16:44:14,714 [26] DEBUG Mms - select mms_direct.* from mms_direct where BillNo='201307230005'
2013-11-23 16:44:14,718 [26] DEBUG Mms - update mms_direct set [PickPerson] = '1', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:44:14' where [BillNo] = '201307230005'
2013-11-23 16:44:23,236 [26] DEBUG Servicemms_direct - 编辑记录
2013-11-23 16:44:23,237 [26] DEBUG Mms - select mms_direct.* from mms_direct where BillNo='201307230005'
2013-11-23 16:44:23,238 [26] DEBUG Mms - update mms_direct set [TotalMoney] = '1', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:44:23' where [BillNo] = '201307230005'
2013-11-23 16:44:23,243 [26] DEBUG Mms - select mms_directDetail.* from mms_directDetail where BillNo='201307230005' and RowId='3'
2013-11-23 16:44:23,246 [26] DEBUG Mms - update mms_directDetail set [MaterialCode] = '0101010103', [Unit] = '吨', [UnitPrice] = '1.00', [Num] = '1', [Money] = '1.00', [Remark] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:44:23' where [BillNo] = '201307230005' and [RowId] = '3'
2013-11-23 16:44:27,001 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2013-11-23 16:44:27,010 [26] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:44:27,011 [26] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:44:29,611 [18] DEBUG Servicemms_refund - 获取动态列表
2013-11-23 16:44:29,612 [18] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName from mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:44:29,675 [18] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName from mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:44:33,064 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/refund/edit')
2013-11-23 16:44:33,078 [26] DEBUG Servicemms_refund - 获取实体对象
2013-11-23 16:44:33,078 [26] DEBUG Mms - select mms_refund.* from mms_refund where BillNo='201307050002'
2013-11-23 16:44:33,085 [26] DEBUG Servicemms_refund - 获取上一条下一条数据
2013-11-23 16:44:33,086 [26] DEBUG Servicemms_refund - 获取字段
2013-11-23 16:44:33,087 [26] DEBUG Mms - select top 1 BillNo from mms_refund where ProjectCode='201306030001' order by BillNo
2013-11-23 16:44:33,090 [26] DEBUG Servicemms_refund - 获取字段
2013-11-23 16:44:33,090 [26] DEBUG Mms - select top 1 BillNo from mms_refund where BillNo<'201307050002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:44:33,094 [26] DEBUG Servicemms_refund - 获取字段
2013-11-23 16:44:33,094 [26] DEBUG Mms - select top 1 BillNo from mms_refund where BillNo>'201307050002' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:44:33,097 [26] DEBUG Servicemms_refund - 获取字段
2013-11-23 16:44:33,098 [26] DEBUG Mms - select top 1 BillNo from mms_refund where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:44:33,352 [26] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:44:33,353 [26] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:44:33,354 [26] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:44:33,354 [26] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:44:36,305 [11] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:44:36,305 [11] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00508%' order by MerchantsCode
2013-11-23 16:44:37,666 [16] DEBUG Servicemms_refund - 获取动态列表
2013-11-23 16:44:37,667 [16] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material,C.UnitPrice as SrcUnitPrice,C.Num as SrcNum from mms_refundDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_sendDetail C on C.BillNo =  A.SrcBillNo and C.RowId = A.SrcRowId where A.BillNo='201307050002' order by A.MaterialCode
2013-11-23 16:44:40,917 [16] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 16:44:40,918 [16] DEBUG Mms - select MaterialTypeName as text,MaterialType as id,ParentCode as pid from mms_materialType order by MaterialType
2013-11-23 16:44:40,995 [25] DEBUG Servicemms_material - 获取动态列表
2013-11-23 16:44:40,996 [25] DEBUG Mms - select top 10 'send' as SrcBillType,
    A.BillNo as SrcBillNo,
    A.RowId as SrcRowId,
    A.Unit,
    A.UnitPrice as SrcUnitPrice,
    A.Num as SrcNum,
    C.MaterialCode,
    C.MaterialName,
    C.MaterialType,
    C.Model,
    C.Material,
    C.LimitLevel,
    C.ManageLevel from mms_sendDetail A
    left join mms_send B on B.BillNo = A.BillNo
    left join mms_material C on C.MaterialCode = A.MaterialCode where B.WarehouseCode='201306030002' and B.PickUnit='FB00508' order by B.SendDate desc,C.MaterialCode
2013-11-23 16:44:41,055 [25] DEBUG Mms - select count(*) from ( select 'send' as SrcBillType,
    A.BillNo as SrcBillNo,
    A.RowId as SrcRowId,
    A.Unit,
    A.UnitPrice as SrcUnitPrice,
    A.Num as SrcNum,
    C.MaterialCode,
    C.MaterialName,
    C.MaterialType,
    C.Model,
    C.Material,
    C.LimitLevel,
    C.ManageLevel from mms_sendDetail A
    left join mms_send B on B.BillNo = A.BillNo
    left join mms_material C on C.MaterialCode = A.MaterialCode where B.WarehouseCode='201306030002' and B.PickUnit='FB00508' ) tb_temp
2013-11-23 16:44:46,993 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/return/Index','/Mms/return')
2013-11-23 16:44:46,998 [23] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:44:46,998 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:44:46,999 [23] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:44:46,999 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:44:47,000 [23] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:44:47,000 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 16:44:49,785 [11] DEBUG Servicemms_return - 获取动态列表
2013-11-23 16:44:49,786 [11] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName from mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:44:49,848 [11] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName from mms_return A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:44:51,728 [18] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/lossreport/Index','/Mms/lossreport')
2013-11-23 16:44:51,739 [18] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:44:51,740 [18] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:44:54,402 [23] DEBUG Servicemms_lossReport - 获取动态列表
2013-11-23 16:44:54,403 [23] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_LossReport A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:44:54,466 [23] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_LossReport A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:45:00,576 [11] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/transfer/Index','/Mms/transfer')
2013-11-23 16:45:00,585 [11] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:45:00,585 [11] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:45:00,586 [11] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:45:00,586 [11] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:45:03,456 [25] DEBUG Servicemms_transfer - 获取动态列表
2013-11-23 16:45:03,457 [25] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as ReceiveUnitName from mms_transfer A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.ReceiveUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:45:03,505 [25] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as ReceiveUnitName from mms_transfer A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.ReceiveUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:45:05,193 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/transfer/edit')
2013-11-23 16:45:05,206 [20] DEBUG Servicemms_transfer - 获取实体对象
2013-11-23 16:45:05,207 [20] DEBUG Mms - select mms_transfer.* from mms_transfer where BillNo='201306060003'
2013-11-23 16:45:05,213 [20] DEBUG Servicemms_transfer - 获取上一条下一条数据
2013-11-23 16:45:05,215 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:05,215 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:05,218 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:05,219 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo<'201306060003' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:05,222 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:05,222 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo>'201306060003' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:05,225 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:05,225 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:05,464 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:45:05,464 [20] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:45:05,465 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:45:05,465 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 16:45:05,466 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:45:05,466 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 16:45:05,467 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:45:05,467 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='Pricing'
2013-11-23 16:45:05,468 [20] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:45:05,468 [20] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:45:05,469 [20] DEBUG Servicesys_code - 获取字段
2013-11-23 16:45:05,469 [20] DEBUG Sys - select top 1 Code from sys_code where CodeType='Pricing' and IsEnable='1' and IsDefault='1'
2013-11-23 16:45:08,815 [7] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:45:08,816 [7] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00511%' order by MerchantsCode
2013-11-23 16:45:10,431 [20] DEBUG Servicemms_transferDetail - 获取动态列表
2013-11-23 16:45:10,433 [20] DEBUG Mms - select A.*, C.MaterialName,C.Model,C.Material,D.Num as StockNum,D.UnitPrice as StockUnitPrice,T.RemainNum,T.SrcUnitPrice from mms_transferDetail A
        left join mms_transfer B on B.BillNo = A.BillNo
        left join mms_material C on C.MaterialCode = A.MaterialCode
        left join mms_warehouseStock D on D.WarehouseCode = B.WarehouseCode and D.MaterialCode = A.MaterialCode
        left join ( 
    select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
 ) T on T.SrcBillType=A.SrcBillType and T.SrcBillNo=A.SrcBillNo and T.SrcRowId = A.SrcRowId where A.BillNo='201306060003' order by A.RowId
2013-11-23 16:45:15,668 [20] DEBUG Servicemms_transfer - 获取实体对象
2013-11-23 16:45:15,668 [20] DEBUG Mms - select mms_transfer.* from mms_transfer where BillNo='201306060001'
2013-11-23 16:45:15,669 [20] DEBUG Servicemms_transfer - 获取上一条下一条数据
2013-11-23 16:45:15,669 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:15,670 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:15,670 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:15,671 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo<'201306060001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:15,672 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:15,673 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo>'201306060001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:15,674 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:15,675 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:15,965 [7] DEBUG Servicemms_transferDetail - 获取动态列表
2013-11-23 16:45:15,966 [7] DEBUG Mms - select A.*, C.MaterialName,C.Model,C.Material,D.Num as StockNum,D.UnitPrice as StockUnitPrice,T.RemainNum,T.SrcUnitPrice from mms_transferDetail A
        left join mms_transfer B on B.BillNo = A.BillNo
        left join mms_material C on C.MaterialCode = A.MaterialCode
        left join mms_warehouseStock D on D.WarehouseCode = B.WarehouseCode and D.MaterialCode = A.MaterialCode
        left join ( 
    select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
 ) T on T.SrcBillType=A.SrcBillType and T.SrcBillNo=A.SrcBillNo and T.SrcRowId = A.SrcRowId where A.BillNo='201306060001' order by A.RowId
2013-11-23 16:45:19,645 [20] DEBUG Servicemms_transfer - 获取实体对象
2013-11-23 16:45:19,645 [20] DEBUG Mms - select mms_transfer.* from mms_transfer where BillNo='201306060003'
2013-11-23 16:45:19,646 [20] DEBUG Servicemms_transfer - 获取上一条下一条数据
2013-11-23 16:45:19,646 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:19,647 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:19,647 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:19,647 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo<'201306060003' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:19,648 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:19,648 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo>'201306060003' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:19,648 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:19,649 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:19,892 [23] DEBUG Servicemms_transferDetail - 获取动态列表
2013-11-23 16:45:19,893 [23] DEBUG Mms - select A.*, C.MaterialName,C.Model,C.Material,D.Num as StockNum,D.UnitPrice as StockUnitPrice,T.RemainNum,T.SrcUnitPrice from mms_transferDetail A
        left join mms_transfer B on B.BillNo = A.BillNo
        left join mms_material C on C.MaterialCode = A.MaterialCode
        left join mms_warehouseStock D on D.WarehouseCode = B.WarehouseCode and D.MaterialCode = A.MaterialCode
        left join ( 
    select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
 ) T on T.SrcBillType=A.SrcBillType and T.SrcBillNo=A.SrcBillNo and T.SrcRowId = A.SrcRowId where A.BillNo='201306060003' order by A.RowId
2013-11-23 16:45:25,914 [20] DEBUG Servicemms_transfer - 编辑记录
2013-11-23 16:45:25,915 [20] DEBUG Mms - select mms_transfer.* from mms_transfer where BillNo='201306060003'
2013-11-23 16:45:25,918 [20] DEBUG Mms - update mms_transfer set [TotalMoney] = '75', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:45:25' where [BillNo] = '201306060003'
2013-11-23 16:45:25,923 [20] DEBUG Mms - select mms_transferDetail.* from mms_transferDetail where BillNo='201306060003' and RowId='4'
2013-11-23 16:45:25,927 [20] DEBUG Mms - update mms_transferDetail set [MaterialCode] = '0101010103', [Unit] = '吨', [UnitPrice] = '25', [Num] = '3.00', [Money] = '75.00', [Remark] = '', [SrcBillType] = '', [SrcBillNo] = '', [SrcRowId] = '', [UpdatePerson] = '管理员', [UpdateDate] = '2013-11-23 16:45:25' where [BillNo] = '201306060003' and [RowId] = '4'
2013-11-23 16:45:27,207 [16] DEBUG Servicemms_transfer - 获取实体对象
2013-11-23 16:45:27,208 [16] DEBUG Mms - select mms_transfer.* from mms_transfer where BillNo='201307220001'
2013-11-23 16:45:27,209 [16] DEBUG Servicemms_transfer - 获取上一条下一条数据
2013-11-23 16:45:27,209 [16] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:27,209 [16] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:27,210 [16] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:27,210 [16] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo<'201307220001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:27,212 [16] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:27,212 [16] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo>'201307220001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:27,214 [16] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:27,214 [16] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:27,515 [15] DEBUG Servicemms_transferDetail - 获取动态列表
2013-11-23 16:45:27,516 [15] DEBUG Mms - select A.*, C.MaterialName,C.Model,C.Material,D.Num as StockNum,D.UnitPrice as StockUnitPrice,T.RemainNum,T.SrcUnitPrice from mms_transferDetail A
        left join mms_transfer B on B.BillNo = A.BillNo
        left join mms_material C on C.MaterialCode = A.MaterialCode
        left join mms_warehouseStock D on D.WarehouseCode = B.WarehouseCode and D.MaterialCode = A.MaterialCode
        left join ( 
    select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
 ) T on T.SrcBillType=A.SrcBillType and T.SrcBillNo=A.SrcBillNo and T.SrcRowId = A.SrcRowId where A.BillNo='201307220001' order by A.RowId
2013-11-23 16:45:27,808 [26] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:45:27,808 [26] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00305%' order by MerchantsCode
2013-11-23 16:45:28,037 [20] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:45:28,037 [20] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00305%' order by MerchantsCode
2013-11-23 16:45:29,557 [20] DEBUG Servicemms_transfer - 获取实体对象
2013-11-23 16:45:29,558 [20] DEBUG Mms - select mms_transfer.* from mms_transfer where BillNo='201306060003'
2013-11-23 16:45:29,559 [20] DEBUG Servicemms_transfer - 获取上一条下一条数据
2013-11-23 16:45:29,559 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:29,559 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:29,560 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:29,560 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo<'201306060003' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:29,560 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:29,560 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where BillNo>'201306060003' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:29,561 [20] DEBUG Servicemms_transfer - 获取字段
2013-11-23 16:45:29,561 [20] DEBUG Mms - select top 1 BillNo from mms_transfer where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:29,794 [11] DEBUG Servicemms_transferDetail - 获取动态列表
2013-11-23 16:45:29,795 [11] DEBUG Mms - select A.*, C.MaterialName,C.Model,C.Material,D.Num as StockNum,D.UnitPrice as StockUnitPrice,T.RemainNum,T.SrcUnitPrice from mms_transferDetail A
        left join mms_transfer B on B.BillNo = A.BillNo
        left join mms_material C on C.MaterialCode = A.MaterialCode
        left join mms_warehouseStock D on D.WarehouseCode = B.WarehouseCode and D.MaterialCode = A.MaterialCode
        left join ( 
    select 'receive' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.ReceiveDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_receiveDetail as A
    left join mms_receive as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'refund' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.RefundDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_refundDetail as A
    left join mms_refund as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode

    union

    select 'adjust' as SrcBillType
    ,A.BillNo as SrcBillNo
    ,A.RowId as SrcRowId
    ,B.EffectDate as SrcDate
    ,B.WarehouseCode
    ,B.ProjectCode
    ,A.RemainNum
    ,A.UnitPrice as SrcUnitPrice
    ,C.*
    from mms_stockAdjustDetail as A
    left join mms_stockAdjust as B ON A.BillNo=B.BillNo
    left join mms_material as C ON A.MaterialCode=C.MaterialCode
 ) T on T.SrcBillType=A.SrcBillType and T.SrcBillNo=A.SrcBillNo and T.SrcRowId = A.SrcRowId where A.BillNo='201306060003' order by A.RowId
2013-11-23 16:45:33,732 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentin/Index','/Mms/rentin')
2013-11-23 16:45:33,742 [15] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:45:33,742 [15] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:45:36,391 [15] DEBUG Servicemms_rentIn - 获取动态列表
2013-11-23 16:45:36,392 [15] DEBUG Mms - select top 20 * from mms_rentIn order by BillNo
2013-11-23 16:45:36,443 [15] DEBUG Mms - select count(*) from ( select * from mms_rentIn ) tb_temp
2013-11-23 16:45:44,990 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentin/edit')
2013-11-23 16:45:45,003 [20] DEBUG Servicemms_rentIn - 获取实体对象
2013-11-23 16:45:45,004 [20] DEBUG Mms - select mms_rentIn.* from mms_rentIn where BillNo='201307230002'
2013-11-23 16:45:45,010 [20] DEBUG Servicemms_rentIn - 获取上一条下一条数据
2013-11-23 16:45:45,012 [20] DEBUG Servicemms_rentIn - 获取字段
2013-11-23 16:45:45,012 [20] DEBUG Mms - select top 1 BillNo from mms_rentIn where ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:45,015 [20] DEBUG Servicemms_rentIn - 获取字段
2013-11-23 16:45:45,016 [20] DEBUG Mms - select top 1 BillNo from mms_rentIn where BillNo<'201307230002' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:45,019 [20] DEBUG Servicemms_rentIn - 获取字段
2013-11-23 16:45:45,019 [20] DEBUG Mms - select top 1 BillNo from mms_rentIn where BillNo>'201307230002' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:45:45,022 [20] DEBUG Servicemms_rentIn - 获取字段
2013-11-23 16:45:45,022 [20] DEBUG Mms - select top 1 BillNo from mms_rentIn where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:45:45,267 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:45:45,268 [20] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:45:45,268 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:45:45,269 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='MaterialUse'
2013-11-23 16:45:45,269 [20] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:45:45,270 [20] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='BillingUnit'
2013-11-23 16:45:45,270 [20] DEBUG Servicesys_code - 获取字段
2013-11-23 16:45:45,271 [20] DEBUG Sys - select top 1 Code from sys_code where CodeType='MaterialUse' and IsEnable='1' and IsDefault='1'
2013-11-23 16:45:48,339 [15] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:45:48,340 [15] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 16:45:49,814 [16] DEBUG Servicemms_rentIn - 获取动态列表
2013-11-23 16:45:49,815 [16] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material,C.MerchantsName as UseUnitName from mms_rentInDetail A
        left join mms_material B on B.MaterialCode      = A.MaterialCode
        left join mms_merchants C on C.MerchantsCode    = A.UseUnit where BillNo='201307230002' order by A.MaterialCode
2013-11-23 16:46:03,054 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentoff/Index','/Mms/rentoff')
2013-11-23 16:46:03,066 [7] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:46:03,066 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:46:06,312 [23] DEBUG Servicemms_rentOff - 获取动态列表
2013-11-23 16:46:06,313 [23] DEBUG Mms - select top 20 * from mms_rentOff order by BillNo
2013-11-23 16:46:06,360 [23] DEBUG Mms - select count(*) from ( select * from mms_rentOff ) tb_temp
2013-11-23 16:46:09,344 [25] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentoff/edit')
2013-11-23 16:46:09,357 [25] DEBUG Servicemms_rentOff - 获取实体对象
2013-11-23 16:46:09,358 [25] DEBUG Mms - select mms_rentOff.* from mms_rentOff where BillNo='201306140001'
2013-11-23 16:46:09,365 [25] DEBUG Servicemms_rentOff - 获取上一条下一条数据
2013-11-23 16:46:09,366 [25] DEBUG Servicemms_rentOff - 获取字段
2013-11-23 16:46:09,367 [25] DEBUG Mms - select top 1 BillNo from mms_rentOff where ProjectCode='201306030001' order by BillNo
2013-11-23 16:46:09,369 [25] DEBUG Servicemms_rentOff - 获取字段
2013-11-23 16:46:09,370 [25] DEBUG Mms - select top 1 BillNo from mms_rentOff where BillNo<'201306140001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:46:09,373 [25] DEBUG Servicemms_rentOff - 获取字段
2013-11-23 16:46:09,374 [25] DEBUG Mms - select top 1 BillNo from mms_rentOff where BillNo>'201306140001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:46:09,377 [25] DEBUG Servicemms_rentOff - 获取字段
2013-11-23 16:46:09,378 [25] DEBUG Mms - select top 1 BillNo from mms_rentOff where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:46:09,634 [25] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:46:09,635 [25] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:46:09,636 [25] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:46:09,636 [25] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:46:14,388 [7] DEBUG Servicemms_rentOff - 获取动态列表
2013-11-23 16:46:14,388 [7] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_rentOffDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201306140001' order by A.MaterialCode
2013-11-23 16:46:17,480 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2013-11-23 16:46:17,491 [7] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:46:17,491 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:46:19,929 [20] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:46:19,994 [20] ERROR Servicemms_rentOut - 获取动态列表失败
System.Exception: 未在数据库SqlServer中注册sql！
   在 Zephyr.Core.Condition.ToSql(DbType dbType, Boolean withJoin) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\Condition.cs:行号 42
   在 Zephyr.Core.Condition.ToSql(IDbContext db, Boolean withJoin) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\Condition.cs:行号 35
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass73.<GetSqlWhere>b__72(Condition c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 148
   在 System.Collections.Generic.List`1.ForEach(Action`1 action)
   在 Zephyr.Core.ServiceBase`1.GetSqlWhere(List`1 condtions) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 148
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 32
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:46:23,042 [20] ERROR /api/mms/rentout - System.Exception: 未在数据库SqlServer中注册sql！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.RentoutApiController.Get(RequestWrapper query) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\RentoutController.cs:行号 115
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:46:27,773 [28] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2013-11-23 16:46:27,776 [28] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:46:27,777 [28] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:46:29,621 [23] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:46:29,677 [23] ERROR Servicemms_rentOut - 获取动态列表失败
System.Exception: 未在数据库SqlServer中注册sql！
   在 Zephyr.Core.Condition.ToSql(DbType dbType, Boolean withJoin) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\Condition.cs:行号 42
   在 Zephyr.Core.Condition.ToSql(IDbContext db, Boolean withJoin) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\Condition.cs:行号 35
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass73.<GetSqlWhere>b__72(Condition c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 148
   在 System.Collections.Generic.List`1.ForEach(Action`1 action)
   在 Zephyr.Core.ServiceBase`1.GetSqlWhere(List`1 condtions) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 148
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 32
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:46:33,490 [23] ERROR /api/mms/rentout - System.Exception: 未在数据库SqlServer中注册sql！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.RentoutApiController.Get(RequestWrapper query) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\RentoutController.cs:行号 115
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:49:24,292 [29] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:51:15,650 [29] ERROR Servicemms_rentOut - 获取动态列表失败
System.Exception: 未在数据库SqlServer中注册sql！
   在 Zephyr.Core.Condition.ToSql(DbType dbType, Boolean withJoin) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\Condition.cs:行号 42
   在 Zephyr.Core.Condition.ToSql(IDbContext db, Boolean withJoin) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Param\Condition.cs:行号 35
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass73.<GetSqlWhere>b__72(Condition c) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 148
   在 System.Collections.Generic.List`1.ForEach(Action`1 action)
   在 Zephyr.Core.ServiceBase`1.GetSqlWhere(List`1 condtions) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 148
   在 Zephyr.Core.ServiceBase`1.BuilderParse(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseUtils.cs:行号 32
   在 Zephyr.Core.ServiceBase`1.<>c__DisplayClass41.<GetDynamicList>b__40() 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 44
2013-11-23 16:51:15,677 [29] ERROR /api/mms/rentout - System.Exception: 未在数据库SqlServer中注册sql！
   在 Zephyr.Core.LogHelper.Logger(ILog log, String function, ErrorHandle errorHandleType, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Logs\LogHelper.cs:行号 54
   在 Zephyr.Core.ServiceBase`1.Logger(String function, Action tryHandle, Action`1 catchHandle, Action finallyHandle) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseLog.cs:行号 23
   在 Zephyr.Core.ServiceBase`1.GetDynamicList(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 28
   在 Zephyr.Core.ServiceBase`1.GetDynamicListWithPaging(ParamQuery param) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Base\ServiceBaseQuery.cs:行号 43
   在 Zephyr.Web.Mms.Controllers.RentoutApiController.Get(RequestWrapper query) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\RentoutController.cs:行号 115
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:52:05,948 [22] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:52:05,979 [22] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:52:05,986 [22] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:52:05,987 [22] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:52:06,372 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:52:12,321 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:52:12,530 [32] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:52:13,727 [32] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:52:18,376 [32] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:52:23,447 [13] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:52:23,481 [13] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:52:23,487 [13] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:52:23,488 [13] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:52:24,144 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:52:33,303 [19] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2013-11-23 16:52:33,321 [19] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:52:33,342 [19] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:52:37,033 [32] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:52:37,034 [32] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:52:37,115 [32] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:52:44,185 [12] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:52:44,185 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where IsTotal=1 order by A.BillNo
2013-11-23 16:52:44,195 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where IsTotal=1 ) tb_temp
2013-11-23 16:52:47,062 [12] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:52:47,062 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:52:47,063 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:52:52,011 [12] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:52:52,012 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where IsTotal=1 order by A.BillNo
2013-11-23 16:52:52,013 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where IsTotal=1 ) tb_temp
2013-11-23 16:52:53,029 [24] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:52:53,030 [24] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:52:53,031 [24] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:53:10,309 [12] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:31,467 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:53:31,470 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:53:35,707 [34] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:35,707 [34] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where IsTotal=1 order by A.BillNo
2013-11-23 16:53:35,708 [34] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where IsTotal=1 ) tb_temp
2013-11-23 16:53:36,633 [12] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:36,633 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:53:36,634 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:53:39,118 [35] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:39,118 [35] DEBUG Mms - select top 10 BillNo from mms_rentOut where BillNo like '2%' or [dbo].[fun_getPY](BillNo) like N'2%'
2013-11-23 16:53:41,115 [35] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:41,115 [35] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where BillNo='201306140001'     and isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:53:41,122 [35] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where BillNo='201306140001'     and isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:53:42,098 [12] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:42,099 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:53:42,100 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:53:43,977 [17] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/edit')
2013-11-23 16:53:43,993 [17] DEBUG Servicemms_rentOut - 获取实体对象
2013-11-23 16:53:43,996 [17] DEBUG Mms - select mms_rentOut.* from mms_rentOut where BillNo='201306140001'
2013-11-23 16:53:44,013 [17] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2013-11-23 16:53:44,035 [17] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:44,038 [17] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo
2013-11-23 16:53:44,042 [17] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:44,043 [17] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo<'201306140001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:53:44,046 [17] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:44,046 [17] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo>'201306140001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:53:44,049 [17] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:44,049 [17] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:53:44,309 [17] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:53:44,310 [17] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:53:47,021 [34] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:53:47,022 [34] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00302%' order by MerchantsCode
2013-11-23 16:53:48,279 [36] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:48,279 [36] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo from mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId where A.BillNo='201306140001' order by A.MaterialCode
2013-11-23 16:53:50,552 [35] DEBUG Servicemms_rentOut - 获取实体对象
2013-11-23 16:53:50,553 [35] DEBUG Mms - select mms_rentOut.* from mms_rentOut where BillNo='201306140003'
2013-11-23 16:53:50,553 [35] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2013-11-23 16:53:50,554 [35] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:50,554 [35] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo
2013-11-23 16:53:50,554 [35] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:50,555 [35] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo<'201306140003' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:53:50,557 [35] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:50,557 [35] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo>'201306140003' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:53:50,559 [35] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:50,559 [35] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:53:51,024 [36] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:53:51,024 [36] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 16:53:51,491 [31] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:51,492 [31] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo from mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId where A.BillNo='201306140003' order by A.MaterialCode
2013-11-23 16:53:53,284 [34] DEBUG Servicemms_rentOut - 获取实体对象
2013-11-23 16:53:53,285 [34] DEBUG Mms - select mms_rentOut.* from mms_rentOut where BillNo='201306140001'
2013-11-23 16:53:53,286 [34] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2013-11-23 16:53:53,286 [34] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:53,286 [34] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo
2013-11-23 16:53:53,287 [34] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:53,287 [34] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo<'201306140001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:53:53,287 [34] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:53,288 [34] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo>'201306140001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:53:53,288 [34] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:53:53,288 [34] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:53:53,527 [17] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:53:53,527 [17] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo from mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId where A.BillNo='201306140001' order by A.MaterialCode
2013-11-23 16:53:56,152 [32] DEBUG Mms - update mms_rentOut set [ApproveState] = 'reject', [ApproveRemark] = '1', [ApprovePerson] = '管理员', [ApproveDate] = '2013-11-23 16:53:56' where [BillNo] = '201306140001'
2013-11-23 16:53:56,167 [32] DEBUG Mms - select * from mms_rentOut where BillNo='201306140001'
2013-11-23 16:53:56,170 [32] DEBUG Mms - select * from mms_rentOutDetail where BillNo='201306140001'
2013-11-23 16:53:56,176 [32] DEBUG Mms - 
select A.*,B.RentInDate 
from mms_rentInDetail A
left join mms_rentIn  B on B.BillNo = A.BillNo
where A.BillNo = '201306080001'
and A.RowId = '2' 
2013-11-23 16:53:56,181 [32] DEBUG Mms - 
select A.*,B.BeginDate,B.EndDate
from mms_rentOffDetail A
left join mms_rentOff  B on B.BillNo = A.BillNo
where A.SrcBillNo = '201306080001'
and A.SrcRowId = '2'
2013-11-23 16:54:06,509 [32] ERROR /api/mms/rentout/audit/201306140001 - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object )
   在 System.Dynamic.UpdateDelegates.UpdateAndExecute1[T0,TRet](CallSite site, T0 arg0)
   在 Zephyr.Web.Mms.Models.mms_rentOutService.CalcRentOutMoney(IDbContext db, String BillNo) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Models\mms_rentOut.cs:行号 71
   在 Zephyr.Web.Mms.MmsService.Audit(String tableName, String billNo, String status, String comment) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Common\MmsService.cs:行号 52
   在 Zephyr.Web.Mms.Controllers.MmsBaseApi`4.Audit(String id, JObject data) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Common\MmsBaseApi.cs:行号 131
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:55:01,653 [7] DEBUG Mms - update mms_rentOut set [ApproveState] = 'reject', [ApproveRemark] = '1', [ApprovePerson] = '管理员', [ApproveDate] = '2013-11-23 16:55:01' where [BillNo] = '201306140001'
2013-11-23 16:55:01,654 [7] DEBUG Mms - select * from mms_rentOut where BillNo='201306140001'
2013-11-23 16:55:01,655 [7] DEBUG Mms - select * from mms_rentOutDetail where BillNo='201306140001'
2013-11-23 16:55:01,656 [7] DEBUG Mms - 
select A.*,B.RentInDate 
from mms_rentInDetail A
left join mms_rentIn  B on B.BillNo = A.BillNo
where A.BillNo = '201306080001'
and A.RowId = '2' 
2013-11-23 16:55:01,656 [7] DEBUG Mms - 
select A.*,B.BeginDate,B.EndDate
from mms_rentOffDetail A
left join mms_rentOff  B on B.BillNo = A.BillNo
where A.SrcBillNo = '201306080001'
and A.SrcRowId = '2'
2013-11-23 16:55:18,857 [7] ERROR /api/mms/rentout/audit/201306140001 - Microsoft.CSharp.RuntimeBinder.RuntimeBinderException: 无法对 null 引用执行运行时绑定
   在 CallSite.Target(Closure , CallSite , Object )
   在 Zephyr.Web.Mms.Models.mms_rentOutService.CalcRentOutMoney(IDbContext db, String BillNo) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Models\mms_rentOut.cs:行号 71
   在 Zephyr.Web.Mms.MmsService.Audit(String tableName, String billNo, String status, String comment) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Common\MmsService.cs:行号 52
   在 Zephyr.Web.Mms.Controllers.MmsBaseApi`4.Audit(String id, JObject data) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Common\MmsBaseApi.cs:行号 131
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:56:23,190 [13] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:56:23,221 [13] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:56:23,229 [13] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:56:23,229 [13] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:56:23,619 [29] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:56:23,640 [29] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:56:23,870 [29] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:56:25,023 [29] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:56:25,023 [29] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:56:26,674 [19] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:56:30,714 [16] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2013-11-23 16:56:30,730 [16] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:56:30,732 [16] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:56:33,474 [33] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:56:33,476 [33] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:56:33,551 [33] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:56:36,512 [17] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/edit')
2013-11-23 16:56:36,520 [17] DEBUG Servicemms_rentOut - 获取实体对象
2013-11-23 16:56:36,522 [17] DEBUG Mms - select mms_rentOut.* from mms_rentOut where BillNo='201306140003'
2013-11-23 16:56:36,527 [17] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2013-11-23 16:56:36,547 [17] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:56:36,548 [17] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo
2013-11-23 16:56:36,550 [17] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:56:36,550 [17] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo<'201306140003' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:56:36,551 [17] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:56:36,552 [17] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo>'201306140003' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:56:36,553 [17] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:56:36,553 [17] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:56:36,804 [17] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:56:36,804 [17] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:56:39,501 [30] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:56:39,502 [30] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00303%' order by MerchantsCode
2013-11-23 16:56:40,806 [10] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:56:40,806 [10] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo from mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId where A.BillNo='201306140003' order by A.MaterialCode
2013-11-23 16:56:43,462 [19] DEBUG Servicemms_rentOut - 获取实体对象
2013-11-23 16:56:43,463 [19] DEBUG Mms - select mms_rentOut.* from mms_rentOut where BillNo='201306140001'
2013-11-23 16:56:43,464 [19] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2013-11-23 16:56:43,464 [19] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:56:43,464 [19] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo
2013-11-23 16:56:43,464 [19] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:56:43,465 [19] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo<'201306140001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:56:43,465 [19] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:56:43,465 [19] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo>'201306140001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:56:43,466 [19] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:56:43,466 [19] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:56:43,919 [16] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:56:43,919 [16] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00302%' order by MerchantsCode
2013-11-23 16:56:44,441 [30] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:56:44,442 [30] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo from mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId where A.BillNo='201306140001' order by A.MaterialCode
2013-11-23 16:56:48,901 [16] DEBUG Mms - update mms_rentOut set [ApproveState] = 'reject', [ApproveRemark] = '1', [ApprovePerson] = '管理员', [ApproveDate] = '2013-11-23 16:56:48' where [BillNo] = '201306140001'
2013-11-23 16:56:48,911 [16] DEBUG Mms - select * from mms_rentOut where BillNo='201306140001'
2013-11-23 16:56:48,912 [16] DEBUG Mms - select * from mms_rentOutDetail where BillNo='201306140001'
2013-11-23 16:56:48,916 [16] DEBUG Mms - 
select A.*,B.RentInDate 
from mms_rentInDetail A
left join mms_rentIn  B on B.BillNo = A.BillNo
where A.BillNo = '201306080001'
and A.RowId = '2' 
2013-11-23 16:56:48,917 [16] DEBUG Mms - 
select A.*,B.BeginDate,B.EndDate
from mms_rentOffDetail A
left join mms_rentOff  B on B.BillNo = A.BillNo
where A.SrcBillNo = '201306080001'
and A.SrcRowId = '2'
2013-11-23 16:57:03,176 [16] ERROR /api/mms/rentout/audit/201306140001 - System.Exception: 找不到来源单数据！
   在 Zephyr.Web.Mms.Models.mms_rentOutService.CalcRentOutMoney(IDbContext db, String BillNo) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Models\mms_rentOut.cs:行号 72
   在 Zephyr.Web.Mms.MmsService.Audit(String tableName, String billNo, String status, String comment) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Common\MmsService.cs:行号 52
   在 Zephyr.Web.Mms.Controllers.MmsBaseApi`4.Audit(String id, JObject data) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Common\MmsBaseApi.cs:行号 131
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:58:01,070 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:58:01,102 [14] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:58:01,110 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:58:01,110 [14] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 16:58:01,523 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:58:01,547 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 16:58:01,768 [20] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 16:58:02,922 [20] DEBUG Servicesys_parameter - 获取字段
2013-11-23 16:58:02,922 [20] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 16:58:04,721 [20] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 16:58:11,265 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2013-11-23 16:58:11,279 [23] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:58:11,281 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:58:13,921 [20] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:58:13,922 [20] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 16:58:13,998 [20] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 16:58:15,479 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/edit')
2013-11-23 16:58:15,488 [23] DEBUG Servicemms_rentOut - 获取实体对象
2013-11-23 16:58:15,490 [23] DEBUG Mms - select mms_rentOut.* from mms_rentOut where BillNo='201306140001'
2013-11-23 16:58:15,496 [23] DEBUG Servicemms_rentOut - 获取上一条下一条数据
2013-11-23 16:58:15,515 [23] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:58:15,516 [23] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo
2013-11-23 16:58:15,518 [23] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:58:15,518 [23] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo<'201306140001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:58:15,520 [23] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:58:15,521 [23] DEBUG Mms - select top 1 BillNo from mms_rentOut where BillNo>'201306140001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:58:15,522 [23] DEBUG Servicemms_rentOut - 获取字段
2013-11-23 16:58:15,523 [23] DEBUG Mms - select top 1 BillNo from mms_rentOut where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:58:15,780 [23] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:58:15,781 [23] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:58:18,584 [20] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:58:18,585 [20] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'CG00302%' order by MerchantsCode
2013-11-23 16:58:19,907 [5] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 16:58:19,908 [5] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material 
        ,C.RemainNum,C.RowId as SrcRowId,C.BillNo as SrcBillNo from mms_rentOutDetail A
        left join mms_material B on B.MaterialCode = A.MaterialCode
        left join mms_rentInDetail C ON C.BillNo=A.SrcBillNo AND C.RowId=A.SrcRowId where A.BillNo='201306140001' order by A.MaterialCode
2013-11-23 16:58:23,000 [34] DEBUG Mms - update mms_rentOut set [ApproveState] = 'reject', [ApproveRemark] = '1', [ApprovePerson] = '管理员', [ApproveDate] = '2013-11-23 16:58:22' where [BillNo] = '201306140001'
2013-11-23 16:58:23,011 [34] DEBUG Mms - select * from mms_rentOut where BillNo='201306140001'
2013-11-23 16:58:23,012 [34] DEBUG Mms - select * from mms_rentOutDetail where BillNo='201306140001'
2013-11-23 16:58:23,017 [34] DEBUG Mms - 
select A.*,B.RentInDate 
from mms_rentInDetail A
left join mms_rentIn  B on B.BillNo = A.BillNo
where A.BillNo = '201306080001'
and A.RowId = '2' 
2013-11-23 16:58:23,017 [34] DEBUG Mms - 
select A.*,B.BeginDate,B.EndDate
from mms_rentOffDetail A
left join mms_rentOff  B on B.BillNo = A.BillNo
where A.SrcBillNo = '201306080001'
and A.SrcRowId = '2'
2013-11-23 16:58:26,136 [34] ERROR /api/mms/rentout/audit/201306140001 - System.Exception: 找不到来源单数据，无法处理请求！
   在 Zephyr.Web.Mms.Models.mms_rentOutService.CalcRentOutMoney(IDbContext db, String BillNo) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Models\mms_rentOut.cs:行号 72
   在 Zephyr.Web.Mms.MmsService.Audit(String tableName, String billNo, String status, String comment) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Common\MmsService.cs:行号 52
   在 Zephyr.Web.Mms.Controllers.MmsBaseApi`4.Audit(String id, JObject data) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Common\MmsBaseApi.cs:行号 131
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClassf.<GetExecutor>b__9(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 16:58:29,967 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/deal/Index','/Mms/deal')
2013-11-23 16:58:29,977 [32] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:58:29,977 [32] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalType'
2013-11-23 16:58:29,978 [32] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:58:29,978 [32] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalWay'
2013-11-23 16:58:32,603 [5] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:32,606 [5] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:32,649 [5] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:39,620 [5] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:39,620 [5] DEBUG Mms - select top 10 BillNo from mms_deal where BillNo like '2%' or [dbo].[fun_getPY](BillNo) like N'2%'
2013-11-23 16:58:41,682 [9] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:41,683 [9] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where BillNo='201306060001'      and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:41,687 [9] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where BillNo='201306060001'      and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:42,589 [5] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:42,590 [5] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:42,590 [5] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:44,814 [17] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:44,815 [17] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where datediff(day,'2013-11-16 ',ApplyDate) >=0 and datediff(day,' 2013-11-23',ApplyDate) <=0 and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:44,821 [17] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where datediff(day,'2013-11-16 ',ApplyDate) >=0 and datediff(day,' 2013-11-23',ApplyDate) <=0 and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:45,578 [5] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:45,578 [5] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:45,579 [5] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:48,741 [29] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:48,742 [29] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where DealKind='037'  and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:48,746 [29] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where DealKind='037'  and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:49,701 [32] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:49,701 [32] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:49,702 [32] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:54,465 [5] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:54,465 [5] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where DealType='032'   and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:54,470 [5] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where DealType='032'   and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:55,391 [34] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 16:58:55,392 [34] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:55,393 [34] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:58:56,956 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2013-11-23 16:58:56,966 [5] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:58:56,967 [5] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:58:59,553 [5] DEBUG Servicemms_repair - 获取动态列表
2013-11-23 16:58:59,554 [5] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 16:58:59,610 [5] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 16:59:01,246 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/edit')
2013-11-23 16:59:01,263 [5] DEBUG Servicemms_repair - 获取实体对象
2013-11-23 16:59:01,264 [5] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201306060001'
2013-11-23 16:59:01,269 [5] DEBUG Servicemms_repair - 获取上一条下一条数据
2013-11-23 16:59:01,270 [5] DEBUG Servicemms_repair - 获取字段
2013-11-23 16:59:01,270 [5] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo
2013-11-23 16:59:01,273 [5] DEBUG Servicemms_repair - 获取字段
2013-11-23 16:59:01,274 [5] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo<'201306060001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:59:01,277 [5] DEBUG Servicemms_repair - 获取字段
2013-11-23 16:59:01,277 [5] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo>'201306060001' and ProjectCode='201306030001' order by BillNo
2013-11-23 16:59:01,281 [5] DEBUG Servicemms_repair - 获取字段
2013-11-23 16:59:01,281 [5] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo desc
2013-11-23 16:59:01,516 [5] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:59:01,517 [5] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 16:59:01,518 [5] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:59:01,518 [5] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 16:59:01,518 [5] DEBUG Servicesys_code - 获取动态列表
2013-11-23 16:59:01,519 [5] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 16:59:01,519 [5] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 16:59:01,520 [5] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 16:59:04,402 [32] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 16:59:04,403 [32] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00502%' order by MerchantsCode
2013-11-23 16:59:20,278 [32] ERROR /api/mms/repair/getdetail/201306060001 - System.Xml.XmlException: 第 6 行，位置 23 上的开始标记“orderby”与结束标记“settings”不匹配。 第 7 行，位置 3。
   在 System.Xml.XmlTextReaderImpl.Throw(Exception e)
   在 System.Xml.XmlTextReaderImpl.Throw(String res, String[] args)
   在 System.Xml.XmlTextReaderImpl.ThrowTagMismatch(NodeData startTag)
   在 System.Xml.XmlTextReaderImpl.ParseEndElement()
   在 System.Xml.XmlTextReaderImpl.ParseElementContent()
   在 System.Xml.XmlTextReaderImpl.Read()
   在 System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace)
   在 System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
   在 System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
   在 System.Xml.XmlDocument.Load(XmlReader reader)
   在 System.Xml.XmlDocument.LoadXml(String xml)
   在 Zephyr.Core.RequestWrapper.SetXml(String str) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapper.cs:行号 61
   在 Zephyr.Web.Mms.Controllers.RepairApiController.GetDetail(String id) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\RepairController.cs:行号 134
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 17:01:19,171 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:01:19,171 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:01:19,172 [31] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 17:01:19,190 [31] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:01:19,191 [31] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 17:01:19,877 [15] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 17:01:24,293 [15] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2013-11-23 17:01:24,296 [15] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:01:24,296 [15] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:01:26,079 [12] DEBUG Servicemms_repair - 获取动态列表
2013-11-23 17:01:26,079 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:01:26,081 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:01:27,596 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/deal/Index','/Mms/deal')
2013-11-23 17:01:27,598 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:01:27,599 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalType'
2013-11-23 17:01:27,599 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:01:27,600 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalWay'
2013-11-23 17:01:29,505 [7] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 17:01:29,505 [7] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:01:29,506 [7] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:01:30,974 [26] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/check/Index','/Mms/check')
2013-11-23 17:01:30,983 [26] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:01:30,984 [26] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:01:33,675 [15] DEBUG Servicemms_check - 获取动态列表
2013-11-23 17:01:33,676 [15] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_check A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode where isnull(A.BookMoney,0)<>isnull(A.OperateMoney,0) and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:01:33,761 [15] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_check A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode where isnull(A.BookMoney,0)<>isnull(A.OperateMoney,0) and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:01:36,686 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2013-11-23 17:01:36,688 [7] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:01:36,689 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:01:38,536 [12] DEBUG Servicemms_repair - 获取动态列表
2013-11-23 17:01:38,536 [12] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:01:38,537 [12] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:01:39,829 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/deal/Index','/Mms/deal')
2013-11-23 17:01:39,832 [7] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:01:39,832 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalType'
2013-11-23 17:01:39,833 [7] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:01:39,833 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='DisposalWay'
2013-11-23 17:01:41,660 [25] DEBUG Servicemms_deal - 获取动态列表
2013-11-23 17:01:41,660 [25] DEBUG Mms - select top 20 A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:01:41,661 [25] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName from mms_deal A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:01:43,150 [25] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentout/Index','/Mms/rentout')
2013-11-23 17:01:43,152 [25] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:01:43,153 [25] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:01:44,770 [11] DEBUG Servicemms_rentOut - 获取动态列表
2013-11-23 17:01:44,770 [11] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 order by A.BillNo
2013-11-23 17:01:44,771 [11] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_rentOut A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.SupplierCode where isnull(IsTotal,0)<>1 ) tb_temp
2013-11-23 17:01:46,197 [27] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentoff/Index','/Mms/rentoff')
2013-11-23 17:01:46,201 [27] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:01:46,201 [27] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:01:49,231 [33] DEBUG Servicemms_rentOff - 获取动态列表
2013-11-23 17:01:49,232 [33] DEBUG Mms - select top 20 * from mms_rentOff order by BillNo
2013-11-23 17:01:49,291 [33] DEBUG Mms - select count(*) from ( select * from mms_rentOff ) tb_temp
2013-11-23 17:01:51,249 [33] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/rentin/Index','/Mms/rentin')
2013-11-23 17:01:51,253 [33] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:01:51,253 [33] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:01:53,778 [33] DEBUG Servicemms_rentIn - 获取动态列表
2013-11-23 17:01:53,779 [33] DEBUG Mms - select top 20 * from mms_rentIn order by BillNo
2013-11-23 17:01:53,831 [33] DEBUG Mms - select count(*) from ( select * from mms_rentIn ) tb_temp
2013-11-23 17:01:55,210 [25] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/check/Index','/Mms/check')
2013-11-23 17:01:55,213 [25] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:01:55,214 [25] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:01:57,131 [11] DEBUG Servicemms_check - 获取动态列表
2013-11-23 17:01:57,132 [11] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_check A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode where isnull(A.BookMoney,0)<>isnull(A.OperateMoney,0) and A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:01:57,133 [11] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName from mms_check A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse         D on D.WarehouseCode       = A.WarehouseCode where isnull(A.BookMoney,0)<>isnull(A.OperateMoney,0) and A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:01:58,666 [33] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/check/edit')
2013-11-23 17:01:58,678 [33] DEBUG Servicemms_check - 获取实体对象
2013-11-23 17:01:58,678 [33] DEBUG Mms - select mms_check.* from mms_check where BillNo='201307020004'
2013-11-23 17:01:58,684 [33] DEBUG Servicemms_check - 获取上一条下一条数据
2013-11-23 17:01:58,685 [33] DEBUG Servicemms_check - 获取字段
2013-11-23 17:01:58,685 [33] DEBUG Mms - select top 1 BillNo from mms_check where ProjectCode='201306030001' order by BillNo
2013-11-23 17:01:58,688 [33] DEBUG Servicemms_check - 获取字段
2013-11-23 17:01:58,688 [33] DEBUG Mms - select top 1 BillNo from mms_check where BillNo<'201307020004' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 17:01:58,691 [33] DEBUG Servicemms_check - 获取字段
2013-11-23 17:01:58,691 [33] DEBUG Mms - select top 1 BillNo from mms_check where BillNo>'201307020004' and ProjectCode='201306030001' order by BillNo
2013-11-23 17:01:58,694 [33] DEBUG Servicemms_check - 获取字段
2013-11-23 17:01:58,694 [33] DEBUG Mms - select top 1 BillNo from mms_check where ProjectCode='201306030001' order by BillNo desc
2013-11-23 17:01:58,951 [33] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:01:58,952 [33] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 17:01:58,952 [33] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:01:58,953 [33] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:02:03,019 [11] DEBUG Servicemms_check - 获取动态列表
2013-11-23 17:02:03,019 [11] DEBUG Mms - select A.*, B.MaterialName,B.Model,B.Material from mms_checkDetail A left join mms_material B on B.MaterialCode = A.MaterialCode where BillNo='201307020004' order by A.MaterialCode
2013-11-23 17:02:04,946 [33] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2013-11-23 17:02:04,948 [33] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:02:04,949 [33] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:02:06,698 [27] DEBUG Servicemms_repair - 获取动态列表
2013-11-23 17:02:06,698 [27] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:02:06,699 [27] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:02:08,204 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/edit')
2013-11-23 17:02:08,206 [23] DEBUG Servicemms_repair - 获取实体对象
2013-11-23 17:02:08,206 [23] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201306060001'
2013-11-23 17:02:08,207 [23] DEBUG Servicemms_repair - 获取上一条下一条数据
2013-11-23 17:02:08,207 [23] DEBUG Servicemms_repair - 获取字段
2013-11-23 17:02:08,208 [23] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo
2013-11-23 17:02:08,208 [23] DEBUG Servicemms_repair - 获取字段
2013-11-23 17:02:08,208 [23] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo<'201306060001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 17:02:08,209 [23] DEBUG Servicemms_repair - 获取字段
2013-11-23 17:02:08,209 [23] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo>'201306060001' and ProjectCode='201306030001' order by BillNo
2013-11-23 17:02:08,209 [23] DEBUG Servicemms_repair - 获取字段
2013-11-23 17:02:08,210 [23] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo desc
2013-11-23 17:02:08,210 [23] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:02:08,210 [23] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 17:02:08,211 [23] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:02:08,211 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 17:02:08,212 [23] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:02:08,212 [23] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 17:02:08,212 [23] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:02:08,213 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:02:11,012 [27] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 17:02:11,013 [27] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00502%' order by MerchantsCode
2013-11-23 17:02:40,026 [33] ERROR /api/mms/repair/getdetail/201306060001 - System.Xml.XmlException: 第 6 行，位置 23 上的开始标记“orderby”与结束标记“settings”不匹配。 第 7 行，位置 3。
   在 System.Xml.XmlTextReaderImpl.Throw(Exception e)
   在 System.Xml.XmlTextReaderImpl.Throw(String res, String[] args)
   在 System.Xml.XmlTextReaderImpl.ThrowTagMismatch(NodeData startTag)
   在 System.Xml.XmlTextReaderImpl.ParseEndElement()
   在 System.Xml.XmlTextReaderImpl.ParseElementContent()
   在 System.Xml.XmlTextReaderImpl.Read()
   在 System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace)
   在 System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
   在 System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
   在 System.Xml.XmlDocument.Load(XmlReader reader)
   在 System.Xml.XmlDocument.LoadXml(String xml)
   在 Zephyr.Core.RequestWrapper.SetXml(String str) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapper.cs:行号 61
   在 Zephyr.Web.Mms.Controllers.RepairApiController.GetDetail(String id) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\RepairController.cs:行号 134
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 17:03:39,136 [22] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:03:39,167 [22] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:03:39,175 [22] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:03:39,175 [22] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:03:39,537 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:03:39,557 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:03:39,765 [7] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 17:03:40,927 [7] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:03:40,928 [7] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 17:03:42,686 [7] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 17:03:47,377 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/Index','/Mms/repair')
2013-11-23 17:03:47,389 [7] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:03:47,390 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:03:50,144 [19] DEBUG Servicemms_repair - 获取动态列表
2013-11-23 17:03:50,145 [19] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:03:50,220 [19] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MerchantsName from mms_repair A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_merchants     C on C.MerchantsCode    = A.RepairUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:03:53,455 [7] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/repair/edit')
2013-11-23 17:03:53,462 [7] DEBUG Servicemms_repair - 获取实体对象
2013-11-23 17:03:53,465 [7] DEBUG Mms - select mms_repair.* from mms_repair where BillNo='201306060001'
2013-11-23 17:03:53,470 [7] DEBUG Servicemms_repair - 获取上一条下一条数据
2013-11-23 17:03:53,489 [7] DEBUG Servicemms_repair - 获取字段
2013-11-23 17:03:53,489 [7] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo
2013-11-23 17:03:53,492 [7] DEBUG Servicemms_repair - 获取字段
2013-11-23 17:03:53,492 [7] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo<'201306060001' and ProjectCode='201306030001' order by BillNo desc
2013-11-23 17:03:53,494 [7] DEBUG Servicemms_repair - 获取字段
2013-11-23 17:03:53,494 [7] DEBUG Mms - select top 1 BillNo from mms_repair where BillNo>'201306060001' and ProjectCode='201306030001' order by BillNo
2013-11-23 17:03:53,496 [7] DEBUG Servicemms_repair - 获取字段
2013-11-23 17:03:53,496 [7] DEBUG Mms - select top 1 BillNo from mms_repair where ProjectCode='201306030001' order by BillNo desc
2013-11-23 17:03:53,754 [7] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:03:53,755 [7] DEBUG Sys - select Text as value,Text as text from sys_code where CodeType='MeasureUnit'
2013-11-23 17:03:53,756 [7] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:03:53,757 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 17:03:53,757 [7] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:03:53,758 [7] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PayType'
2013-11-23 17:03:53,758 [7] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:03:53,759 [7] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:03:56,608 [15] DEBUG ServiceModelBase - 获取动态列表
2013-11-23 17:03:56,609 [15] DEBUG Mms - select MerchantsCode as value,MerchantsName as text from mms_merchants A
    left join mms_merchantsType B on B.MerchantsTypeCode = A.MerchantsTypeCode where MerchantsCode like 'FB00502%' order by MerchantsCode
2013-11-23 17:03:57,972 [24] DEBUG Servicemms_repairDetail - 获取动态列表
2013-11-23 17:03:57,972 [24] DEBUG Mms - select * from mms_repairDetail where BillNo='201306060001' order by RepairNo
2013-11-23 17:04:02,956 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2013-11-23 17:04:02,961 [23] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:04:02,962 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:04:02,963 [23] DEBUG Servicemms_buildPart - 获取动态列表
2013-11-23 17:04:02,964 [23] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-11-23 17:04:04,206 [24] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-11-23 17:04:04,304 [24] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney0                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-11-23 17:04:04,447 [24] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2013-11-23 17:04:58,736 [27] ERROR /api/mms/report/GetBalanceAccount/ - System.NullReferenceException: 未将对象引用设置到对象的实例。
   在 Zephyr.Web.Mms.Controllers.ReportApiController.GetDateRangeSql(String column, String value) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReportController.cs:行号 1105
   在 Zephyr.Web.Mms.Controllers.ReportApiController.GetBalanceAccount(RequestWrapper query) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\ReportController.cs:行号 792
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 17:05:34,803 [13] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:05:34,835 [13] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:05:34,842 [13] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:05:34,843 [13] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:05:35,221 [28] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:05:35,246 [28] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:05:35,484 [28] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 17:05:36,652 [28] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:05:36,653 [28] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 17:05:38,426 [9] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 17:05:48,738 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2013-11-23 17:05:48,751 [20] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:05:48,753 [20] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:05:48,755 [20] DEBUG Servicemms_buildPart - 获取动态列表
2013-11-23 17:05:48,755 [20] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-11-23 17:05:50,387 [10] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-11-23 17:05:50,498 [10] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney0                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-11-23 17:05:50,629 [10] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2013-11-23 17:05:55,037 [11] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_receive.ReceiveDate) >=0 and datediff(day,'2013-11-23',mms_receive.ReceiveDate) <=0

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_return.ReturnDate) >=0 and datediff(day,'2013-11-23',mms_return.ReturnDate) <=0

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_direct.ArriveDate) >=0 and datediff(day,'2013-11-23',mms_direct.ArriveDate) <=0

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_rentin.RentinDate) >=0 and datediff(day,'2013-11-23',mms_rentin.RentinDate) <=0

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_stockAdjust.EffectDate) >=0 and datediff(day,'2013-11-23',mms_stockAdjust.EffectDate) <=0

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_send.SendDate) >=0 and datediff(day,'2013-11-23',mms_send.SendDate) <=0

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_refund.RefundDate) >=0 and datediff(day,'2013-11-23',mms_refund.RefundDate) <=0

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_transfer.TransferDate) >=0 and datediff(day,'2013-11-23',mms_transfer.TransferDate) <=0

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_lossReport.LossReportDate) >=0 and datediff(day,'2013-11-23',mms_lossReport.LossReportDate) <=0
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-11-23 17:05:55,215 [11] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
                                                                 --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_receive.ReceiveDate) >=0 and datediff(day,'2013-11-23',mms_receive.ReceiveDate) <=0

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_return.ReturnDate) >=0 and datediff(day,'2013-11-23',mms_return.ReturnDate) <=0

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_direct.ArriveDate) >=0 and datediff(day,'2013-11-23',mms_direct.ArriveDate) <=0

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_rentin.RentinDate) >=0 and datediff(day,'2013-11-23',mms_rentin.RentinDate) <=0

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_stockAdjust.EffectDate) >=0 and datediff(day,'2013-11-23',mms_stockAdjust.EffectDate) <=0

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_send.SendDate) >=0 and datediff(day,'2013-11-23',mms_send.SendDate) <=0

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_refund.RefundDate) >=0 and datediff(day,'2013-11-23',mms_refund.RefundDate) <=0

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_transfer.TransferDate) >=0 and datediff(day,'2013-11-23',mms_transfer.TransferDate) <=0

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'and datediff(day,'2013-11-23',mms_lossReport.LossReportDate) >=0 and datediff(day,'2013-11-23',mms_lossReport.LossReportDate) <=0
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-11-23 17:05:55,365 [11] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001' and mms_warehouseStockHistory.CreateDate<'2013-11-23'
group by mms_warehouseStockHistory.MaterialCode

2013-11-23 17:05:57,155 [20] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-11-23 17:05:57,203 [20] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney0                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-11-23 17:05:57,207 [20] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2013-11-23 17:05:59,282 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/receivesummary')
2013-11-23 17:06:01,156 [9] DEBUG Mms - 
Select T.*
From
( 
    --收料单
    Select mms_receive.BillNo As SrcBillNo,'receive' As SrcBillType,mms_receive.ContractCode As ContractCode,
	    mms_receive.SupplierCode,mms_receive.OriginalNum,mms_receive.ReceiveDate As TakeDate,
	    mms_receiveDetail.MaterialCode,mms_receiveDetail.Unit,mms_receiveDetail.UnitPrice,
	    mms_receiveDetail.Num,mms_receiveDetail.Money,mms_receiveDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_receive.BillNo+'receive'+mms_receiveDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_receiveDetail
    Left join mms_receive ON mms_receiveDetail.BillNo=mms_receive.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_receive.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_receiveDetail.MaterialCode
    Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

    UNION

    --直入直出
    Select mms_direct.BillNo As SrcBillNo,'direct' As SrcBillType,mms_direct.ContractCode As ContractCode,
	    mms_direct.SupplierCode,mms_direct.OriginalNum,mms_direct.ArriveDate As TakeDate,
	    mms_directDetail.MaterialCode,mms_directDetail.Unit,mms_directDetail.UnitPrice,
	    mms_directDetail.Num,mms_directDetail.Money,mms_directDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_direct.BillNo+'direct'+mms_directDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_directDetail
    Left join mms_direct ON mms_directDetail.BillNo=mms_direct.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_direct.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_directDetail.MaterialCode
    Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

    UNION

    --退货
    Select mms_return.BillNo As SrcBillNo,'return' As SrcBillType,mms_return.ContractCode As ContractCode,
	    mms_return.SupplierCode,'' AS OriginalNum,mms_return.ReturnDate As TakeDate,
	    mms_returnDetail.MaterialCode,mms_returnDetail.Unit,mms_returnDetail.UnitPrice,
	    -mms_returnDetail.Num,-mms_returnDetail.Money,mms_returnDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_return.BillNo+'return'+mms_returnDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_returnDetail
    Left join mms_return ON mms_returnDetail.BillNo=mms_return.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_return.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_returnDetail.MaterialCode
    Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

    UNION

    --租赁进场
    Select mms_rentIn.BillNo As SrcBillNo,'rentin' As SrcBillType,mms_rentIn.ContractCode As ContractCode,
	    mms_rentIn.SupplierCode,'' as OriginalNum,mms_rentIn.RentInDate As TakeDate,
	    mms_rentInDetail.MaterialCode,mms_rentInDetail.Unit,mms_rentInDetail.UnitPrice,
	    mms_rentInDetail.Num,'0' as Money,mms_rentInDetail.Remark,mms_merchants.MerchantsName AS SupplierName,
        '' as name,(mms_rentIn.BillNo+'rentIn'+mms_rentInDetail.MaterialCode) as id,mms_material.MaterialName,mms_material.Model
    From mms_rentInDetail
    Left join mms_rentIn ON mms_rentInDetail.BillNo=mms_rentIn.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_rentIn.SupplierCode
    left join mms_material on mms_material.MaterialCode=mms_rentInDetail.MaterialCode
    Where mms_rentIn.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'
) as T
Where 1=1 
                
2013-11-23 17:06:09,793 [5] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/sendsummary')
2013-11-23 17:06:09,802 [5] DEBUG Servicemms_buildPart - 获取动态列表
2013-11-23 17:06:09,803 [5] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-11-23 17:06:11,917 [9] DEBUG Mms - 
Select T.*
From
( 
	--发料单
    Select mms_send.BillNo As SrcBillNo,'send' As SrcBillType,mms_send.SendDate As TakeDate,
		mms_send.PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_sendDetail.Unit,mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,
		mms_sendDetail.Remark,'' as name,(mms_send.BillNo+'send'+mms_sendDetail.MaterialCode) as id
    From mms_sendDetail
    Left join mms_send ON mms_sendDetail.BillNo=mms_send.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_send.PickUnit
    left join mms_material on mms_material.MaterialCode=mms_sendDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_send.BuildPartCode
    Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

    UNION

    --直入直出
    Select mms_direct.BillNo As SrcBillNo,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
		mms_direct.PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_directDetail.Unit,mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,
		mms_directDetail.Remark,'' as name,(mms_direct.BillNo+'direct'+mms_directDetail.MaterialCode) as id
    From mms_directDetail
    Left join mms_direct ON mms_directDetail.BillNo=mms_direct.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_direct.PickUnit
    left join mms_material on mms_material.MaterialCode=mms_directDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_direct.BuildPartCode
    Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

    UNION

    --退库
     Select mms_refund.BillNo As SrcBillNo,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
		mms_refund.RefundUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,NULL AS BuildPartName,
	    mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_refundDetail.Unit,mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,
		mms_refundDetail.Remark,'' as name,(mms_refund.BillNo+'refund'+mms_refundDetail.MaterialCode) as id
    From mms_refundDetail
    Left join mms_refund ON mms_refundDetail.BillNo=mms_refund.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_refund.RefundUnit
    left join mms_material on mms_material.MaterialCode=mms_refundDetail.MaterialCode
    Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

    UNION

    --租赁进场
    Select mms_rentin.BillNo As SrcBillNo,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
		mms_rentinDetail.UseUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,mms_buildPart.BuildPartName,
	    mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_rentinDetail.Unit,mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,
		mms_rentinDetail.Remark,'' as name,(mms_rentin.BillNo+'rentin'+mms_rentinDetail.MaterialCode) as id
    From mms_rentinDetail
    Left join mms_rentin ON mms_rentinDetail.BillNo=mms_rentin.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
    left join mms_material on mms_material.MaterialCode=mms_rentinDetail.MaterialCode
	left join mms_buildPart on mms_buildPart.BuildPartCode=mms_rentin.BuildPartCode
    Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

    UNION

	--报损
	Select mms_lossReport.BillNo As SrcBillNo,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
		'其他' as PickUnit,'其他' as PickUnitName,NULL AS BuildPartName,
	    mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_lossReportDetail.Unit,mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,
		mms_lossReportDetail.Remark,'' as name,(mms_lossReport.BillNo+'lossReport'+mms_lossReportDetail.MaterialCode) as id
    From mms_lossReportDetail
    Left join mms_lossReport ON mms_lossReportDetail.BillNo=mms_lossReport.BillNo
    left join mms_material on mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
    Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'

    UNION

	--调拨
	Select mms_transfer.BillNo As SrcBillNo,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
		mms_transfer.ReceiveUnit as PickUnit,mms_merchants.MerchantsName as PickUnitName,NULL AS BuildPartName,
	    mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,
		mms_transferDetail.Unit,mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,
		mms_transferDetail.Remark,'' as name,(mms_transfer.BillNo+'transfer'+mms_transferDetail.MaterialCode) as id
    From mms_transferDetail
    Left join mms_transfer ON mms_transferDetail.BillNo=mms_transfer.BillNo
    left join mms_merchants on mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
    left join mms_material on mms_material.MaterialCode=mms_transferDetail.MaterialCode
    Where mms_transfer.ApproveState='passed'  And  mms_transfer.ProjectCode='201306030001'

) as T
Where 1=1 

                
2013-11-23 17:06:16,634 [23] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/warehousequery')
2013-11-23 17:06:16,643 [23] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:06:16,643 [23] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:06:17,540 [27] DEBUG Mms - 
Select mms_warehouseStock.*,mms_material.MaterialName,mms_material.Model,mms_warehouse.WarehouseName,
    mms_warehouseStock.WarehouseCode+'_'+mms_material.MaterialCode as id,'' AS name
From mms_warehouseStock
Left join mms_warehouse on mms_warehouseStock.WarehouseCode=mms_warehouse.WarehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStock.MaterialCode
Where mms_warehouse.ProjectCode='201306030001' 

                
2013-11-23 17:06:22,156 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/warehouseaccount')
2013-11-23 17:06:24,180 [9] DEBUG Mms - 
Select mms_warehouseStockHistory.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStockHistory.WarehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where  mms_warehouse.ProjectCode='201306030001' 
order by mms_warehouseStockHistory.CreateDate desc
                
2013-11-23 17:06:32,113 [20] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/materialwarnning')
2013-11-23 17:06:33,152 [21] DEBUG Mms - 
Select mms_materialWarnning.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_materialWarnning
Left join mms_material on mms_material.MaterialCode=mms_materialWarnning.MaterialCode
Where mms_materialWarnning.ProjectCode='201306030001' 
                
2013-11-23 17:06:33,206 [9] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode=''
                
2013-11-23 17:06:34,622 [20] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode='0101010103'
                
2013-11-23 17:06:36,132 [11] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode='0101010102'
                
2013-11-23 17:06:36,579 [21] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode='0101010101'
                
2013-11-23 17:06:37,199 [9] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode='0101010101'
                
2013-11-23 17:06:40,244 [9] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode='0101010101'
                
2013-11-23 17:06:42,278 [20] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode='0101010301'
                
2013-11-23 17:06:44,604 [20] DEBUG Mms - 
Select mms_materialWarnning.*,mms_material.MaterialName,mms_material.Model,mms_material.Unit
From mms_materialWarnning
Left join mms_material on mms_material.MaterialCode=mms_materialWarnning.MaterialCode
Where mms_materialWarnning.ProjectCode='201306030001'  And mms_material.MaterialName like '%螺%'
                
2013-11-23 17:06:46,533 [10] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode='0101010203'
                
2013-11-23 17:06:47,060 [27] DEBUG Mms - 
Select *
From mms_warehouseStock
Left join mms_warehouse on mms_warehouse.WarehouseCode=mms_warehouseStock.WarehouseCode
Where mms_warehouse.ProjectCode='201306030001' and mms_warehouseStock.MaterialCode='0101010202'
                
2013-11-23 17:06:48,914 [10] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/merchant/Index','/Mms/merchant')
2013-11-23 17:06:55,568 [11] ERROR /api/mms/merchant/GetTypes - System.Xml.XmlException: 第 7 行，位置 32 上的开始标记“orderby”与结束标记“settings”不匹配。 第 8 行，位置 3。
   在 System.Xml.XmlTextReaderImpl.Throw(Exception e)
   在 System.Xml.XmlTextReaderImpl.Throw(String res, String[] args)
   在 System.Xml.XmlTextReaderImpl.ThrowTagMismatch(NodeData startTag)
   在 System.Xml.XmlTextReaderImpl.ParseEndElement()
   在 System.Xml.XmlTextReaderImpl.ParseElementContent()
   在 System.Xml.XmlTextReaderImpl.Read()
   在 System.Xml.XmlLoader.LoadNode(Boolean skipOverWhitespace)
   在 System.Xml.XmlLoader.LoadDocSequence(XmlDocument parentDoc)
   在 System.Xml.XmlLoader.Load(XmlDocument doc, XmlReader reader, Boolean preserveWhitespace)
   在 System.Xml.XmlDocument.Load(XmlReader reader)
   在 System.Xml.XmlDocument.LoadXml(String xml)
   在 Zephyr.Core.RequestWrapper.SetXml(String str) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Net\Zephyr.Core\Request\RequestWrapper.cs:行号 61
   在 Zephyr.Web.Mms.Controllers.MerchantApiController.GetTypes(RequestWrapper request) 位置 g:\01.开发框架\Zephyr.Net.V2.0\src\Zephyr.Web.Mms\Areas\Mms\Controllers\MerchantController.cs:行号 39
   在 lambda_method(Closure , Object , Object[] )
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.<>c__DisplayClass13.<GetExecutor>b__c(Object instance, Object[] methodParameters)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.ActionExecutor.Execute(Object instance, Object[] arguments)
   在 System.Web.Http.Controllers.ReflectedHttpActionDescriptor.<>c__DisplayClass5.<ExecuteAsync>b__4()
   在 System.Threading.Tasks.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)
2013-11-23 17:06:55,630 [5] DEBUG Servicemms_merchants - 获取实体列表
2013-11-23 17:06:55,635 [5] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants order by MerchantsCode
2013-11-23 17:06:55,691 [5] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants ) tb_temp
2013-11-23 17:07:32,661 [13] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:07:32,697 [13] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:07:32,704 [13] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:07:32,704 [13] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:07:33,058 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:07:33,081 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:07:33,312 [8] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 17:07:34,496 [8] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:07:34,497 [8] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 17:07:36,307 [8] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 17:07:48,222 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/merchant/Index','/Mms/merchant')
2013-11-23 17:07:49,903 [5] DEBUG Servicemms_merchantsType - 获取动态列表
2013-11-23 17:07:49,905 [8] DEBUG Servicemms_merchants - 获取实体列表
2013-11-23 17:07:49,905 [5] DEBUG Mms - select mms_merchantsType.* from mms_merchantsType order by MerchantsTypeCode
2013-11-23 17:07:49,910 [8] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants order by MerchantsCode
2013-11-23 17:07:50,044 [8] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants ) tb_temp
2013-11-23 17:07:51,994 [23] DEBUG Servicemms_merchants - 获取实体列表
2013-11-23 17:07:51,994 [23] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants where MerchantsTypeCode='006' order by MerchantsCode
2013-11-23 17:07:51,998 [23] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants where MerchantsTypeCode='006' ) tb_temp
2013-11-23 17:07:52,874 [8] DEBUG Servicemms_merchants - 获取实体列表
2013-11-23 17:07:52,874 [8] DEBUG Mms - select top 20 mms_merchants.* from mms_merchants where MerchantsTypeCode='007' order by MerchantsCode
2013-11-23 17:07:52,878 [8] DEBUG Mms - select count(*) from ( select mms_merchants.* from mms_merchants where MerchantsTypeCode='007' ) tb_temp
2013-11-23 17:07:53,816 [8] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/project/Index','/Mms/project')
2013-11-23 17:07:53,833 [8] DEBUG Servicemms_project - 获取实体对象
2013-11-23 17:07:53,835 [8] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 17:07:53,844 [8] DEBUG Servicemms_project - 获取上一条下一条数据
2013-11-23 17:07:53,860 [8] DEBUG Servicemms_project - 获取字段
2013-11-23 17:07:53,861 [8] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2013-11-23 17:07:53,864 [8] DEBUG Servicemms_project - 获取字段
2013-11-23 17:07:53,865 [8] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2013-11-23 17:07:53,867 [8] DEBUG Servicemms_project - 获取字段
2013-11-23 17:07:53,868 [8] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2013-11-23 17:07:53,870 [8] DEBUG Servicemms_project - 获取字段
2013-11-23 17:07:53,870 [8] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2013-11-23 17:07:54,127 [8] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:07:54,127 [8] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='PartAttr'
2013-11-23 17:07:54,128 [8] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:07:54,129 [8] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='ImagePart'
2013-11-23 17:07:57,873 [24] DEBUG Servicemms_project - 获取动态列表
2013-11-23 17:07:57,874 [24] DEBUG Mms - select ProjectName as text,ProjectCode as id,ParentCode as pid from mms_project
2013-11-23 17:07:58,128 [23] DEBUG Servicemms_buildPart - 获取实体列表
2013-11-23 17:07:58,129 [23] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030001'
2013-11-23 17:07:58,311 [10] DEBUG Servicemms_project - 获取实体对象
2013-11-23 17:07:58,311 [10] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 17:07:58,312 [10] DEBUG Servicemms_project - 获取上一条下一条数据
2013-11-23 17:07:58,312 [10] DEBUG Servicemms_project - 获取字段
2013-11-23 17:07:58,312 [10] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2013-11-23 17:07:58,313 [10] DEBUG Servicemms_project - 获取字段
2013-11-23 17:07:58,313 [10] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2013-11-23 17:07:58,313 [10] DEBUG Servicemms_project - 获取字段
2013-11-23 17:07:58,314 [10] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2013-11-23 17:07:58,314 [10] DEBUG Servicemms_project - 获取字段
2013-11-23 17:07:58,314 [10] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2013-11-23 17:08:00,144 [11] DEBUG Servicemms_buildPart - 获取实体列表
2013-11-23 17:08:00,145 [11] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030002'
2013-11-23 17:08:00,171 [24] DEBUG Servicemms_project - 获取实体对象
2013-11-23 17:08:00,171 [24] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030002'
2013-11-23 17:08:00,172 [24] DEBUG Servicemms_project - 获取上一条下一条数据
2013-11-23 17:08:00,172 [24] DEBUG Servicemms_project - 获取字段
2013-11-23 17:08:00,173 [24] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode
2013-11-23 17:08:00,175 [24] DEBUG Servicemms_project - 获取字段
2013-11-23 17:08:00,176 [24] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030002' and ProjectCode='201306030002' order by ProjectCode desc
2013-11-23 17:08:00,177 [24] DEBUG Servicemms_project - 获取字段
2013-11-23 17:08:00,177 [24] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030002' and ProjectCode='201306030002' order by ProjectCode
2013-11-23 17:08:00,178 [24] DEBUG Servicemms_project - 获取字段
2013-11-23 17:08:00,179 [24] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030002' order by ProjectCode desc
2013-11-23 17:08:02,265 [24] DEBUG Servicemms_buildPart - 获取实体列表
2013-11-23 17:08:02,265 [24] DEBUG Mms - select mms_buildPart.* from mms_buildPart where ProjectCode='201306030001'
2013-11-23 17:08:02,325 [10] DEBUG Servicemms_project - 获取实体对象
2013-11-23 17:08:02,326 [10] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 17:08:02,327 [10] DEBUG Servicemms_project - 获取上一条下一条数据
2013-11-23 17:08:02,327 [10] DEBUG Servicemms_project - 获取字段
2013-11-23 17:08:02,327 [10] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode
2013-11-23 17:08:02,327 [10] DEBUG Servicemms_project - 获取字段
2013-11-23 17:08:02,328 [10] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode<'201306030001' and ProjectCode='201306030001' order by ProjectCode desc
2013-11-23 17:08:02,328 [10] DEBUG Servicemms_project - 获取字段
2013-11-23 17:08:02,329 [10] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode>'201306030001' and ProjectCode='201306030001' order by ProjectCode
2013-11-23 17:08:02,329 [10] DEBUG Servicemms_project - 获取字段
2013-11-23 17:08:02,329 [10] DEBUG Mms - select top 1 ProjectCode from mms_project where ProjectCode='201306030001' order by ProjectCode desc
2013-11-23 17:17:56,913 [43] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/warehouse/Index','/Mms/warehouse')
2013-11-23 17:17:58,324 [40] DEBUG Servicemms_project - 获取动态列表
2013-11-23 17:17:58,329 [40] DEBUG Mms - select ProjectName as text,ProjectCode as id,ParentCode as pid from mms_project
2013-11-23 17:17:58,376 [44] DEBUG Servicemms_warehouse - 获取实体列表
2013-11-23 17:17:58,377 [44] DEBUG Mms - select top 20 mms_warehouse.* from mms_warehouse order by WarehouseCode
2013-11-23 17:17:58,435 [44] DEBUG Mms - select count(*) from ( select mms_warehouse.* from mms_warehouse ) tb_temp
2013-11-23 17:18:00,241 [35] DEBUG Servicemms_warehouse - 获取实体列表
2013-11-23 17:18:00,242 [35] DEBUG Mms - select top 20 mms_warehouse.* from mms_warehouse where ProjectCode='201306030002' order by WarehouseCode
2013-11-23 17:18:00,245 [35] DEBUG Mms - select count(*) from ( select mms_warehouse.* from mms_warehouse where ProjectCode='201306030002' ) tb_temp
2013-11-23 17:18:01,322 [32] DEBUG Servicemms_warehouse - 获取实体列表
2013-11-23 17:18:01,322 [32] DEBUG Mms - select top 20 mms_warehouse.* from mms_warehouse where ProjectCode='201306030001' order by WarehouseCode
2013-11-23 17:18:01,325 [32] DEBUG Mms - select count(*) from ( select mms_warehouse.* from mms_warehouse where ProjectCode='201306030001' ) tb_temp
2013-11-23 17:18:02,602 [32] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/material/Index','/Mms/material')
2013-11-23 17:18:03,980 [34] DEBUG Servicemms_materialType - 获取动态列表
2013-11-23 17:18:03,980 [34] DEBUG Mms - select mms_materialType.* from mms_materialType order by MaterialType
2013-11-23 17:18:04,028 [43] DEBUG Servicemms_material - 获取实体列表
2013-11-23 17:18:04,029 [43] DEBUG Mms - select top 20 mms_material.* from mms_material order by MaterialCode
2013-11-23 17:18:04,086 [43] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material ) tb_temp
2013-11-23 17:18:07,128 [43] DEBUG Servicemms_material - 获取实体列表
2013-11-23 17:18:07,129 [43] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0001' order by MaterialCode
2013-11-23 17:18:07,132 [43] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0001' ) tb_temp
2013-11-23 17:18:08,608 [36] DEBUG Servicemms_material - 获取实体列表
2013-11-23 17:18:08,608 [36] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01' order by MaterialCode
2013-11-23 17:18:08,611 [36] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01' ) tb_temp
2013-11-23 17:18:09,942 [41] DEBUG Servicemms_material - 获取实体列表
2013-11-23 17:18:09,942 [41] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010101' order by MaterialCode
2013-11-23 17:18:09,946 [41] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010101' ) tb_temp
2013-11-23 17:18:10,828 [40] DEBUG Servicemms_material - 获取实体列表
2013-11-23 17:18:10,828 [40] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='01010105' order by MaterialCode
2013-11-23 17:18:10,831 [40] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='01010105' ) tb_temp
2013-11-23 17:18:12,151 [35] DEBUG Servicemms_material - 获取实体列表
2013-11-23 17:18:12,152 [35] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0101010501' order by MaterialCode
2013-11-23 17:18:12,156 [35] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0101010501' ) tb_temp
2013-11-23 17:18:13,286 [33] DEBUG Servicemms_material - 获取实体列表
2013-11-23 17:18:13,287 [33] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0101010503' order by MaterialCode
2013-11-23 17:18:13,290 [33] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0101010503' ) tb_temp
2013-11-23 17:18:14,464 [40] DEBUG Servicemms_material - 获取实体列表
2013-11-23 17:18:14,464 [40] DEBUG Mms - select top 20 mms_material.* from mms_material where MaterialType='0101010502' order by MaterialCode
2013-11-23 17:18:14,468 [40] DEBUG Mms - select count(*) from ( select mms_material.* from mms_material where MaterialType='0101010502' ) tb_temp
2013-11-23 17:18:18,472 [40] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/menu/Index','/Sys/menu')
2013-11-23 17:18:19,197 [34] DEBUG Servicesys_menu - 获取动态列表
2013-11-23 17:18:19,198 [34] DEBUG Sys - select A.*,B.MenuName as ParentName from sys_menu A left join sys_menu B on B.MenuCode = A.ParentCode order by A.MenuSeq,A.MenuCode
2013-11-23 17:18:22,788 [34] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2013-11-23 17:19:30,549 [40] DEBUG Sys - SELECT Name as TableName FROM sys.tables order by Name
2013-11-23 17:19:30,561 [36] DEBUG Sys - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2013-11-23 17:19:30,581 [34] DEBUG Sys - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2013-11-23 17:20:30,836 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:20:30,869 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:20:30,877 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:20:30,878 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:20:31,341 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:20:31,363 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:20:31,589 [5] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 17:20:32,786 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:20:32,786 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 17:20:34,562 [5] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 17:20:39,801 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:20:39,801 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:20:39,874 [5] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:20:39,875 [5] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 17:20:44,133 [11] DEBUG Servicesys_user - 获取实体对象
2013-11-23 17:20:44,135 [11] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-23 17:20:44,152 [11] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-23 17:20:44,175 [11] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-23 17:20:44')
2013-11-23 17:22:21,830 [11] DEBUG Servicemms_project - 获取实体对象
2013-11-23 17:22:21,831 [11] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 17:24:10,569 [7] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:24:10,601 [7] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:24:10,608 [7] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:24:10,609 [7] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:24:10,828 [15] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:24:10,853 [15] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:24:10,987 [15] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:24:10,988 [15] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 17:24:14,755 [12] DEBUG Servicesys_user - 获取实体对象
2013-11-23 17:24:14,757 [12] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='c4ca4238a0b923820dcc509a6f75849b' and IsEnable='1'
2013-11-23 17:24:19,064 [12] DEBUG Servicemms_project - 获取实体对象
2013-11-23 17:24:19,064 [12] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 17:24:48,817 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:24:48,848 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:24:48,855 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:24:48,856 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:24:49,046 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:24:49,070 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:24:49,201 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:24:49,202 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 17:25:34,073 [20] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:25:34,105 [20] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:25:34,113 [20] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:25:34,114 [20] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:25:34,316 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:25:34,341 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:25:34,473 [19] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:25:34,474 [19] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME_EN'
2013-11-23 17:25:39,057 [16] DEBUG Servicesys_user - 获取实体对象
2013-11-23 17:25:39,059 [16] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='c4ca4238a0b923820dcc509a6f75849b' and IsEnable='1'
2013-11-23 17:25:46,593 [17] DEBUG Servicesys_user - 获取实体对象
2013-11-23 17:25:46,594 [17] DEBUG Sys - select sys_user.* from sys_user where UserCode='admin' and Password='81dc9bdb52d04dc20036dbd8313ed055' and IsEnable='1'
2013-11-23 17:25:46,693 [17] DEBUG Sys - 
update sys_user
set LoginCount = isnull(LoginCount,0) + 1
   ,LastLoginDate = getdate()
where UserCode = 'admin' 
2013-11-23 17:25:46,803 [17] DEBUG Sys - insert into sys_loginHistory([UserCode],[UserName],[HostName],[HostIP],[LoginCity],[LoginDate]) values('admin','管理员','LHS-PC','localhost','福建省厦门市','2013-11-23 17:25:46')
2013-11-23 17:25:49,319 [17] DEBUG Servicemms_project - 获取实体对象
2013-11-23 17:25:49,320 [17] DEBUG Mms - select mms_project.* from mms_project where ProjectCode='201306030001'
2013-11-23 17:25:49,363 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:25:49,364 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:25:49,512 [12] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 17:25:50,545 [12] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:25:50,545 [12] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 17:25:52,148 [6] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 17:26:12,511 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/report/balanceaccount')
2013-11-23 17:26:12,521 [12] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:26:12,522 [12] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:26:12,523 [12] DEBUG Servicemms_buildPart - 获取动态列表
2013-11-23 17:26:12,524 [12] DEBUG Mms - select BuildPartCode as value,BuildPartName as text from mms_buildPart where ProjectCode='201306030001'
2013-11-23 17:26:14,096 [17] DEBUG Mms - 
Select PickUnitName
From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
Where PickUnitName<>'' and PickUnitName<>'其他' and PickUnitName<>'租赁进场'
group by PickUnitName
                
2013-11-23 17:26:14,201 [17] DEBUG Mms - 
Select MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else 0 end),0) as ReceiveMoney --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Money else 0 end),0) as StockSelfMoney --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Money else 0 end),0) as OwnerSupplyMoney --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Money else 0 end),0) as CallInMoney --调入
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Money else 0 end),0) as ReceiveOtherMoney --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else 0 end),0) as ReceiveNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType='082' then Num else 0 end),0) as StockSelfNum --自采
    ,ISNULL(Sum(CASE WHEN SupplyType='083' then Num else 0 end),0) as OwnerSupplyNum --甲供
    ,ISNULL(Sum(CASE WHEN SupplyType='084' then Num else 0 end),0) as CallInNum --调入
	,ISNULL(Sum(CASE WHEN SupplyType='租赁进场' then Num else 0 end),0) as ReceiveRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN SupplyType='其他' then Num else 0 end),0) as ReceiveOtherNum --其他

    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Money else 0 end),0) as SendMoney --合计
    ,ISNULL(Sum(CASE WHEN PickUnitName<>'' then Num else 0 end),0) as SendNum --合计
     ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Num else 0 end),0) as PickUnitNum0 ,ISNULL(Sum(CASE WHEN PickUnitName='河北天强建筑工程有限公司' then Money else 0 end),0) as PickUnitMoney0                                                             --领料人生成的列
    ,ISNULL(Sum(CASE WHEN PickUnitName='租赁进场' then Num else 0 end),0) as SendRentInNum --租赁进场
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Money else 0 end),0) as SendOtherMoney --其他
    ,ISNULL(Sum(CASE WHEN PickUnitName='其他' then Num else 0 end),0) as SendOtherNum --其他

    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Num else -Num end),0) as TotalNum --合计
    ,ISNULL(Sum(CASE WHEN SupplyType<>'' then Money else -Money end),0) as TotalMoney --合计

From (
--收料单
Select mms_receiveDetail.BillNo As SrcBillNo,mms_receiveDetail.RowId As SrcRowId,'receive' As SrcBillType,mms_receive.ReceiveDate As TakeDate,
	mms_receive.SupplyType As SupplyType,'' As PickUnitName, mms_receiveDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_receiveDetail.Unit,
	mms_receiveDetail.UnitPrice,mms_receiveDetail.Num,mms_receiveDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_receive
Left join mms_receiveDetail On mms_receiveDetail.BillNo=mms_receive.BillNo
Left join mms_material On mms_material.MaterialCode=mms_receiveDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_receive.ApproveState='passed'  And  mms_receive.ProjectCode='201306030001'

Union
--退货单
Select mms_returnDetail.BillNo As SrcBillNo,mms_returnDetail.RowId As SrcRowId,'return' As SrcBillType,mms_return.ReturnDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_returnDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_returnDetail.Unit,
	mms_returnDetail.UnitPrice,-mms_returnDetail.Num,-mms_returnDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_return
Left join mms_returnDetail On mms_returnDetail.BillNo=mms_return.BillNo
Left join mms_material On mms_material.MaterialCode=mms_returnDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_return.ApproveState='passed'  And  mms_return.ProjectCode='201306030001'

Union
--直入直出
Select mms_directDetail.BillNo As SrcBillNo,mms_directDetail.RowId As SrcRowId,'direct' As SrcBillType,mms_direct.ArriveDate As TakeDate,
	mms_direct.SupplyType As SupplyType,mms_merchants.MerchantsName As PickUnitName, mms_directDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_directDetail.Unit,
	mms_directDetail.UnitPrice,mms_directDetail.Num,mms_directDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_direct
Left join mms_directDetail On mms_directDetail.BillNo=mms_direct.BillNo
Left join mms_material On mms_material.MaterialCode=mms_directDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_direct.PickUnit
Where mms_direct.ApproveState='passed'  And  mms_direct.ProjectCode='201306030001'

Union
--租赁进场
Select mms_rentinDetail.BillNo As SrcBillNo,mms_rentinDetail.RowId As SrcRowId,'rentin' As SrcBillType,mms_rentin.RentInDate As TakeDate,
	'租赁进场' As SupplyType,'租赁进场' As PickUnitName, mms_rentinDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_rentinDetail.Unit,
	mms_rentinDetail.UnitPrice,mms_rentinDetail.Num,'0' As Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_rentin
Left join mms_rentinDetail On mms_rentinDetail.BillNo=mms_rentin.BillNo
Left join mms_material On mms_material.MaterialCode=mms_rentinDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_rentinDetail.UseUnit
Where mms_rentin.ApproveState='passed'  And  mms_rentin.ProjectCode='201306030001'

Union
--库存调整
Select mms_stockAdjustDetail.BillNo As SrcBillNo,mms_stockAdjustDetail.RowId As SrcRowId,'adjust' As SrcBillType,mms_stockAdjust.EffectDate As TakeDate,
	'其他' As SupplyType,'' As PickUnitName, mms_stockAdjustDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_stockAdjustDetail.Unit,
	mms_stockAdjustDetail.UnitPrice,mms_stockAdjustDetail.Num,mms_stockAdjustDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_stockAdjust
Left join mms_stockAdjustDetail On mms_stockAdjustDetail.BillNo=mms_stockAdjust.BillNo
Left join mms_material On mms_material.MaterialCode=mms_stockAdjustDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_stockAdjust.ApproveState='passed'  And  mms_stockAdjust.ProjectCode='201306030001'

Union
--发料
Select mms_sendDetail.BillNo As SrcBillNo,mms_sendDetail.RowId As SrcRowId,'send' As SrcBillType,mms_send.SendDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_sendDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_sendDetail.Unit,
	mms_sendDetail.UnitPrice,mms_sendDetail.Num,mms_sendDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_send
Left join mms_sendDetail On mms_sendDetail.BillNo=mms_send.BillNo
Left join mms_material On mms_material.MaterialCode=mms_sendDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_send.PickUnit
Where mms_send.ApproveState='passed'  And  mms_send.ProjectCode='201306030001'

Union
--退库
Select mms_refundDetail.BillNo As SrcBillNo,mms_refundDetail.RowId As SrcRowId,'refund' As SrcBillType,mms_refund.RefundDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_refundDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_refundDetail.Unit,
	mms_refundDetail.UnitPrice,-mms_refundDetail.Num,-mms_refundDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_refund
Left join mms_refundDetail On mms_refundDetail.BillNo=mms_refund.BillNo
Left join mms_material On mms_material.MaterialCode=mms_refundDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_refund.RefundUnit
Where mms_refund.ApproveState='passed'  And  mms_refund.ProjectCode='201306030001'

Union
--调拨
Select mms_transferDetail.BillNo As SrcBillNo,mms_transferDetail.RowId As SrcRowId,'transfer' As SrcBillType,mms_transfer.TransferDate As TakeDate,
	'' As SupplyType, mms_merchants.MerchantsName As PickUnitName,mms_transferDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_transferDetail.Unit,
	mms_transferDetail.UnitPrice,mms_transferDetail.Num,mms_transferDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_transfer
Left join mms_transferDetail On mms_transferDetail.BillNo=mms_transfer.BillNo
Left join mms_material On mms_material.MaterialCode=mms_transferDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Left join mms_merchants On mms_merchants.MerchantsCode=mms_transfer.ReceiveUnit
Where mms_transfer.ApproveState='passed' And  mms_transfer.ProjectCode='201306030001'

Union
--报损
Select mms_lossReportDetail.BillNo As SrcBillNo,mms_lossReportDetail.RowId As SrcRowId,'lossReport' As SrcBillType,mms_lossReport.LossReportDate As TakeDate,
	'' As SupplyType, '其他' As PickUnitName,mms_lossReportDetail.MaterialCode,mms_material.MaterialName,mms_material.Model,mms_lossReportDetail.Unit,
	mms_lossReportDetail.UnitPrice,mms_lossReportDetail.Num,mms_lossReportDetail.Money,mms_material.MaterialType,mms_materialType.Type As MaterialKind
From mms_lossReport
Left join mms_lossReportDetail On mms_lossReportDetail.BillNo=mms_lossReport.BillNo
Left join mms_material On mms_material.MaterialCode=mms_lossReportDetail.MaterialCode
Left join mms_materialType On mms_materialType.MaterialType=mms_material.MaterialType
Where mms_lossReport.ApproveState='passed'  And  mms_lossReport.ProjectCode='201306030001'
) as t
group by MaterialCode,MaterialName,Model,MaterialKind,MaterialType,Unit

2013-11-23 17:26:14,354 [17] DEBUG Mms - 
Select mms_warehouseStockHistory.MaterialCode,sum(Num) As InitNum,sum(UnitPrice*Num) As InitMoney
From mms_warehouseStockHistory
Left join mms_warehouse on mms_warehouse.warehouseCode=mms_warehouseStockHistory.warehouseCode
Left join mms_material on mms_material.MaterialCode=mms_warehouseStockHistory.MaterialCode
Where 1=1  And  mms_warehouse.ProjectCode='201306030001'
group by mms_warehouseStockHistory.MaterialCode

2013-11-23 17:26:19,033 [12] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/receive/Index','/Mms/receive')
2013-11-23 17:26:19,038 [12] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:26:19,039 [12] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:26:19,040 [12] DEBUG Servicesys_code - 获取动态列表
2013-11-23 17:26:19,041 [12] DEBUG Sys - select Code as value,Text as text from sys_code where CodeType='SupplyType'
2013-11-23 17:26:21,728 [15] DEBUG Servicemms_receive - 获取动态列表
2013-11-23 17:26:21,730 [15] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:26:21,792 [15] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName as WarehouseName, E.MerchantsName AS SupplierName from mms_receive A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType     = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode    = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.SupplierCode where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:44:25,491 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:44:25,515 [1] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:44:25,520 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:44:25,521 [1] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:44:25,860 [69] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:44:25,885 [69] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:44:26,112 [69] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 17:44:27,249 [69] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:44:27,250 [69] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 17:44:29,090 [73] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 17:44:51,696 [52] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:44:51,726 [52] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:44:51,732 [52] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:44:51,733 [52] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:44:52,064 [68] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Mms/refund/Index','/Mms/refund')
2013-11-23 17:44:52,087 [68] DEBUG Servicemms_warehouse - 获取动态列表
2013-11-23 17:44:52,109 [68] DEBUG Mms - select WarehouseCode as value,WarehouseName as text from mms_warehouse where ProjectCode='201306030001'
2013-11-23 17:44:56,615 [69] DEBUG Servicemms_refund - 获取动态列表
2013-11-23 17:44:56,617 [69] DEBUG Mms - select top 20 A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName from mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit where A.ProjectCode='201306030001' order by A.BillNo
2013-11-23 17:44:56,684 [69] DEBUG Mms - select count(*) from ( select A.*, B.ProjectName, C.MaterialTypeName, D.WarehouseName,E.MerchantsName as RefundUnitName from mms_refund A
        left join mms_project       B on B.ProjectCode      = A.ProjectCode
        left join mms_materialType  C on C.MaterialType = A.MaterialType
        left join mms_warehouse     D on D.WarehouseCode       = A.WarehouseCode
        left join mms_merchants     E on E.MerchantsCode    = A.RefundUnit where A.ProjectCode='201306030001' ) tb_temp
2013-11-23 17:45:00,781 [73] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2013-11-23 17:55:16,900 [33] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:55:16,932 [33] DEBUG Sys - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:55:16,939 [33] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:55:16,940 [33] DEBUG Mms - select name from dbo.sysobjects where id = object_id(N'[dbo].[fun_getPY]') and xtype in (N'FN', N'IF', N'TF')
2013-11-23 17:55:17,306 [41] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:55:17,325 [41] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_NAME'
2013-11-23 17:55:17,546 [41] DEBUG Sys - select * from sys_userSetting where UserCode='admin'
2013-11-23 17:55:18,721 [41] DEBUG Servicesys_parameter - 获取字段
2013-11-23 17:55:18,722 [41] DEBUG Sys - select ParamValue from sys_parameter where ParamCode='SYS_COPYRIGHT'
2013-11-23 17:55:20,533 [40] DEBUG Sys - 
-- 角色的菜单
select distinct B.*
from sys_roleMenuMap A
inner join sys_menu  B on B.MenuCode = A.MenuCode
where B.IsEnable='1'
  and RoleCode in (
  select RoleCode from sys_userRoleMap where UserCode = 'admin' -- 用户的角色
union all
  select RoleCode from sys_organizeRoleMap where OrganizeCode in  -- 机构的角色
  (
	select OrganizeCode from sys_userOrganizeMap where UserCode = 'admin'
  )  
)
order by B.MenuSeq,B.MenuCode
2013-11-23 17:55:24,118 [46] DEBUG Sys - 
select 1
from sys_roleMenuMap A
left join sys_userRoleMap B on B.RoleCode = A.RoleCode
left join sys_menu C on C.MenuCode = A.MenuCode
where B.UserCode = 'admin'
and C.URL in ('/Sys/generator/Index','/Sys/generator')
2013-11-23 17:55:30,155 [40] DEBUG Mms - SELECT Name as TableName FROM sys.tables order by Name
2013-11-23 17:55:30,175 [41] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2013-11-23 17:55:30,190 [44] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('undefined')
ORDER BY sys.columns.column_id
2013-11-23 17:55:31,256 [40] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:55:31,291 [44] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:55:43,315 [40] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:55:43,322 [40] DEBUG Mms - sp_pkeys 'mms_deal'
2013-11-23 17:57:44,517 [48] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:57:44,586 [49] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:57:49,051 [45] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:57:49,091 [50] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:57:50,955 [40] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_dealDetail')
ORDER BY sys.columns.column_id
2013-11-23 17:57:51,930 [43] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:57:51,964 [40] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:57:56,832 [45] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:57:56,836 [45] DEBUG Mms - sp_pkeys 'mms_deal'
2013-11-23 17:58:53,355 [57] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:58:53,433 [41] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:58:53,472 [44] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:58:53,507 [46] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:58:59,474 [41] DEBUG Mms - 
SELECT	sys.columns.name						AS ColumnName, 
		type_name(sys.columns.system_type_id)	AS SqlTypeName,
		sys.columns.max_length					AS MaxLength,
		sys.columns.is_nullable					AS IsNullable,
		sys.columns.is_identity					AS IsIdentity,
		(case when exists(select 1  
						 from   syscolumns 
						 join   sysindexkeys on syscolumns.id  =sysindexkeys.id and syscolumns.colid=sysindexkeys.colid and syscolumns.id=sys.columns.object_id 
						 join   sysindexes   on syscolumns.id  =sysindexes.id   and sysindexkeys.indid=sysindexes.indid   
						 join   sysobjects   on sysindexes.name=sysobjects.name and sysobjects.xtype= 'PK '
						 where syscolumns.name = sys.columns.name) then 1 else 0 end) AS IsPrimaryKey,
		(select value from sys.extended_properties where sys.extended_properties.major_id = sys.columns.object_id and sys.extended_properties.minor_id = sys.columns.column_id) as Description
FROM sys.columns    
WHERE sys.columns.object_id = object_id('mms_deal')
ORDER BY sys.columns.column_id
2013-11-23 17:58:59,478 [41] DEBUG Mms - sp_pkeys 'mms_deal'
